<!DOCTYPE html>
<!-- saved from url=(0098)http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3 -->
<html class="splitter-invoked"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
            <title>Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki</title>

        

                        
    
                        
    
                        
    

    <meta http-equiv="X-UA-Compatible" content="IE=EDGE,chrome=IE7">

<meta id="confluence-context-path" name="confluence-context-path" content="">
<meta id="confluence-base-url" name="confluence-base-url" content="https://eewiki.net">

<meta id="atlassian-token" name="atlassian-token" content="93b3587b722ff7374bc054562d0c364c97068f05">


<meta id="confluence-space-key" name="confluence-space-key" content="microcontroller">
<script type="text/javascript" async="" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/analytics.js.download"></script><script type="text/javascript" async="" defer="" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/piwik.js.download"></script><script type="text/javascript">
        var contextPath = '';
</script>

    

    <meta name="confluence-request-time" content="1517603027264">
        
    
        
            <meta name="ajs-is-space-admin" content=""> <meta name="ajs-has-space-config" content="">
            <meta name="ajs-use-keyboard-shortcuts" content="true">
            <meta name="ajs-discovered-plugin-features" content="$discoveredList">
            <meta name="stp-license-product-name" content="Confluence"> <meta name="stp-license-days-to-expiry" content="-20"> <meta name="stp-license-is-admin" content="false"> <meta name="stp-license-should-keep-banner-hidden" content="false">
            <meta name="ajs-keyboardshortcut-hash" content="255aa5de9e3be5326544af70d7930df6">
            <meta name="ajs-is-confluence-admin" content="false">
            <meta name="ajs-connection-timeout" content="10000">
            
    
    
            <meta name="ajs-page-id" content="27754907">
            <meta name="ajs-latest-page-id" content="27754907">
            <meta name="ajs-content-type" content="page">
            <meta name="ajs-page-title" content="Getting Started with EFM32 Giant Gecko ARM Cortex-M3">
            <meta name="ajs-latest-published-page-title" content="Getting Started with EFM32 Giant Gecko ARM Cortex-M3">
            <meta name="ajs-parent-page-title" content="Home">
            <meta name="ajs-parent-page-id" content="5242965">
            <meta name="ajs-space-key" content="microcontroller">
            <meta name="ajs-space-name" content="Microcontroller">
            <meta name="ajs-from-page-title" content="">
            <meta name="ajs-can-remove-page" content="false">
            <meta name="ajs-context-path" content="">
            <meta name="ajs-base-url" content="https://eewiki.net">
            <meta name="ajs-version-number" content="5.10.8">
            <meta name="ajs-build-number" content="6441">
            <meta name="ajs-remote-user" content="">
            <meta name="ajs-remote-user-key" content="">
            <meta name="ajs-remote-user-has-licensed-access" content="false">
            <meta name="ajs-current-user-fullname" content="">
            <meta name="ajs-current-user-avatar-url" content="">
            <meta name="ajs-current-user-avatar-uri-reference" content="/images/icons/profilepics/anonymous.png">
            <meta name="ajs-static-resource-url-prefix" content="/s/en_GB/6441/82994790ee2f720a5ec8daf4850ac5b7b34d2194/_">
            <meta name="ajs-global-settings-attachment-max-size" content="25728640">
            <meta name="ajs-user-locale" content="en_GB">
            <meta name="ajs-enabled-dark-features" content="confluence.view.edit.transition,confluence-inline-comments-resolved,notification.plugin.api.enabled.com.atlassian.confluence.plugins.sharepage.api.ShareContentEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.mentions.api.ConfluenceMentionEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.security.ForgotPasswordEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.tasklist.event.SendTaskEmailEvent,file-annotations,confluence.efi.onboarding.rich.space.content,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.comment.CommentCreateEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.follow.FollowEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.inlinecomments.events.InlineCommentReplyEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.blogpost.BlogPostCreateEvent,confluence.table.resizable,notification.batch,confluence-inline-comments-rich-editor,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.blogpost.BlogPostUpdateEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.page.async.PageCreatedEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.files.notifications.event.FileContentMentionUpdateEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.hipchat.api.events.HipChatUserMapped,quick-reload-inline-comments-flags,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.blogpost.BlogPostMovedEvent,clc.quick.create,cql.search.screen,nps.survey.inline.dialog,confluence.efi.onboarding.new.templates,pdf-preview,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.page.async.PageMovedEvent,previews.sharing,previews.versions,notification.plugin.api.enabled.com.atlassian.confluence.plugins.files.notifications.event.FileContentUpdateEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.attachment.AttachmentBatchUploadCompletedEvent,notification.plugin.api.enabled.com.atlassian.confluence.efi.emails.events.OnboardingLessUsersEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.files.notifications.event.FileContentRemoveEvent,confluence.wrap.macro,atlassian.aui.raphael.disabled,previews.conversion-service,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.comment.CommentUpdateEvent,editor.ajax.save,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.page.async.PageEditedEvent,previews.trigger-all-file-types,notification.plugin.api.enabled.com.atlassian.confluence.plugins.inlinecomments.events.InlineCommentResolveEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.like.LikeCreatedEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.inlinecomments.events.InlineCommentCreateEvent,previews.sharing.pushstate,file-annotations.likes,notification.plugin.api.enabled.com.atlassian.confluence.efi.emails.events.OnboardingNoSpaceCreatedEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.sharepage.api.ShareAttachmentEvent,confluence-inline-comments,confluence-inline-comments-dangling-comment">
            <meta name="ajs-atl-token" content="93b3587b722ff7374bc054562d0c364c97068f05">
            <meta name="ajs-confluence-flavour" content="VANILLA">
            <meta name="ajs-user-date-pattern" content="dd MMM yyyy">
            <meta name="ajs-date.format" content="MMM dd, yyyy">
    
    <link rel="shortcut icon" href="http://www.eewiki.net/s/en_GB/6441/82994790ee2f720a5ec8daf4850ac5b7b34d2194/123/_/favicon.ico">
    <link rel="icon" type="image/x-icon" href="http://www.eewiki.net/s/en_GB/6441/82994790ee2f720a5ec8daf4850ac5b7b34d2194/123/_/favicon.ico">

<link rel="search" type="application/opensearchdescription+xml" href="http://www.eewiki.net/opensearch/osd.action" title="eewiki">

    <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\u0022\u0022";
WRM._unparsedData["com.atlassian.confluence.plugins.confluence-hipchat-integration-plugin:discovery-javascript-data.link-active"]="{\u0022linkActive\u0022:false,\u0022conditionsMet\u0022:false,\u0022admin\u0022:false}";
WRM._unparsedData["com.atlassian.applinks.applinks-plugin:applinks-common-exported.applinks-help-paths"]="{\u0022entries\u0022:{\u0022applinks.docs.root\u0022:\u0022https://confluence.atlassian.com/display/APPLINKS-052/\u0022,\u0022applinks.docs.diagnostics.troubleshoot.sslunmatched\u0022:\u0022SSL+and+application+link+troubleshooting+guide\u0022,\u0022applinks.docs.diagnostics.troubleshoot.oauthsignatureinvalid\u0022:\u0022OAuth+troubleshooting+guide\u0022,\u0022applinks.docs.diagnostics.troubleshoot.oauthtimestamprefused\u0022:\u0022OAuth+troubleshooting+guide\u0022,\u0022applinks.docs.delete.entity.link\u0022:\u0022Create+links+between+projects\u0022,\u0022applinks.docs.adding.application.link\u0022:\u0022Link+Atlassian+applications+to+work+together\u0022,\u0022applinks.docs.administration.guide\u0022:\u0022Application+Links+Documentation\u0022,\u0022applinks.docs.oauth.security\u0022:\u0022OAuth+security+for+application+links\u0022,\u0022applinks.docs.troubleshoot.application.links\u0022:\u0022Troubleshoot+application+links\u0022,\u0022applinks.docs.diagnostics.troubleshoot.unknownerror\u0022:\u0022Network+and+connectivity+troubleshooting+guide\u0022,\u0022applinks.docs.configuring.auth.trusted.apps\u0022:\u0022Configuring+Trusted+Applications+authentication+for+an+application+link\u0022,\u0022applinks.docs.diagnostics.troubleshoot.authlevelunsupported\u0022:\u0022OAuth+troubleshooting+guide\u0022,\u0022applinks.docs.diagnostics.troubleshoot.ssluntrusted\u0022:\u0022SSL+and+application+link+troubleshooting+guide\u0022,\u0022applinks.docs.diagnostics.troubleshoot.unknownhost\u0022:\u0022Network+and+connectivity+troubleshooting+guide\u0022,\u0022applinks.docs.delete.application.link\u0022:\u0022Link+Atlassian+applications+to+work+together\u0022,\u0022applinks.docs.link.applications\u0022:\u0022Link+Atlassian+applications+to+work+together\u0022,\u0022applinks.docs.diagnostics.troubleshoot.oauthproblem\u0022:\u0022OAuth+troubleshooting+guide\u0022,\u0022applinks.docs.diagnostics.troubleshoot.migration\u0022:\u0022Update+application+links+to+use+OAuth\u0022,\u0022applinks.docs.relocate.application.link\u0022:\u0022Link+Atlassian+applications+to+work+together\u0022,\u0022applinks.docs.administering.entity.links\u0022:\u0022Create+links+between+projects\u0022,\u0022applinks.docs.upgrade.application.link\u0022:\u0022OAuth+security+for+application+links\u0022,\u0022applinks.docs.diagnostics.troubleshoot.connectionrefused\u0022:\u0022Network+and+connectivity+troubleshooting+guide\u0022,\u0022applinks.docs.configuring.auth.oauth\u0022:\u0022OAuth+security+for+application+links\u0022,\u0022applinks.docs.insufficient.remote.permission\u0022:\u0022OAuth+security+for+application+links\u0022,\u0022applinks.docs.configuring.application.link.auth\u0022:\u0022OAuth+security+for+application+links\u0022,\u0022applinks.docs.diagnostics\u0022:\u0022Application+links+diagnostics\u0022,\u0022applinks.docs.configured.authentication.types\u0022:\u0022OAuth+security+for+application+links\u0022,\u0022applinks.docs.adding.entity.link\u0022:\u0022Create+links+between+projects\u0022,\u0022applinks.docs.diagnostics.troubleshoot.unexpectedresponse\u0022:\u0022Network+and+connectivity+troubleshooting+guide\u0022,\u0022applinks.docs.configuring.auth.basic\u0022:\u0022Configuring+Basic+HTTP+Authentication+for+an+Application+Link\u0022,\u0022applinks.docs.diagnostics.troubleshoot.authlevelmismatch\u0022:\u0022OAuth+troubleshooting+guide\u0022}}";
WRM._unparsedData["com.atlassian.applinks.applinks-plugin:applinks-common-exported.applinks-types"]="{\u0022crowd\u0022:\u0022Crowd\u0022,\u0022confluence\u0022:\u0022Confluence\u0022,\u0022fecru\u0022:\u0022FishEye / Crucible\u0022,\u0022stash\u0022:\u0022Stash\u0022,\u0022jira\u0022:\u0022JIRA\u0022,\u0022refapp\u0022:\u0022Reference Application\u0022,\u0022bamboo\u0022:\u0022Bamboo\u0022,\u0022generic\u0022:\u0022Generic Application\u0022}";
WRM._unparsedData["com.atlassian.applinks.applinks-plugin:applinks-common-exported.entity-types"]="{\u0022singular\u0022:{\u0022refapp.charlie\u0022:\u0022Charlie\u0022,\u0022fecru.project\u0022:\u0022Crucible Project\u0022,\u0022fecru.repository\u0022:\u0022FishEye Repository\u0022,\u0022stash.project\u0022:\u0022Stash Project\u0022,\u0022generic.entity\u0022:\u0022Generic Project\u0022,\u0022confluence.space\u0022:\u0022Confluence Space\u0022,\u0022bamboo.project\u0022:\u0022Bamboo Project\u0022,\u0022jira.project\u0022:\u0022JIRA Project\u0022},\u0022plural\u0022:{\u0022refapp.charlie\u0022:\u0022Charlies\u0022,\u0022fecru.project\u0022:\u0022Crucible Projects\u0022,\u0022fecru.repository\u0022:\u0022FishEye Repositories\u0022,\u0022stash.project\u0022:\u0022Stash Projects\u0022,\u0022generic.entity\u0022:\u0022Generic Projects\u0022,\u0022confluence.space\u0022:\u0022Confluence Spaces\u0022,\u0022bamboo.project\u0022:\u0022Bamboo Projects\u0022,\u0022jira.project\u0022:\u0022JIRA Projects\u0022}}";
WRM._unparsedData["com.atlassian.applinks.applinks-plugin:applinks-common-exported.authentication-types"]="{\u0022com.atlassian.applinks.api.auth.types.BasicAuthenticationProvider\u0022:\u0022Basic Access\u0022,\u0022com.atlassian.applinks.api.auth.types.TrustedAppsAuthenticationProvider\u0022:\u0022Trusted Applications\u0022,\u0022com.atlassian.applinks.api.auth.types.CorsAuthenticationProvider\u0022:\u0022CORS\u0022,\u0022com.atlassian.applinks.api.auth.types.OAuthAuthenticationProvider\u0022:\u0022OAuth\u0022,\u0022com.atlassian.applinks.api.auth.types.TwoLeggedOAuthAuthenticationProvider\u0022:\u0022OAuth\u0022,\u0022com.atlassian.applinks.api.auth.types.TwoLeggedOAuthWithImpersonationAuthenticationProvider\u0022:\u0022OAuth\u0022}";
WRM._unparsedData["com.atlassian.confluence.plugins.confluence-feature-discovery-plugin:confluence-feature-discovery-plugin-resources.test-mode"]="false";
WRM._unparsedData["com.atlassian.confluence.plugins.confluence-license-banner:confluence-license-banner-resources.license-details"]="{\u0022daysBeforeLicenseExpiry\u0022:0,\u0022daysBeforeMaintenanceExpiry\u0022:0,\u0022showLicenseExpiryBanner\u0022:false,\u0022showMaintenanceExpiryBanner\u0022:false,\u0022renewUrl\u0022:null,\u0022salesEmail\u0022:null}";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script>
<link type="text/css" rel="stylesheet" href="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/c7e93401f66424c22e6fc282e4c7d993-CDN/en_GB/6441/82994790ee2f720a5ec8daf4850ac5b7b34d2194/be65c4ed0984ca532b26983f5fc1813e/_/download/contextbatch/css/_super/batch.css?atlassian.aui.raphael.disabled=true&amp;conditionalComment=lt+IE+9" data-wrm-key="_super" data-wrm-batch-type="context" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/c7e93401f66424c22e6fc282e4c7d993-CDN/en_GB/6441/82994790ee2f720a5ec8daf4850ac5b7b34d2194/be65c4ed0984ca532b26983f5fc1813e/_/download/contextbatch/css/_super/batch.css?atlassian.aui.raphael.disabled=true&amp;conditionalComment=lte+IE+9" data-wrm-key="_super" data-wrm-batch-type="context" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/batch(1).css" data-wrm-key="atl.confluence.macros.expand.desktop,viewcontent,main,page,atl.general,atl.confluence.plugins.pagetree-desktop,atl.comments,-_super" data-wrm-batch-type="context" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/1d56a08976feebf42e81bc25ef9423f7-CDN/en_GB/6441/82994790ee2f720a5ec8daf4850ac5b7b34d2194/0a1f49cacda80f99b3049063627fc5c8/_/download/contextbatch/css/atl.confluence.macros.expand.desktop,viewcontent,main,page,atl.general,atl.confluence.plugins.pagetree-desktop,atl.comments,-_super/batch.css?analytics-enabled=true&amp;analytics-uploadable=true&amp;anonymous-access-enabled=true&amp;atlassian.aui.raphael.disabled=true&amp;conditionalComment=lt+IE+9&amp;confluence.table.resizable=true&amp;confluence.view.edit.transition=true&amp;highlightactions=true&amp;is-server-instance=true&amp;nps-acknowledged=true" data-wrm-key="atl.confluence.macros.expand.desktop,viewcontent,main,page,atl.general,atl.confluence.plugins.pagetree-desktop,atl.comments,-_super" data-wrm-batch-type="context" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/batch(2).css" data-wrm-key="theme.doc,-_super" data-wrm-batch-type="context" media="all">
<link type="text/css" rel="stylesheet" href="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/colors.css" media="all">
<script type="text/javascript" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/batch.js.download" data-wrm-key="_super" data-wrm-batch-type="context"></script><style type="text/css"></style><style type="text/css"></style>
<script type="text/javascript" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/batch.js(1).download" data-wrm-key="atl.confluence.macros.expand.desktop,viewcontent,main,page,atl.general,atl.confluence.plugins.pagetree-desktop,atl.comments,-_super" data-wrm-batch-type="context"></script>
<script type="text/javascript" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/batch.js(2).download" data-wrm-key="theme.doc,-_super" data-wrm-batch-type="context"></script>

    
        
            <meta name="stp-license-product-name" content="Confluence"> <meta name="stp-license-days-to-expiry" content="-20"> <meta name="stp-license-is-admin" content="false"> <meta name="stp-license-should-keep-banner-hidden" content="false">
    

        
        <meta name="ajs-site-title" content="eewiki">
            
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async="" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/js"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-92161507-2');
</script>


<!-- Piwik -->
<script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//eng.eewiki.net/piwik/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', 2]);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript>&lt;p&gt;&lt;img src="//eng.eewiki.net/piwik/piwik.php?idsite=2" style="border:0;" alt="" /&gt;&lt;/p&gt;</noscript>
<!-- End Piwik Code -->
<meta name="google-site-verification" content="85yTzhpaQNr9MN1IqMB74sCTyZgrT5cW0hHRR-tt8l8">


    
                <link rel="canonical" href="https://eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3">
        <link rel="shortlink" href="https://eewiki.net/x/m4GnAQ">
    <meta name="wikilink" content="[microcontroller:Getting Started with EFM32 Giant Gecko ARM Cortex-M3]">
    <meta name="page-version" content="65">
    <meta name="ajs-page-version" content="65">

<script type="text/javascript" charset="utf-8" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/batch.js(3).download"></script><link rel="stylesheet" type="text/css" href="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/com.atlassian.confluence.ext.newcode-macro-plugin_sh-theme-confluence.css"><script type="text/javascript" charset="utf-8" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/batch.js(4).download"></script><link rel="stylesheet" type="text/css" href="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/batch(3).css"><script type="text/javascript" charset="utf-8" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/batch.js(5).download"></script>
            <meta name="ajs-use-watch" content="false">
            <meta name="ajs-attachment-source-content-id" content="27754907">
            <meta name="ajs-fallback-mode" content="false">
            <meta name="ajs-use-inline-tasks" content="true">
            <meta name="ajs-heartbeat" content="true">
            <meta name="ajs-action-locale" content="en_GB">
            <meta name="ajs-editor-plugin-resource-prefix" content="/s/en_GB/6441/82994790ee2f720a5ec8daf4850ac5b7b34d2194/5.10.8/_">
            <meta name="ajs-existing-draft-id" content="0">
            <meta name="ajs-user-watching-own-content" content="false">
            <meta name="ajs-new-page" content="false">
            <meta name="ajs-content-id" content="27754907">
            <meta name="ajs-editor-mode" content="richtext">
            <meta name="ajs-form-name" content="inlinecommentform">
            <meta name="ajs-auto-start" content="false">
            <meta name="ajs-can-attach-files" content="false">
            <meta name="ajs-show-draft-message" content="false">
            <meta name="ajs-conf-revision" content="confluence$content$27754907.0">
            <meta name="ajs-draft-id" content="0">
            <meta name="ajs-shared-drafts" content="false">
            <meta name="ajs-min-editor-height" content="150">
            <meta name="ajs-draft-share-id" content="">
            <meta name="ajs-content-type" content="page">
            <meta name="ajs-version-comment" content="">
            <meta name="ajs-draft-type" content="page">
                
                <meta name="ajs-synchrony-token" content="">
    <meta name="ajs-synchrony-service-uri" content="">
    <meta name="ajs-synchrony-resources-uri" content="">
    <meta name="ajs-synchrony-app-id" content="">
    <meta name="ajs-synchrony-dark-enabled" content="false">
    <meta name="ajs-synchrony-expiry" content="">

            		    <meta name="ajs-max-thumb-width" content="300">
		    <meta name="ajs-max-thumb-height" content="300">
		    <meta name="ajs-can-send-email" content="true">
		    <meta name="ajs-is-dev-mode" content="false">
		    <meta name="ajs-draft-save-interval" content="30000">
		    <meta name="ajs-show-hidden-user-macros" content="false">
		    <meta name="ajs-is-admin" content="false">
		    <meta name="ajs-heartbeat-interval" content="30000">
	
    </head>

    
<body id="com-atlassian-confluence" class="theme-documentation  aui-theme-default aui-layout splitter-invoked" data-aui-version="5.9.24">

        
            <div id="stp-licenseStatus-banner"></div>
    <div id="full-height-container">
    <div id="header-precursor">
        
                    </div>

    

    





<header id="header" role="banner">
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation" data-aui-responsive="true"><div class="aui-header-inner"><div class="aui-header-primary"><h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="http://www.eewiki.net/"><img src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/atl.site.logo" alt="eewiki" data-aui-responsive-header-index="0"></a></h1><ul class="aui-nav" resolved="" style="width: auto;">
                            <li>
            
        
        
<a id="space-menu-link" class=" aui-dropdown2-trigger aui-nav-link" aria-controls="space-menu-link-content" aria-haspopup="true" role="button" title="Spaces" tabindex="0" data-aui-trigger="" resolved="" aria-expanded="false" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#space-menu-link-content">Spaces<span class="icon aui-icon-dropdown"></span></a><div id="space-menu-link-content" class="aui-dropdown2 aui-style-default aui-dropdown2-in-header aui-layer" role="menu" aria-hidden="true" resolved=""><div role="application"></div></div>
        </li>
                            <li id="browseMenu" role="menu">
            
    
        <a id="browse-menu-link" class="aui-nav-link aui-dropdown2-trigger" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" aria-haspopup="true" title="Browse" resolved="" aria-controls="browse-menu-link-content" aria-expanded="false">
        <span class="browse">Browse</span>
    </a>
    <nav id="browse-menu-link-content" class="aui-dropdown2 aui-style-default aui-layer" aria-hidden="true" resolved="">
                    <div class="aui-dropdown2-section">
                                <ul id="browse-menu-link-leading" class="aui-list-truncate section-leading first">
                                            <li>
    
            
<a id="space-pages-link" href="http://www.eewiki.net/pages/listpages.action?key=microcontroller" class="    " title="Browse pages in the Microcontroller space (g , s)">
        Pages
</a>
</li>
                                            <li>
    
            
<a id="space-blogposts-link" href="http://www.eewiki.net/pages/viewrecentblogposts.action?key=microcontroller" class="    " title="Browse blogs in the Microcontroller space">
        Blog
</a>
</li>
                                            <li>
    
            
<a id="space-labels-link" href="http://www.eewiki.net/labels/listlabels-heatmap.action?key=microcontroller" class="    " title="Browse labels in the Microcontroller space">
        Labels
</a>
</li>
                                            <li>
    
            
<a id="space-advanced-link" href="http://www.eewiki.net/spaces/viewspacesummary.action?key=microcontroller" class="    " title="Browse additional space functions in the Microcontroller space">
        Space Operations
</a>
</li>
                                    </ul>
            </div>
            </nav>
    
        </li>
                        <li class="aui-buttons">
            </li>
    </ul>
</div><div class="aui-header-secondary"><ul class="aui-nav" resolved="">
            <li>
        
    
            
<a id="doctheme-anchor" class=" aui-nav-imagelink" title=""><div id="splitter-button" class="" title="Show or hide sidebar ([)"></div></a>
    </li>
                    <li>
        <form id="quick-search" class="aui-quicksearch dont-default-focus header-quicksearch" action="http://www.eewiki.net/dosearchsite.action" method="get"><fieldset><label for="quick-search-query" class="assistive">Quick Search</label><input id="quick-search-query" class="text app-search search quick-search-query" type="text" accesskey="q" autocomplete="off" name="queryString" title="Quick Search (/or g , g)" placeholder="Search"><input id="quick-search-submit" class="quick-search-submit" type="submit" value="Search"><div class="aui-dd-parent quick-nav-drop-down"></div></fieldset></form>
    </li>
        <li>
            
        <a id="help-menu-link" class="aui-nav-link aui-dropdown2-trigger" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" aria-haspopup="true" title="Help" resolved="" aria-controls="help-menu-link-content" aria-expanded="false">
        <span class="aui-icon aui-icon-small aui-iconfont-help">Help</span>
    </a>
    <nav id="help-menu-link-content" class="aui-dropdown2 aui-style-default aui-layer" aria-hidden="true" resolved="">
                    <div class="aui-dropdown2-section">
                                <ul id="help-menu-link-leading" class="aui-list-truncate section-leading first">
                                            <li>
        
            
<a id="confluence-help-link" href="https://docs.atlassian.com/confluence/docs-510/" class="    " title="Visit the Confluence documentation home" target="_blank">
        Online Help
</a>
</li>
                                            <li>
    
                
<a id="keyboard-shortcuts-link" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" class="    " title="View available keyboard shortcuts (?)">
        Keyboard Shortcuts
</a>
</li>
                                            <li>
    
            
<a id="feed-builder-link" href="http://www.eewiki.net/dashboard/configurerssfeed.action" class="    " title="Create your custom RSS feed.">
        Feed Builder
</a>
</li>
                                            <li>
    
            
<a id="whats-new-menu-link" href="https://confluence.atlassian.com/display/DOC/Confluence+5.10+Release+Notes" class="    " title="">
        What’s new
</a>
</li>
                                            <li>
    
                
<a id="gadget-directory-link" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" class="   user-item administration-link " title="Browse gadgets provided by Confluence">
        Available Gadgets
</a>
</li>
                                            <li>
    
            
<a id="confluence-about-link" href="http://www.eewiki.net/aboutconfluencepage.action" class="    " title="Get more information about Confluence">
        About Confluence
</a>
</li>
                                    </ul>
            </div>
            </nav>
    
    </li>
        <li>
                
    
    </li>
        <li>
            
    </li>
        <li>
                                            </li><li>
        
            
<a id="login-link" href="http://www.eewiki.net/login.action?os_destination=%2Fdisplay%2Fmicrocontroller%2FGetting%2BStarted%2Bwith%2BEFM32%2BGiant%2BGecko%2BARM%2BCortex-M3" class="   user-item login-link " title="">
        Log in
</a>
</li>
                        
    
    </ul>
</div></div><!-- .aui-header-inner--></nav><!-- .aui-header -->
    <br class="clear">
</header>
    

    <div id="splitter" style="position: relative; height: 590px;">
    <div id="splitter-sidebar" style="position: absolute; left: 0px; width: 300px; height: 590px;">
        
        <style type="text/css">/*<![CDATA[*/
div.rbtoc1517603027640 {padding: 0px;}
div.rbtoc1517603027640 ul {list-style: desc;margin-left: 0px;padding-left: 10px;}
div.rbtoc1517603027640 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class="toc-macro rbtoc1517603027640">
<ul class="toc-indentation">
<li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#GettingStartedwithEFM32GiantGeckoARMCortex-M3-Purpose">Purpose</a></li>
<li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#GettingStartedwithEFM32GiantGeckoARMCortex-M3-QuickLinks">Quick Links</a>
<ul class="toc-indentation">
<li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#GettingStartedwithEFM32GiantGeckoARMCortex-M3-PurchaseLinks">Purchase Links</a></li>
<li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#GettingStartedwithEFM32GiantGeckoARMCortex-M3-ReferenceDocumentation">Reference Documentation</a></li>
<li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#GettingStartedwithEFM32GiantGeckoARMCortex-M3-Downloads">Downloads</a></li>
</ul>
</li>
<li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#GettingStartedwithEFM32GiantGeckoARMCortex-M3-CreateanIARTemplateProjectforEFM32">Create an IAR Template Project for EFM32</a></li>
<li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#GettingStartedwithEFM32GiantGeckoARMCortex-M3-CodeExamples">Code Examples</a></li>
<li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#GettingStartedwithEFM32GiantGeckoARMCortex-M3-ContacttheAuthor">Contact the Author</a></li>
</ul>
</div>
    

                    
    


<div class="plugin_pagetree">

                        <div id="pagetreesearch">
            <form method="POST" class="aui" action="http://www.eewiki.net/plugins/pagetreesearch/pagetreesearch.action" name="pagetreesearchform">
                                    <input type="hidden" name="ancestorId" value="5242965">
                                <input type="hidden" name="spaceKey" value="microcontroller">
                <input type="text" class="text medium-field" size="20" name="queryString">
                <input type="submit" class="aui-button" value="Search">
            </form>
        </div>
            
        
    <ul class="plugin_pagetree_children_list plugin_pagetree_children_list_noleftspace">
        <div class="plugin_pagetree_children" id="children5242965-0">
<ul class="plugin_pagetree_children_list" id="child_ul5242965-0">
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan13140136-0">                        <a href="http://www.eewiki.net/display/microcontroller/ADC+Example+for+Xmega">ADC Example for Xmega</a>
        </span>
            </div>

        <div id="children13140136-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan5242973-0">                        <a href="http://www.eewiki.net/display/microcontroller/Arduino+Bootloader">Arduino Bootloader</a>
        </span>
            </div>

        <div id="children5242973-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan7569514-0">                        <a href="http://www.eewiki.net/display/microcontroller/Arduino+Simple+XBee+Network">Arduino Simple XBee Network</a>
        </span>
            </div>

        <div id="children7569514-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                                            <a id="plusminus12058655-0" class="plugin_pagetree_childtoggle icon icon-section-closed" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#">
            </a>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan12058655-0">                        <a href="http://www.eewiki.net/display/microcontroller/ATSAM4L-EK+Board">ATSAM4L-EK Board</a>
        </span>
            </div>

        <div id="children12058655-0" class="plugin_pagetree_children_container">
                                                            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan12059074-0">                        <a href="http://www.eewiki.net/display/microcontroller/Basic+LCD+Example+for+Xmega-B1">Basic LCD Example for Xmega-B1</a>
        </span>
            </div>

        <div id="children12059074-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan27295747-0">                        <a href="http://www.eewiki.net/display/microcontroller/CAN+Example+-+ATmega32M1+-+STK600">CAN Example - ATmega32M1 - STK600</a>
        </span>
            </div>

        <div id="children27295747-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan7569433-0">                        <a href="http://www.eewiki.net/display/microcontroller/Capacitance+Based+Humidity+Sensor">Capacitance Based Humidity Sensor</a>
        </span>
            </div>

        <div id="children7569433-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan59507220-0">                        <a href="http://www.eewiki.net/display/microcontroller/Configuring+and+Using+the+UART+Interface+on+the+DK-S124">Configuring and Using the UART Interface on the DK-S124</a>
        </span>
            </div>

        <div id="children59507220-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan5242992-0">                        <a href="http://www.eewiki.net/display/microcontroller/CRC+Basics">CRC Basics</a>
        </span>
            </div>

        <div id="children5242992-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan57574739-0">                        <a href="http://www.eewiki.net/display/microcontroller/EVAL-ADICUP360+Precision+Analog+Development+Platform">EVAL-ADICUP360 Precision Analog Development Platform</a>
        </span>
            </div>

        <div id="children57574739-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan47645031-0">                        <a href="http://www.eewiki.net/display/microcontroller/FLASH+Self+Write+Microchip+dsPIC33F%2C+PIC24H">FLASH Self Write Microchip dsPIC33F, PIC24H</a>
        </span>
            </div>

        <div id="children47645031-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan38207784-0">                        <a href="http://www.eewiki.net/display/microcontroller/Frequently+Asked+Questions+-+Embedded+Systems+Design">Frequently Asked Questions - Embedded Systems Design</a>
        </span>
            </div>

        <div id="children38207784-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span plugin_pagetree_current" id="childrenspan27754907-0">                        <a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3">Getting Started with EFM32 Giant Gecko ARM Cortex-M3</a>
        </span>
            </div>

        <div id="children27754907-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan33882195-0">                        <a href="http://www.eewiki.net/pages/viewpage.action?pageId=33882195">Getting Started with EFM32 Zero Gecko ARM Cortex-M0+</a>
        </span>
            </div>

        <div id="children33882195-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                                            <a id="plusminus35193138-0" class="plugin_pagetree_childtoggle icon icon-section-closed" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#">
            </a>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan35193138-0">                        <a href="http://www.eewiki.net/display/microcontroller/Getting+started+with+Freescale%27s+Freedom+KL46Z+Development+Board">Getting started with Freescale's Freedom KL46Z Development Board</a>
        </span>
            </div>

        <div id="children35193138-0" class="plugin_pagetree_children_container">
                                                            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan7962774-0">                        <a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+Freescale%27s+FSLBOT+Using+CodeWarrior+v7.2+and+Stick+OS">Getting Started with Freescale's FSLBOT Using CodeWarrior v7.2 and Stick OS</a>
        </span>
            </div>

        <div id="children7962774-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan61046817-0">                        <a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+Kinetis+Motor+Suite">Getting Started with Kinetis Motor Suite</a>
        </span>
            </div>

        <div id="children61046817-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan11665413-0">                        <a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+NXP%27s+LPC11XX+Cortex-M0+ARM+Microcontrollers">Getting Started with NXP's LPC11XX Cortex-M0 ARM Microcontrollers</a>
        </span>
            </div>

        <div id="children11665413-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan60031390-0">                        <a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+NXP%27s+MCUXpresso+with+the+FRDM-KL46Z">Getting Started with NXP's MCUXpresso with the FRDM-KL46Z</a>
        </span>
            </div>

        <div id="children60031390-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan39256220-0">                        <a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+PSoC+4+Prototyping+Kits+-+CY8CKIT-049">Getting Started with PSoC 4 Prototyping Kits - CY8CKIT-049</a>
        </span>
            </div>

        <div id="children39256220-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan61538344-0">                        <a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+PSoC+6+-+CY8CKIT-062-BLE">Getting Started with PSoC 6 - CY8CKIT-062-BLE</a>
        </span>
            </div>

        <div id="children61538344-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan54821006-0">                        <a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+Simplicity+Studio">Getting Started with Simplicity Studio</a>
        </span>
            </div>

        <div id="children54821006-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan47644832-0">                        <a href="http://www.eewiki.net/pages/viewpage.action?pageId=47644832">Getting Started with STM32 ARM Cortex-M0+</a>
        </span>
            </div>

        <div id="children47644832-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan52330587-0">                        <a href="http://www.eewiki.net/pages/viewpage.action?pageId=52330587">Getting Started with the Cypress/Spansion FM0+ S6E1B8 Series Microcontrollers</a>
        </span>
            </div>

        <div id="children52330587-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan28278836-0">                        <a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+the+Freescale+Kinetis+K60F120M+and+the+SGTL5000+Audio+Codec+with+an+Audio+Example">Getting Started with the Freescale Kinetis K60F120M and the SGTL5000 Audio Codec with an Audio Example</a>
        </span>
            </div>

        <div id="children28278836-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan61046858-0">                        <a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+the+Freescale+KV31F">Getting Started with the Freescale KV31F</a>
        </span>
            </div>

        <div id="children61046858-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan61047005-0">                        <a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+the+LPCXpresso812-Max">Getting Started with the LPCXpresso812-Max</a>
        </span>
            </div>

        <div id="children61047005-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan64422068-0">                        <a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+the+Microsemi+SmartFusion+2+Maker-Board">Getting Started with the Microsemi SmartFusion 2 Maker-Board</a>
        </span>
            </div>

        <div id="children64422068-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan54820921-0">                        <a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+the+PIC32+and+MPLAB+X">Getting Started with the PIC32 and MPLAB X</a>
        </span>
            </div>

        <div id="children54820921-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan59507165-0">                        <a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+the+Renesas+DK-S124">Getting Started with the Renesas DK-S124</a>
        </span>
            </div>

        <div id="children59507165-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan48201837-0">                        <a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+the+SAM+D21+Xplained+Pro+without+ASF">Getting Started with the SAM D21 Xplained Pro without ASF</a>
        </span>
            </div>

        <div id="children48201837-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan61047086-0">                        <a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+the+STM32L432+Nucleo-32+using+Eclipse+and+the+GNU+ARM+Toolchain">Getting Started with the STM32L432 Nucleo-32 using Eclipse and the GNU ARM Toolchain</a>
        </span>
            </div>

        <div id="children61047086-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                                            <a id="plusminus35192986-0" class="plugin_pagetree_childtoggle icon icon-section-closed" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#">
            </a>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan35192986-0">                        <a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+the+TI+Tiva+TM4C123GXL+LaunchPad+Evaluation+Board">Getting Started with the TI Tiva TM4C123GXL LaunchPad Evaluation Board</a>
        </span>
            </div>

        <div id="children35192986-0" class="plugin_pagetree_children_container">
                                                            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan59507164-0">                        <a href="http://www.eewiki.net/display/microcontroller/How-to+articles">How-to articles</a>
        </span>
            </div>

        <div id="children59507164-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan27754797-0">                        <a href="http://www.eewiki.net/pages/viewpage.action?pageId=27754797">Interface PIC to Honeywell HIH-5030/5031 Humidity Sensor</a>
        </span>
            </div>

        <div id="children27754797-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan54231198-0">                        <a href="http://www.eewiki.net/display/microcontroller/Interfacing+a+Three+Wire+Ultrasonic+Sensor+to+the+PSOC+5LP">Interfacing a Three Wire Ultrasonic Sensor to the PSOC 5LP</a>
        </span>
            </div>

        <div id="children54231198-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan55574665-0">                        <a href="http://www.eewiki.net/display/microcontroller/Low-Power+Modes+on+the+STM32L0+Series">Low-Power Modes on the STM32L0 Series</a>
        </span>
            </div>

        <div id="children55574665-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan56590380-0">                        <a href="http://www.eewiki.net/display/microcontroller/Measuring+Phase+Offset+Using+a+Microcontroller">Measuring Phase Offset Using a Microcontroller</a>
        </span>
            </div>

        <div id="children56590380-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan57574446-0">                        <a href="http://www.eewiki.net/display/microcontroller/Microchip+PIC+Family+Reference+Manuals+-+Compiled">Microchip PIC Family Reference Manuals - Compiled</a>
        </span>
            </div>

        <div id="children57574446-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan6619154-0">                        <a href="http://www.eewiki.net/display/microcontroller/PIC18+Software+UART+Timing+Requirements">PIC18 Software UART Timing Requirements</a>
        </span>
            </div>

        <div id="children6619154-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan28279196-0">                        <a href="http://www.eewiki.net/display/microcontroller/PSoC+Bootloaders">PSoC Bootloaders</a>
        </span>
            </div>

        <div id="children28279196-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan27754677-0">                        <a href="http://www.eewiki.net/display/microcontroller/PSoC+PWM+Example">PSoC PWM Example</a>
        </span>
            </div>

        <div id="children27754677-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan27754636-0">                        <a href="http://www.eewiki.net/display/microcontroller/PSoC+Timer+Example">PSoC Timer Example</a>
        </span>
            </div>

        <div id="children27754636-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan23888000-0">                        <a href="http://www.eewiki.net/display/microcontroller/PSoC+UART+Example">PSoC UART Example</a>
        </span>
            </div>

        <div id="children23888000-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan57575185-0">                        <a href="http://www.eewiki.net/pages/viewpage.action?pageId=57575185">Raspberry Pi I2S Driver (Slave)</a>
        </span>
            </div>

        <div id="children57575185-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                                            <a id="plusminus34537678-0" class="plugin_pagetree_childtoggle icon icon-section-closed" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#">
            </a>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan34537678-0">                        <a href="http://www.eewiki.net/display/microcontroller/SAM+D+Microcontrollers">SAM D Microcontrollers</a>
        </span>
            </div>

        <div id="children34537678-0" class="plugin_pagetree_children_container">
                                                            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan32112652-0">                        <a href="http://www.eewiki.net/display/microcontroller/Software+FIFO+Buffer+for+UART+Communication">Software FIFO Buffer for UART Communication</a>
        </span>
            </div>

        <div id="children32112652-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan38207790-0">                        <a href="http://www.eewiki.net/display/microcontroller/SPI+Example+for+Xmega">SPI Example for Xmega</a>
        </span>
            </div>

        <div id="children38207790-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan5242980-0">                        <a href="http://www.eewiki.net/display/microcontroller/STK600+Socket+Guide">STK600 Socket Guide</a>
        </span>
            </div>

        <div id="children5242980-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan59507253-0">                        <a href="http://www.eewiki.net/display/microcontroller/Using+the+ADC+and+ThreadX+RTOS+Messaging+Framework+on+the+Renesas+DK-S124">Using the ADC and ThreadX RTOS Messaging Framework on the Renesas DK-S124</a>
        </span>
            </div>

        <div id="children59507253-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan53313553-0">                        <a href="http://www.eewiki.net/display/microcontroller/Using+the+Capacitive+Touch+Sensor+on+the+FRDM-KL46Z">Using the Capacitive Touch Sensor on the FRDM-KL46Z</a>
        </span>
            </div>

        <div id="children53313553-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan60031057-0">                        <a href="http://www.eewiki.net/pages/viewpage.action?pageId=60031057">Using the GPIO’s and Timer Module’s on the Renesas DK-S124 with the HC-SR04 Ultrasonic Sensor</a>
        </span>
            </div>

        <div id="children60031057-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan56918031-0">                        <a href="http://www.eewiki.net/display/microcontroller/Using+the+IDD+Current+Measurement+Feature+on+the+STM32L053+Discovery+Board">Using the IDD Current Measurement Feature on the STM32L053 Discovery Board</a>
        </span>
            </div>

        <div id="children56918031-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan61046811-0">                        <a href="http://www.eewiki.net/display/microcontroller/Using+the+Renesas+ThreadX+RTOS+and+Messaging+Framework+to+Take+Data+from+Multiple+Sensors+Using+Multiple+Threads">Using the Renesas ThreadX RTOS and Messaging Framework to Take Data from Multiple Sensors Using Multiple Threads</a>
        </span>
            </div>

        <div id="children61046811-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan61046997-0">                        <a href="http://www.eewiki.net/pages/viewpage.action?pageId=61046997">Using the Seeed Grove 6 Axis Accelerometer/Gyroscope over I2C and Pin Interrupts with the Renesas DK-S124</a>
        </span>
            </div>

        <div id="children61046997-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan49414258-0">                        <a href="http://www.eewiki.net/display/microcontroller/Utilizing+Analog+Peripherals+on+the+PSOC+5LP">Utilizing Analog Peripherals on the PSOC 5LP</a>
        </span>
            </div>

        <div id="children49414258-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan13599405-0">                        <a href="http://www.eewiki.net/display/microcontroller/Xplained+Board+Peer+to+Peer+RF+Comm+using+RZ600">Xplained Board Peer to Peer RF Comm using RZ600</a>
        </span>
            </div>

        <div id="children13599405-0" class="plugin_pagetree_children_container">
            </div>
    </li>
    </ul>
</div>
    </ul>

    <fieldset class="hidden">
        <input type="hidden" name="treeId" value="">
        <input type="hidden" name="treeRequestId" value="/plugins/pagetree/naturalchildren.action?decorator=none&amp;excerpt=false&amp;sort=position&amp;reverse=false&amp;disableLinks=false&amp;expandCurrent=false">
        <input type="hidden" name="treePageId" value="27754907">

        <input type="hidden" name="noRoot" value="false">
        <input type="hidden" name="rootPageId" value="5242965">

        <input type="hidden" name="rootPage" value="">
        <input type="hidden" name="startDepth" value="0">
        <input type="hidden" name="spaceKey" value="microcontroller">

        <input type="hidden" name="i18n-pagetree.loading" value="Loading...">
        <input type="hidden" name="i18n-pagetree.error.permission" value="Unable to load page tree. It seems that you do not have permission to view the root page.">
        <input type="hidden" name="i18n-pagetree.eeror.general" value="There was a problem retrieving the page tree. Please check the server log file for more information.">
        <input type="hidden" name="loginUrl" value="/login.action?os_destination=%2Fpages%2Fviewpage.action%3FspaceKey%3Dmicrocontroller%26title%3DGetting%2BStarted%2Bwith%2BEFM32%2BGiant%2BGecko%2BARM%2BCortex-M3&amp;permissionViolation=true">
        <input type="hidden" name="mobile" value="false">

                <fieldset class="hidden">
                                                <input type="hidden" name="ancestorId" value="5242965">
                                    </fieldset>
    </fieldset>
</div>



            </div><div class="vsplitbar" unselectable="on" style="z-index: 4; position: absolute; user-select: none; cursor: ew-resize; left: 300px; height: 590px;"><a href="javascript:void(0)" accesskey="L" tabindex="0" title="vsplitbar"></a></div>
    <div id="splitter-content" style="position: absolute; left: 305px; width: 1231px; height: 590px;">

        <script>require('doctheme/doc-theme')()</script>

                        
            
<div id="main" class="aui-page-panel">
    <div id="main-header" class="doctheme-no-override">
        
                
    <div id="navigation" class="content-navigation view">
                    <ul class="ajs-menu-bar">
                                            
        <li class="normal ajs-menu-item">
        <a id="action-menu-link" class="action aui-dropdown2-trigger-arrowless aui-button aui-button-subtle ajs-menu-title aui-dropdown2-trigger" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" aria-haspopup="true" data-container="#navigation" resolved="" aria-controls="action-menu" aria-expanded="false">
            <span>
                                    <span class="aui-icon aui-icon-small aui-iconfont-more"></span>
                                
            </span>
        </a>         <div id="action-menu" class="aui-dropdown2 aui-style-default aui-layer most-right-menu-item" aria-hidden="true" resolved="">
                            <div class="aui-dropdown2-section">
                    <ul id="action-menu-primary" class="section-primary first">
                                                    <li>

    
        
                                            
    
    
    <a id="view-attachments-link" href="http://www.eewiki.net/pages/viewpageattachments.action?pageId=27754907" rel="nofollow" class="action-view-attachments" accesskey="t" title="View Attachments (t)">
                <span>
                        A<u>t</u>tachments (37)
        </span>    </a>
</li>
                                                <li>

    
        
                                            
    
    
    <a id="action-view-history-link" href="http://www.eewiki.net/pages/viewpreviousversions.action?pageId=27754907" rel="nofollow" class="action-view-history" title="">
                <span>
                        Page History
        </span>    </a>
</li>
                                        </ul>
                </div>
                            <div class="aui-dropdown2-section">
                    <ul id="action-menu-secondary" class="section-secondary">
                                                    <li>

    
        
                                            
    
    
    <a id="view-page-info-link" href="http://www.eewiki.net/pages/viewinfo.action?pageId=27754907" rel="nofollow" class="action-view-info" title="">
                <span>
                        Page Information
        </span>    </a>
</li>
                                                <li>

    
            
                                            
    
    
    <a id="view-resolved-comments" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" rel="nofollow" class="" title="">
                <span>Resolved comments (0)</span>    </a>
</li>
                                                <li>

    
        
                                            
    
    
    <a id="link-to-page-link" href="http://www.eewiki.net/pages/viewinfo.action?pageId=27754907" rel="nofollow" class="" title="Link to this Page (k)">
                <span>
                        Link to this Page…
        </span>    </a>
</li>
                                                <li>

    
        
                                            
    
    
    <a id="view-in-hierarchy-link" href="http://www.eewiki.net/pages/listpages-dirview.action?key=microcontroller&amp;openId=27754907#selectedPageInHierarchy" rel="nofollow" class="" title="">
                <span>
                        View in Hierarchy
        </span>    </a>
</li>
                                                <li>

    
        
                                            
    
    
    <a id="action-view-source-link" href="http://www.eewiki.net/plugins/viewsource/viewpagesrc.action?pageId=27754907" rel="nofollow" class="action-view-source popup-link" title="">
                <span>
                        View Source
        </span>    </a>
</li>
                                                <li>

    
        
                                            
    
    
    <a id="action-export-pdf-link" href="http://www.eewiki.net/spaces/flyingpdf/pdfpageexport.action?pageId=27754907" rel="nofollow" class="" title="">
                <span>
                        Export to PDF
        </span>    </a>
</li>
                                                <li>

    
        
                                            
    
    
    <a id="action-export-word-link" href="http://www.eewiki.net/exportword?pageId=27754907" rel="nofollow" class="action-export-word" title="">
                <span>
                        Export to Word
        </span>    </a>
</li>
                                        </ul>
                </div>
                    </div>
    </li>
            </ul>
    </div>

        
                <div id="title-heading" class="pagetitle with-breadcrumbs">
        
                            <div class="space-logo " data-key="microcontroller" data-name="Microcontroller" data-entity-type="confluence.space">
            <a><img class="logo global custom" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/global.logo" alt=""></a>
        </div>            
                            <div id="breadcrumb-section">
                    
    
    
    <ol id="breadcrumbs">
                                        
                        
        <li class="first">
                        
                            <span class=""><a href="http://www.eewiki.net/display/microcontroller?src=breadcrumbs-homepage">Microcontroller</a></span>
                                                                                    
                        
        </li><li>
                        
                            <span class=""><a href="http://www.eewiki.net/display/microcontroller/Home?src=breadcrumbs-parent">Home</a></span>
                                                                    </li></ol>


                </div>
            
            <h1 id="title-text" class="with-breadcrumbs">
                                        <a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3">Getting Started with EFM32 Giant Gecko ARM Cortex-M3</a>
                            </h1>
        </div>
    </div>

    

    
    
    
    
    

        




            
    






    







    
    
        
    
    
                    
    

    
            
        

    
    

    
    

    
<div id="content" class="page view">
    


<div id="action-messages">
                        </div>



        <script type="text/x-template" title="searchResultsGrid">
    <table class="aui">
        <thead>
            <tr class="header">
                <th class="search-result-title">Page Title</th>
                <th class="search-result-space">Space</th>
                <th class="search-result-date">Updated</th>
            </tr>
        </thead>
    </table>
</script>
<script type="text/x-template" title="searchResultsGridCount">
    <p class="search-result-count">{0}</p>
</script>
<script type="text/x-template" title="searchResultsGridRow">
    <tr class="search-result">
        <td class="search-result-title"><a href="{1}" class="content-type-{2}"><span>{0}</span></a></td>
        <td class="search-result-space"><a class="space" href="/display/{4}/" title="{3}">{3}</a></td>
        <td class="search-result-date"><span class="date" title="{6}">{5}</span></td>
    </tr>
</script>
        
    
    
        <fieldset class="hidden parameters">
            <input type="hidden" title="parentPageId" value="5242965">
        </fieldset>

                            
    

                    

        
        <a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#page-metadata-end" class="assistive">Skip to end of metadata</a>
<div id="page-metadata-start" class="assistive"></div>

    <div class="page-metadata">
        <ul>
                            <li class="page-metadata-item noprint">

    
            
                                            
    
    
    <a id="content-metadata-page-restrictions-hidden" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" rel="nofollow" class="hidden" title="Unrestricted">
                <span>
                        
        </span>    </a>
</li>
                            <li class="page-metadata-item noprint">

    
        
                                            
    
    
    <a id="content-metadata-attachments" href="http://www.eewiki.net/pages/viewpageattachments.action?pageId=27754907&amp;metadataLink=true" rel="nofollow" class="aui-icon aui-icon-small aui-iconfont-attachment" accesskey="t" title="37 attachments">
                <span>
                        
        </span>    </a>
</li>
                        <li class="page-metadata-modification-info">
                
        
    
        
    
        
            
            Created by <span class="author">     <a href="http://www.eewiki.net/display/~scott.schmit@digikey.com" class="url fn">Scott Schmit</a></span>, last modified on <a class="last-modified" title="Show changes" href="http://www.eewiki.net/pages/diffpagesbyversion.action?pageId=27754907&amp;selectedPageVersions=64&amp;selectedPageVersions=65">Sep 18, 2014</a>
                </li>
        </ul>
    </div>


<a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#page-metadata-start" class="assistive">Go to start of metadata</a>
<div id="page-metadata-end" class="assistive"></div>

        
        <fieldset class="hidden parameters">
                        <input type="hidden" title="browsePageTreeMode" value="view">
        </fieldset>

        <div id="main-content" class="wiki-content">
                           
        <div class="sectionColumnWrapper conf-macro output-block" data-hasbody="true" data-macro-name="section"><div class="sectionMacro"><div class="sectionMacroRow"><div class="columnMacro conf-macro output-block" style="width:25%;min-width:25%;max-width:25%;" data-hasbody="true" data-macro-name="column"><p> </p><div class="toc-macro client-side-toc-macro  conf-macro output-block hidden-outline" data-headerelements="H1,H2,H3,H4,H5,H6,H7" data-hasbody="false" data-macro-name="toc"><ul style=""><li><span class="toc-item-body" data-outline="1"><span class="toc-outline">1</span><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#GettingStartedwithEFM32GiantGeckoARMCortex-M3-Purpose" class="toc-link">Purpose</a></span></li><li><span class="toc-item-body" data-outline="2"><span class="toc-outline">2</span><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#GettingStartedwithEFM32GiantGeckoARMCortex-M3-QuickLinks" class="toc-link">Quick Links</a></span><ul style=""><li><span class="toc-item-body" data-outline="2.1"><span class="toc-outline">2.1</span><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#GettingStartedwithEFM32GiantGeckoARMCortex-M3-PurchaseLinks" class="toc-link">Purchase Links</a></span></li><li><span class="toc-item-body" data-outline="2.2"><span class="toc-outline">2.2</span><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#GettingStartedwithEFM32GiantGeckoARMCortex-M3-ReferenceDocumentation" class="toc-link">Reference Documentation</a></span></li><li><span class="toc-item-body" data-outline="2.3"><span class="toc-outline">2.3</span><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#GettingStartedwithEFM32GiantGeckoARMCortex-M3-Downloads" class="toc-link">Downloads</a></span></li></ul></li><li><span class="toc-item-body" data-outline="3"><span class="toc-outline">3</span><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#GettingStartedwithEFM32GiantGeckoARMCortex-M3-CreateanIARTemplateProjectforEFM32" class="toc-link">Create an IAR Template Project for EFM32</a></span></li><li><span class="toc-item-body" data-outline="4"><span class="toc-outline">4</span><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#GettingStartedwithEFM32GiantGeckoARMCortex-M3-CodeExamples" class="toc-link">Code Examples</a></span></li><li><span class="toc-item-body" data-outline="5"><span class="toc-outline">5</span><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#GettingStartedwithEFM32GiantGeckoARMCortex-M3-ContacttheAuthor" class="toc-link">Contact the Author</a></span></li></ul></div><p> </p></div><div class="columnMacro conf-macro output-block" style="width:75%;min-width:75%;max-width:75%;" data-hasbody="true" data-macro-name="column"><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="450" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/efm32gg-stk3700.jpg" data-image-src="/download/attachments/27754907/efm32gg-stk3700.jpg?version=1&amp;modificationDate=1384210850710&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="27951509" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="efm32gg-stk3700.jpg" data-base-url="https://eewiki.net" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="27754907" data-linked-resource-container-version="65"></span></p></div></div></div></div><p>&nbsp;</p><h2 id="GettingStartedwithEFM32GiantGeckoARMCortex-M3-Purpose">Purpose</h2><p>This page is meant to help you get started with Giant Gecko microcontrollers which are part of the EFM32 device family from Silicon Labs.&nbsp; The EFM32 family of microcontrollers are some of the lowest power 32-bit microcontrollers available.&nbsp; The Giant Gecko device family implements an ARM Cortex-M3 core and is available with up to 1024KB program (flash) memory, up to 128KB RAM, and CPU speeds up to 48MHz.&nbsp; This page will help you start a blank Giant Gecko project using IAR Embedded Workbench and provide some example code to familiarize you with the various peripherals available with this microcontroller at the register level. It also provides example code using emlib functions.&nbsp; The EFM32GG-STK3700 was used as the development platform for these examples.</p><h2 id="GettingStartedwithEFM32GiantGeckoARMCortex-M3-QuickLinks">Quick Links</h2><h5 id="GettingStartedwithEFM32GiantGeckoARMCortex-M3-PurchaseLinks">Purchase Links</h5><ul><li><a href="http://www.digikey.com/product-search/en?s=32790&amp;FV=fff40027%2Cfff800cd%2Cfffc0150&amp;k=microcontroller&amp;mnonly=0&amp;newproducts=0&amp;ColumnSort=0&amp;page=1&amp;quantity=0&amp;ptm=0&amp;fid=0&amp;pageSize=25&amp;k=microcontroller&amp;filterAlwaysExpand=1" class="external-link">EFM32GGxxx</a>&nbsp; -&nbsp; Giant Gecko ARM Cortex-M3 devices</li><li><a href="http://www.digikey.com/product-detail/en/EFM32GG-STK3700/914-1041-ND/3125512" class="external-link">EFM32GG-STK3700</a>&nbsp; -&nbsp; Giant Gecko Starter Kit</li></ul><h5 id="GettingStartedwithEFM32GiantGeckoARMCortex-M3-ReferenceDocumentation">Reference Documentation</h5><ul><li><a href="http://www.silabs.com/products/mcu/Pages/32-bit-microcontrollers.aspx" class="external-link">Splash Page for ARM microcontrollers from SiLabs</a>&nbsp; -&nbsp; Provides overview of the entire ARM portfolio from Silicon Labs.</li><li><a href="http://www.eewiki.net/download/attachments/27754907/EFM32GG-RefMan.pdf?version=1&amp;modificationDate=1384269609207&amp;api=v2" data-linked-resource-id="27951511" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="EFM32GG-RefMan.pdf" data-nice-type="PDF Document" data-linked-resource-content-type="application/pdf" data-linked-resource-container-id="27754907" data-linked-resource-container-version="65">EFM32GG Reference Manual</a>&nbsp; -&nbsp; Provides register details and descriptions for each peripheral.</li><li><a href="http://www.eewiki.net/download/attachments/27754907/EFM32GG990_Datasheet.pdf?version=1&amp;modificationDate=1384269511267&amp;api=v2" data-linked-resource-id="27951510" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="EFM32GG990_Datasheet.pdf" data-nice-type="PDF Document" data-linked-resource-content-type="application/pdf" data-linked-resource-container-id="27754907" data-linked-resource-container-version="65">EFM32GG990 Datasheet</a>&nbsp; -&nbsp; Provides electrical characteristics, pin diagrams/descriptions, and memory map for the EFM32GG990 device specifically.</li><li><a href="http://www.eewiki.net/download/attachments/27754907/BRD2200A_A03_schematic.pdf?version=1&amp;modificationDate=1384269764067&amp;api=v2" data-linked-resource-id="27951512" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="BRD2200A_A03_schematic.pdf" data-nice-type="PDF Document" data-linked-resource-content-type="application/pdf" data-linked-resource-container-id="27754907" data-linked-resource-container-version="65">EFM32 Giant Gecko Starter Kit Board Schematic</a></li><li><a href="http://www.eewiki.net/download/attachments/27754907/AN0009_EFM32_Getting_Started.pdf?version=1&amp;modificationDate=1384269808723&amp;api=v2" data-linked-resource-id="27951513" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="AN0009_EFM32_Getting_Started.pdf" data-nice-type="PDF Document" data-linked-resource-content-type="application/pdf" data-linked-resource-container-id="27754907" data-linked-resource-container-version="65">EFM32 Giant Gecko Starter Kit User Guide</a></li><li><a href="http://cdn.energymicro.com/dl/documentation/doxygen/EM_CMSIS_3.20.2_DOC/index.html" class="external-link">EFM32 emlib API</a>&nbsp; -&nbsp; Online documentation for emlib functions</li><li><a href="http://www.eewiki.net/download/attachments/27754907/AN0009_EFM32_Getting_Started.pdf?version=1&amp;modificationDate=1384269808723&amp;api=v2" data-linked-resource-id="27951513" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="AN0009_EFM32_Getting_Started.pdf" data-nice-type="PDF Document" data-linked-resource-content-type="application/pdf" data-linked-resource-container-id="27754907" data-linked-resource-container-version="65">AN0009 EFM32 Getting Started</a>&nbsp; -&nbsp; App note that provides background on EFM32 devices, Simplicity Studio, and how to use the emlib libraries.</li></ul><h5 id="GettingStartedwithEFM32GiantGeckoARMCortex-M3-Downloads">Downloads</h5><ul><li><a href="http://www.silabs.com/products/mcu/Pages/simplicity-studio.aspx" class="external-link">Simplicity Studio</a>&nbsp; -&nbsp; Provides extensive documentation for all EFM32 devices and example code using emlib libraries.&nbsp; Also performs energy analysis.&nbsp; Latest version of Simplicity Studio includes a code development environment.</li><li><a href="http://www.iar.com/Service-Center/Downloads/" class="external-link">IAR Embedded Workbench</a>&nbsp; -&nbsp; Firmware development environment (CD also included with kit).&nbsp; Time-limited licenses, or code-limited licenses are available for free.&nbsp; The 32KB code-limited version can be used for the examples found on this page.</li><li><a href="http://www2.keil.com/mdk5/install" class="external-link">Keil uVision5</a>&nbsp; -&nbsp; Firmware development environment.&nbsp; Similar free licenses are also available for this software.</li></ul><h2 id="GettingStartedwithEFM32GiantGeckoARMCortex-M3-CreateanIARTemplateProjectforEFM32">Create an IAR Template Project for EFM32</h2><p>Silicon Labs recommends using Simplicity Studio to locate example code and documentation.&nbsp; They recommend cloning existing projects for IAR instead of starting a blank IAR project from scratch.&nbsp; This is because all of the App Notes and example code written for these micros use a hierarchy that is non-typical for IAR projects.&nbsp; The examples also setup your include file paths and setup your debug link for you.&nbsp; You can then use CMSIS and em_lib libraries to call functions from your main.c file to develop your application.</p><p>Although it's not necessarily recommended, you can start a blank IAR project by using the following procedure.&nbsp; This procedure parallels the example found <a href="http://forum.energymicro.com/topic/468-create-a-new-project-in-iar/" class="external-link">here</a>.&nbsp; However, I setup my project in a unique project directory rather than the default location used by Simplicity Studio.</p><p>&nbsp;</p><div id="expander-2062014517" class="expand-container conf-macro output-block" data-hasbody="true" data-macro-name="expand"><div id="expander-control-2062014517" class="expand-control"><span class="expand-control-icon icon">&nbsp;</span><span class="expand-control-text">Procedure for Starting a Template IAR Project for EFM32</span></div><div id="expander-content-2062014517" class="expand-content expand-hidden"><p>This procedure outlines how to start a blank IAR project and setup the necessary project settings.&nbsp; However, we will use this process to setup a template project.&nbsp; Once we have a template created, we can simply copy&amp;paste and rename the project whenever we wish to start a new EFM32 Giant Gecko project.&nbsp; Even if you don't want to use the emlib libraries, you should still follow all of these steps to properly setup your project.</p><ol><li>Open IAR and navigate to Project -&gt; Create New Project<br><br><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/Step1.jpg" data-image-src="/download/attachments/27754907/Step1.jpg?version=1&amp;modificationDate=1391789129287&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="30212197" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Step1.jpg" data-base-url="https://eewiki.net" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="27754907" data-linked-resource-container-version="65"></span></li><li>In the "Create New Project" dialog box, ensure 'ARM' is selected as the Toolchain.&nbsp; Select 'Empty Project' and click 'OK'.<br><br><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/Step2.jpg" data-image-src="/download/attachments/27754907/Step2.jpg?version=1&amp;modificationDate=1391789136583&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="30212198" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Step2.jpg" data-base-url="https://eewiki.net" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="27754907" data-linked-resource-container-version="65"></span></li><li>Now a "Save As" dialog should pop up and you can select a location for your project.<br><br>Silicon Labs recommends placing each of your projects in the application note (an) directory that gets created when you install Simplicity Studio.&nbsp; However, we are going to create a unique location for all of our EFM32 projects.&nbsp; <br><br>For my personal use, I created a "My_EFM32_Projects" folder within an "Energy Micro" folder on my desktop.&nbsp; This is where I store all of my new EFM32 projects.&nbsp; For this demo, since we are using a Giant Gecko microcontroller, inside the "My_EFM32_Projects" folder, I've created a folder called "Template_EFM32GG".&nbsp; You can name it whatever you wish.&nbsp; However, I like to be able to sort my projects by micro type.&nbsp; It's an easy identifier for me to recognize which specific micro I used for that project if I include it in the name of the project folder.&nbsp; Alternatively, you could create another folder for individual micros if you wanted, but I like to keep my folder count down if possible.&nbsp; My project directory now has the following hierarchy:<br><br>&lt;desktop&gt; -&gt; "Energy Micro" -&gt; "My_EFM32_Projects" -&gt; "Template_EFM32GG"<br><br>Once you have your project directory setup, create an "iar" folder and save the project file as "Template_EFM32GG.ewp".<br><br><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/Step3.jpg" data-image-src="/download/attachments/27754907/Step3.jpg?version=1&amp;modificationDate=1391789140380&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="30212199" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Step3.jpg" data-base-url="https://eewiki.net" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="27754907" data-linked-resource-container-version="65"></span></li><li>Now that your project has been created, you can add some groups to the project.&nbsp; Right-click the project in the workspace browser and select 'Add Group'.<br><br><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/Step4.jpg" data-image-src="/download/attachments/27754907/Step4.jpg?version=1&amp;modificationDate=1391789152833&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="30212200" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Step4.jpg" data-base-url="https://eewiki.net" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="27754907" data-linked-resource-container-version="65"></span></li><li>Let's name the first group 'source'.&nbsp; This is standard for all EFM32 projects.<br><br><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/Step5.jpg" data-image-src="/download/attachments/27754907/Step5.jpg?version=1&amp;modificationDate=1391789157223&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="30212201" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Step5.jpg" data-base-url="https://eewiki.net" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="27754907" data-linked-resource-container-version="65"></span></li><li>Now we can create our 'main.c' file.&nbsp; Navigate to File -&gt; New -&gt; File<br><br><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/Step6.jpg" data-image-src="/download/attachments/27754907/Step6.jpg?version=1&amp;modificationDate=1391789163520&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="30212202" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Step6.jpg" data-base-url="https://eewiki.net" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="27754907" data-linked-resource-container-version="65"></span></li><li>An untitled file should open.&nbsp; Select File -&gt; Save As<br><br><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/Step7.jpg" data-image-src="/download/attachments/27754907/Step7.jpg?version=1&amp;modificationDate=1391789167273&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="30212203" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Step7.jpg" data-base-url="https://eewiki.net" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="27754907" data-linked-resource-container-version="65"></span></li><li>Navigate to your project directory (one level above the 'iar' folder you saved the project file in) and save the file as 'main.c'.&nbsp; In my case the project directory is: &lt;desktop&gt; -&gt; "Energy Micro" -&gt; "My_EFM32_Projects" -&gt; "Template_EFM32GG"<br><br><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/Step8.jpg" data-image-src="/download/attachments/27754907/Step8.jpg?version=1&amp;modificationDate=1391789171570&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="30212204" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Step8.jpg" data-base-url="https://eewiki.net" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="27754907" data-linked-resource-container-version="65"></span></li><li>Now that the 'main.c' file has been created, we have to actually add it to our workspace.&nbsp; Right-click on the 'source' group you created and select Add -&gt; Add Files.<br><br><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/Step9.jpg" data-image-src="/download/attachments/27754907/Step9.jpg?version=1&amp;modificationDate=1391789175413&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="30212205" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Step9.jpg" data-base-url="https://eewiki.net" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="27754907" data-linked-resource-container-version="65"></span></li><li>Select the 'main.c' file you just created.<strong><br><br><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/Step10.jpg" data-image-src="/download/attachments/27754907/Step10.jpg?version=1&amp;modificationDate=1391789179880&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="30212206" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Step10.jpg" data-base-url="https://eewiki.net" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="27754907" data-linked-resource-container-version="65"></span><br></strong></li><li>Add two more groups to your workspace and call them 'CMSIS' and 'emlib'.&nbsp; This is standard for EFM32 projects.</li><li>Right-click the 'CMSIS' group and select Add -&gt; Add File.&nbsp; <br><br><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/Step11.jpg" data-image-src="/download/attachments/27754907/Step11.jpg?version=1&amp;modificationDate=1391789183227&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="30212207" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Step11.jpg" data-base-url="https://eewiki.net" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="27754907" data-linked-resource-container-version="65"></span></li><li><p>When Simplicity Studio is installed, it saves all documentation as well as CMSIS, emlib, and device files in: &nbsp; C:\Users\&lt;user name&gt;\AppData\Roaming\energymicro<br>In the 'energymicro' folder, navigate to Device -&gt; EnergyMicro -&gt; EFM32GG -&gt; Source&nbsp; (if you aren't using a Giant Gecko, navigate to the appropriate EFM32xx folder).</p>Select the 'system_efm32gg.c' file and click 'Open' to add the file to your workspace.&nbsp; This file is included for all standard EFM32 projects.<br><br><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/Step12.jpg" data-image-src="/download/attachments/27754907/Step12.jpg?version=1&amp;modificationDate=1391789186303&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="30212208" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Step12.jpg" data-base-url="https://eewiki.net" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="27754907" data-linked-resource-container-version="65"></span></li><li>Right-click the 'CMSIS' group and again select Add -&gt; Add File.&nbsp; Navigate to C:\Users\&lt;user name&gt;\App Data\Roaming\energymicro\Device\EnergyMicro\EFM32GG\Source\IAR and open the 'startup_efm32gg.s' file to add it to your workspace.&nbsp; This file is needed in order to properly program the device.<br><br><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/Step13.jpg" data-image-src="/download/attachments/27754907/Step13.jpg?version=1&amp;modificationDate=1391789189117&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="30212209" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Step13.jpg" data-base-url="https://eewiki.net" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="27754907" data-linked-resource-container-version="65"></span></li><li>Now you can add source files to the 'emlib' group that you previously created.&nbsp; You can add only the ones you need, or add all of them if you wish.&nbsp; Navigate to the 'emlib' folder which is located at C:\Users\&lt;user name&gt;\AppData\Roaming\energymicro.<br>Inside the 'emlib' folder you can open the 'src' folder and add any or all of the peripheral emlib libraries.&nbsp; I would recommend adding all of them to your workspace for you to easily browse through the available functions.&nbsp; That way you can view any file without having to navigate to each one using windows explorer.&nbsp; Use 'Ctrl'+'left mouse button' to select individual files and click 'Open' to add them to your workspace.<br>Note:&nbsp; Even if you don't want to use the emlib libraries, you should still add the 'em_system.c' file to the emlib group so that you can call the <em>Chip_Init()</em><em> </em>function at the beginning of your 'main.c' file.&nbsp; <em>Chip_Init()</em> addresses any known errata for your device and applies any known software fixes.<br><br><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/Step14.jpg" data-image-src="/download/attachments/27754907/Step14.jpg?version=1&amp;modificationDate=1391789192070&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="30212210" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Step14.jpg" data-base-url="https://eewiki.net" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="27754907" data-linked-resource-container-version="65"></span></li><li>In order to use the functions located in these emlib files, you need to add #include for the respective header file in your 'main.c' file.&nbsp; For example, if you wanted to use any of the prewritten ADC functions in your 'main.c' file, you would need to include the 'em_adc.h' header file as shown in the following example.&nbsp; 'em_system.h' and 'em_chip.h' should be added to every EFM32 project.&nbsp; You can also add a blank <em>main()</em> function to your 'main.c' file.<br><br><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/Step15.jpg" data-image-src="/download/attachments/27754907/Step15.jpg?version=1&amp;modificationDate=1391789195570&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="30212211" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Step15.jpg" data-base-url="https://eewiki.net" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="27754907" data-linked-resource-container-version="65"></span></li><li>Now let's setup the project options.&nbsp; Right-click on "Template_EFM32GG.ewp" in the workspace explorer and select 'Options'.<br><br><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/Step16.jpg" data-image-src="/download/attachments/27754907/Step16.jpg?version=1&amp;modificationDate=1391789200727&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="30212212" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Step16.jpg" data-base-url="https://eewiki.net" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="27754907" data-linked-resource-container-version="65"></span></li><li>In the 'General Options' category, under the 'Target' tab, make sure the 'Device' button is selected and click the 'list' icon on the right.&nbsp; Navigate to EnergyMicro and select your specific device.&nbsp; For this demo, I selected EFM32GG990F1024 which is loaded on the EFM32GG Starter Kit.<br><br><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/Step17.jpg" data-image-src="/download/attachments/27754907/Step17.jpg?version=1&amp;modificationDate=1391789204773&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="30212213" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Step17.jpg" data-base-url="https://eewiki.net" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="27754907" data-linked-resource-container-version="65"></span></li><li>In the 'C/C++ Compiler Settings' category, under the 'Preprocessor' tab, you can add include directories for your device.&nbsp; You will need to add the paths to the include files for the CMSIS library and the emlib library if you wish to use the emlib API (recommended).&nbsp; You will also need to link to the 'Include' folder for the specific device.&nbsp; Example projects found in Energy Micro app notes use relative paths from the project directory to link to these directories.&nbsp; You can use hard-coded paths if you know the location of these won't change.&nbsp; For my personal use, I hard code the paths directly in the Project Options (rather than using relative path).&nbsp; Silicon Labs recommends you use relative paths for portability.&nbsp; It's completely up to you, but you need to always be aware of where the files are located and how you are linking to them.&nbsp; <br><br>In the 'Defined symbols' box, you also need to define your device symbol.&nbsp; For my project, I've defined the symbol EFM32GG990F1024.&nbsp; Here's an example of hard-coding the path to the default install directory.<br><br><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/Step18.jpg" data-image-src="/download/attachments/27754907/Step18.jpg?version=1&amp;modificationDate=1391789209257&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="30212214" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Step18.jpg" data-base-url="https://eewiki.net" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="27754907" data-linked-resource-container-version="65"></span><br><br></li><li>In the 'Output Converter' category, check 'Generate additional output' and select 'binary' for output format.<br><br><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/Step19.jpg" data-image-src="/download/attachments/27754907/Step19.jpg?version=1&amp;modificationDate=1391789214350&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="30212215" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Step19.jpg" data-base-url="https://eewiki.net" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="27754907" data-linked-resource-container-version="65"></span></li><li>In the 'Linker' category, select 'Override default' and navigate to the .icf file for your device.&nbsp; The file should be located in the IAR install directory, not the Simplicity Studio install directory:&nbsp; <br>C:\Program Files (x86)\IAR Systems\Embedded Workbench 6.x\arm\config\linker\EnergyMicro.<br><br><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/Step20.jpg" data-image-src="/download/attachments/27754907/Step20.jpg?version=1&amp;modificationDate=1391789219600&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="30212216" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Step20.jpg" data-base-url="https://eewiki.net" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="27754907" data-linked-resource-container-version="65"></span></li><li>In the 'Debugger' category, under the 'Setup' tab, select 'J-Link/J-Trace' as the Driver since we are using the J-link debugger included on the EFM32GG Starter Kit.&nbsp; If you are using a different debugger, these settings may change.<br><br><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/Step21.jpg" data-image-src="/download/attachments/27754907/Step21.jpg?version=1&amp;modificationDate=1391789224460&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="30212217" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Step21.jpg" data-base-url="https://eewiki.net" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="27754907" data-linked-resource-container-version="65"></span></li><li>Still in the 'Debugger' category, under the 'Download' tab, check the 'Verify download' and 'Use flash loader(s)' boxes.<br><br><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/Step22.jpg" data-image-src="/download/attachments/27754907/Step22.jpg?version=1&amp;modificationDate=1391789229057&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="30212218" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Step22.jpg" data-base-url="https://eewiki.net" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="27754907" data-linked-resource-container-version="65"></span></li><li>In the 'J-Link' category, under the 'Connection' tab, select 'SWD' as the Interface.&nbsp; Click 'OK' to apply the project options.<br><br><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/Step23.jpg" data-image-src="/download/attachments/27754907/Step23.jpg?version=1&amp;modificationDate=1391789233460&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="30212219" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Step23.jpg" data-base-url="https://eewiki.net" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="27754907" data-linked-resource-container-version="65"></span></li><li>Select File -&gt; Save All.&nbsp; Save the workspace in the 'iar' folder within your project directory.<br><br><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/Step24.jpg" data-image-src="/download/attachments/27754907/Step24.jpg?version=1&amp;modificationDate=1391789237413&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="30212220" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Step24.jpg" data-base-url="https://eewiki.net" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="27754907" data-linked-resource-container-version="65"></span></li><li>Right click on the project and click 'Make' to build the project<br><br><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/Step25.jpg" data-image-src="/download/attachments/27754907/Step25.jpg?version=1&amp;modificationDate=1391789241477&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="30212221" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Step25.jpg" data-base-url="https://eewiki.net" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="27754907" data-linked-resource-container-version="65"></span></li><li>Now we have a template project with all of the necessary project settings.&nbsp; Whenever we wish to start a new EFM32 project for Giant Gecko, we can simply copy&amp;paste the template project in whatever location we desire because we used hard-coded include paths.&nbsp; Once you paste a copy of the template, simply rename the project folder to whatever you wish.&nbsp; Also, I would recommend renaming the workspace file to match the project name.&nbsp; All other files can keep "Template" in the file name and the project will still build properly.<br><br>&nbsp;&nbsp; <span class="confluence-embedded-file-wrapper image-left-wrapper"><img class="confluence-embedded-image image-left" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/Step26.jpg" data-image-src="/download/attachments/27754907/Step26.jpg?version=1&amp;modificationDate=1391789245820&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="30212222" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Step26.jpg" data-base-url="https://eewiki.net" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="27754907" data-linked-resource-container-version="65"></span> &nbsp; &nbsp; &nbsp;<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/Step27.jpg" data-image-src="/download/attachments/27754907/Step27.jpg?version=1&amp;modificationDate=1391789249963&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="30212223" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Step27.jpg" data-base-url="https://eewiki.net" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="27754907" data-linked-resource-container-version="65"></span></li></ol><p>&nbsp;</p><p>You are on your way!&nbsp; Now let's look at some code examples...</p><hr><p>&nbsp;</p></div></div><h2 id="GettingStartedwithEFM32GiantGeckoARMCortex-M3-CodeExamples">Code Examples</h2><p>The following examples were written using IAR embedded work bench with a 32KB size-limited free license.&nbsp; They are meant to help familiarize you with basic functionality of EFM32 Giant Gecko microcontrollers.&nbsp; For all of the following projects, I followed the procedure above for creating a new project (copy&amp;paste created template).&nbsp; The examples are presented in order of difficulty and some build on previous examples.&nbsp; If you are brand new to EFM32 microcontrollers, I would recommend starting from the beginning and going through each of the examples in order.&nbsp; If you already have some experience with EFM32 microcontrollers, feel free to jump to any example you wish.</p><p>&nbsp;</p><div id="expander-990807370" class="expand-container conf-macro output-block" data-hasbody="true" data-macro-name="expand"><div id="expander-control-990807370" class="expand-control"><span class="expand-control-icon icon">&nbsp;</span><span class="expand-control-text">GPIO Example</span></div><div id="expander-content-990807370" class="expand-content expand-hidden"><hr><p>This example demonstrates how to set pins as inputs with pull-up resistors enabled, as well as how to set and clear digital outputs.&nbsp; It also demonstrates how to adjust the drive strength of digital outputs.&nbsp; The EFM32GG allows the user to set the drive strength of a digital output with the following values:</p><ul><li>STANDARD&nbsp; -&nbsp; 6mA drive current</li><li>LOWEST&nbsp; -&nbsp; 0.5mA drive current</li><li>HIGH&nbsp; -&nbsp; 20mA drive current</li><li>LOW&nbsp; -&nbsp; 2mA drive current</li></ul><p>However, the EFM32GG Starter Kit uses 3 kOhm resistors which limits LED current to a max of about 1mA.&nbsp; Therefore, the HIGH and LOW drive settings show no effect.&nbsp; The LOWEST drive mode does enable the user to see visible change in LED intensity as a direct result of the drive mode setting.&nbsp; Therefore, LOWEST was used in the following example.</p><p>In the following example, LED0 is on by default with a standard drive strength of 6mA.&nbsp; LED1 is off by default.&nbsp; Pressing PB0 toggles LED1 and pressing PB1 toggles LED0.&nbsp; LED1 uses the lowest drive mode setting of 0.5mA.&nbsp; Even though the drive strength of LED0 is set to 6mA, the current limiting resistors reduce the current to approximately 1mA through LED0.&nbsp;</p><div id="expander-959349690" class="expand-container conf-macro output-block" data-hasbody="true" data-macro-name="expand"><div id="expander-control-959349690" class="expand-control"><span class="expand-control-icon icon">&nbsp;</span><span class="expand-control-text">GPIO Example Using Direct Register Access</span></div><div id="expander-content-959349690" class="expand-content expand-hidden"><p>The following code demonstrates how basic GPIO functionality using direct register access.&nbsp; For the following code to work, the 'em_system.c' file needs to be added to the workspace.</p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<div><div id="highlighter_824779" class="syntaxhighlighter sh-confluence nogutter  cpp"><div class="toolbar"><span><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="cpp preprocessor">#include "efm32gg990f1024.h"</code></div><div class="line number2 index1 alt1"><code class="cpp preprocessor">#include "em_chip.h"&nbsp;&nbsp;&nbsp; // required for CHIP_Init() function</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="cpp comments">// LEDs on EFM32GG Starter Kit are connected to PortE, pin2 (LED0) and PortE, pin3 (LED1)</code></div><div class="line number5 index4 alt2"><code class="cpp comments">// Push-buttons are connected to PortB, pin9 (Push-button 0) and PortB, pin10 (Push-button 1)</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="cpp keyword bold">enum</code> <code class="cpp plain">{</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">A,</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">B,</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">C,</code></div><div class="line number11 index10 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">D,</code></div><div class="line number12 index11 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">E</code></div><div class="line number13 index12 alt2"><code class="cpp plain">};</code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="cpp preprocessor">#define LED_PORT E</code></div><div class="line number16 index15 alt1"><code class="cpp preprocessor">#define BUTTON_PORT B</code></div><div class="line number17 index16 alt2"><code class="cpp preprocessor">#define LED0 2</code></div><div class="line number18 index17 alt1"><code class="cpp preprocessor">#define LED1 3</code></div><div class="line number19 index18 alt2"><code class="cpp preprocessor">#define PB0 9</code></div><div class="line number20 index19 alt1"><code class="cpp preprocessor">#define PB1 10</code></div><div class="line number21 index20 alt2">&nbsp;</div><div class="line number22 index21 alt1"><code class="cpp color1 bold">int</code> <code class="cpp plain">main() {</code></div><div class="line number23 index22 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CHIP_Init();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// This function addresses some chip errata and should be called at the start of every EFM32 application (need em_system.c)</code></div><div class="line number24 index23 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number25 index24 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU-&gt;HFPERCLKEN0 = (1 &lt;&lt; 13);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Enable GPIO clock</code></div><div class="line number26 index25 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number27 index26 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Configure LED0 pin as digital output (push-pull)</code></div><div class="line number28 index27 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Configure LED1 pin as digital output (push-pull) with drive-strength set by DRIVEMODE</code></div><div class="line number29 index28 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO-&gt;P[LED_PORT].MODEL = (5 &lt;&lt; 12) | (4 &lt;&lt; 8);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code></div><div class="line number30 index29 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number31 index30 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO-&gt;P[LED_PORT].CTRL = 1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Set DRIVEMODE to lowest setting (0.5 mA) for all LEDs configured with alternate drive strength</code></div><div class="line number32 index31 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO-&gt;P[BUTTON_PORT].MODEH = (2 &lt;&lt; 4) | (2 &lt;&lt; 8);&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Configure PB0 and PB1 as inputs</code></div><div class="line number33 index32 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO-&gt;P[BUTTON_PORT].DOUT = (1 &lt;&lt; PB1) | (1 &lt;&lt; PB0); </code><code class="cpp comments">// Enable Pull-ups on PB0 and PB1</code></div><div class="line number34 index33 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number35 index34 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(1) {</code></div><div class="line number36 index35 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(! (GPIO-&gt;P[BUTTON_PORT].DIN &amp; (1 &lt;&lt; PB0)) ) {&nbsp;&nbsp; </code><code class="cpp comments">// If PB0 is pressed</code></div><div class="line number37 index36 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">GPIO-&gt;P[LED_PORT].DOUTSET = 1 &lt;&lt; LED1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Turn on LED1</code></div><div class="line number38 index37 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code><code class="cpp keyword bold">else</code><code class="cpp plain">{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// If PB0 is released</code></div><div class="line number39 index38 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">GPIO-&gt;P[LED_PORT].DOUTCLR = 1 &lt;&lt; LED1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Turn off LED1</code></div><div class="line number40 index39 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number41 index40 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(! (GPIO-&gt;P[BUTTON_PORT].DIN &amp; (1 &lt;&lt; PB1)) ) {&nbsp;&nbsp; </code><code class="cpp comments">// If PB1 is pressed</code></div><div class="line number42 index41 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">GPIO-&gt;P[LED_PORT].DOUTCLR = 1 &lt;&lt; LED0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Turn off LED0</code></div><div class="line number43 index42 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code><code class="cpp keyword bold">else</code><code class="cpp plain">{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// If PB1 is released</code></div><div class="line number44 index43 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">GPIO-&gt;P[LED_PORT].DOUTSET = 1 &lt;&lt; LED0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Turn on LED0</code></div><div class="line number45 index44 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number46 index45 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number47 index46 alt2"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div></div></div><div id="expander-1516465116" class="expand-container conf-macro output-block" data-hasbody="true" data-macro-name="expand"><div id="expander-control-1516465116" class="expand-control"><span class="expand-control-icon icon">&nbsp;</span><span class="expand-control-text">GPIO Example Using emlib API</span></div><div id="expander-content-1516465116" class="expand-content expand-hidden"><p>The following code demonstrates how the emlib libraries can be used to implement the same GPIO example.&nbsp; For the following code to work, the following emlib source files must be added to the workspace:</p><ul><li>em_cmu.c</li><li>em_gpio.c</li><li>em_system.c</li></ul><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<div><div id="highlighter_594148" class="syntaxhighlighter sh-confluence nogutter  cpp"><div class="toolbar"><span><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="cpp preprocessor">#include "em_device.h"</code></div><div class="line number2 index1 alt1"><code class="cpp preprocessor">#include "em_cmu.h"</code></div><div class="line number3 index2 alt2"><code class="cpp preprocessor">#include "em_gpio.h"</code></div><div class="line number4 index3 alt1"><code class="cpp preprocessor">#include "em_system.h"</code></div><div class="line number5 index4 alt2"><code class="cpp preprocessor">#include "em_chip.h"&nbsp;&nbsp;&nbsp; // required for CHIP_Init() function</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="cpp preprocessor">#define LED_PORT gpioPortE</code></div><div class="line number8 index7 alt1"><code class="cpp preprocessor">#define BUTTON_PORT gpioPortB</code></div><div class="line number9 index8 alt2"><code class="cpp preprocessor">#define LED0 2</code></div><div class="line number10 index9 alt1"><code class="cpp preprocessor">#define LED1 3</code></div><div class="line number11 index10 alt2"><code class="cpp preprocessor">#define PB0 9</code></div><div class="line number12 index11 alt1"><code class="cpp preprocessor">#define PB1 10</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="cpp color1 bold">int</code> <code class="cpp plain">main() {</code></div><div class="line number15 index14 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CHIP_Init();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// This function addresses some chip errata and should be called at the start of every EFM32 application (need em_system.c)</code></div><div class="line number16 index15 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number17 index16 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU_ClockEnable(cmuClock_GPIO, </code><code class="cpp keyword bold">true</code><code class="cpp plain">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Enable GPIO peripheral clock</code></div><div class="line number18 index17 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number19 index18 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO_PinModeSet(LED_PORT, LED0, gpioModePushPull, 0);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Configure LED0 pin as digital output (push-pull)</code></div><div class="line number20 index19 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO_PinModeSet(LED_PORT, LED1, gpioModePushPullDrive, 1); </code><code class="cpp comments">// Configure LED1 pin as digital output (push-pull) with drive-strength to lowest setting</code></div><div class="line number21 index20 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO_DriveModeSet(LED_PORT, gpioDriveModeLowest);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Set DRIVEMODE to lowest setting (0.5 mA) for all LEDs configured with alternate drive strength</code></div><div class="line number22 index21 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO_PinModeSet(BUTTON_PORT, PB0, gpioModeInputPull, 1);&nbsp;&nbsp; </code><code class="cpp comments">// Configure PB0 as input with pull-up enabled</code></div><div class="line number23 index22 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO_PinModeSet(BUTTON_PORT, PB1, gpioModeInputPull, 1);&nbsp;&nbsp; </code><code class="cpp comments">// Configure PB1 as input with pull-up enabled</code></div><div class="line number24 index23 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number25 index24 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(1) {</code></div><div class="line number26 index25 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(! (GPIO_PinInGet(BUTTON_PORT, PB0)) ) {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// If PB0 is pressed</code></div><div class="line number27 index26 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">GPIO_PinOutSet(LED_PORT, LED1);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Turn on LED1</code></div><div class="line number28 index27 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code><code class="cpp keyword bold">else</code><code class="cpp plain">{</code></div><div class="line number29 index28 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">GPIO_PinOutClear(LED_PORT, LED1);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Turn off LED1</code></div><div class="line number30 index29 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number31 index30 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(! (GPIO_PinInGet(BUTTON_PORT, PB1)) ) {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// If PB1 is pressed</code></div><div class="line number32 index31 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">GPIO_PinOutClear(LED_PORT, LED0);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Turn off LED0</code></div><div class="line number33 index32 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code><code class="cpp keyword bold">else</code><code class="cpp plain">{</code></div><div class="line number34 index33 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">GPIO_PinOutSet(LED_PORT, LED0);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Turn on LED0</code></div><div class="line number35 index34 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number36 index35 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number37 index36 alt2"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div></div></div></div></div><div id="expander-348480190" class="expand-container conf-macro output-block" data-hasbody="true" data-macro-name="expand"><div id="expander-control-348480190" class="expand-control"><span class="expand-control-icon icon">&nbsp;</span><span class="expand-control-text">Timer with Interrupt</span></div><div id="expander-content-348480190" class="expand-content expand-hidden"><hr><p>The following code uses a timer with interrupt to blink an LED.&nbsp; It uses the default clock source which is the internal high speed RC oscillator.&nbsp; It sets the RC oscillator to 1MHz and uses a timer to interrupt every millisecond.&nbsp; After 500 ms, it toggles LED0.&nbsp;</p><div id="expander-1860969367" class="expand-container conf-macro output-block" data-hasbody="true" data-macro-name="expand"><div id="expander-control-1860969367" class="expand-control"><span class="expand-control-icon icon">&nbsp;</span><span class="expand-control-text">Timer with Interrupt Using Direct Register Access</span></div><div id="expander-content-1860969367" class="expand-content expand-hidden"><p>&nbsp;The following code demonstrates how a basic timer can be implemented using direct register access.&nbsp; For the following code to work, the 'em_system.c' file needs to be added to the workspace.</p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<div><div id="highlighter_41200" class="syntaxhighlighter sh-confluence nogutter  cpp"><div class="toolbar"><span><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="cpp preprocessor">#include "efm32gg990f1024.h"</code></div><div class="line number2 index1 alt1"><code class="cpp preprocessor">#include "em_chip.h" // required for CHIP_Init() function</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="cpp preprocessor">#define LED_PORT 4 // gpioPortE</code></div><div class="line number5 index4 alt2"><code class="cpp preprocessor">#define LED_PIN1 2</code></div><div class="line number6 index5 alt1"><code class="cpp preprocessor">#define LED_PIN2 3</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="cpp plain">uint16_t ms_counter = 0;</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="cpp keyword bold">void</code> <code class="cpp plain">TIMER0_IRQHandler(</code><code class="cpp keyword bold">void</code><code class="cpp plain">) { </code></div><div class="line number11 index10 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER0-&gt;IFC = 1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Clear overflow flag</code></div><div class="line number12 index11 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">ms_counter++;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Increment counter</code></div><div class="line number13 index12 alt2"><code class="cpp plain">}</code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="cpp color1 bold">int</code> <code class="cpp plain">main() {</code></div><div class="line number16 index15 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CHIP_Init();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// This function addresses some chip errata and should be called at the start of every EFM32 application (need em_system.c)</code></div><div class="line number17 index16 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number18 index17 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU-&gt;HFRCOCTRL = 0x8;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Set High Freq. RC Osc. to 1 MHz</code></div><div class="line number19 index18 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU-&gt;HFPERCLKEN0 = (1 &lt;&lt; 13) | (1 &lt;&lt; 5);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Enable GPIO and Timer0 peripheral clocks</code></div><div class="line number20 index19 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number21 index20 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO-&gt;P[LED_PORT].MODEL = 4 &lt;&lt; 8;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Configure LED pin as digital output (push-pull)</code></div><div class="line number22 index21 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number23 index22 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER0-&gt;TOP = 1000;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Set TOP value for Timer0</code></div><div class="line number24 index23 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER0-&gt;IEN = 1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Enable Timer0 overflow interrupt</code></div><div class="line number25 index24 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number26 index25 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">NVIC_EnableIRQ(TIMER0_IRQn);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Enable TIMER0 interrupt vector in NVIC</code></div><div class="line number27 index26 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number28 index27 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER0-&gt;CMD = 0x1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Start timer0</code></div><div class="line number29 index28 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number30 index29 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(1) {</code></div><div class="line number31 index30 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(ms_counter == 500) {</code></div><div class="line number32 index31 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">GPIO-&gt;P[LED_PORT].DOUTTGL = 1 &lt;&lt; LED_PIN1;</code><code class="cpp comments">// Toggle LED</code></div><div class="line number33 index32 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">ms_counter = 0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Reset counter</code></div><div class="line number34 index33 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number35 index34 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number36 index35 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div></div></div><div id="expander-538114441" class="expand-container conf-macro output-block" data-hasbody="true" data-macro-name="expand"><div id="expander-control-538114441" class="expand-control"><span class="expand-control-icon icon">&nbsp;</span><span class="expand-control-text">Timer with Interrupt Using emlib API</span></div><div id="expander-content-538114441" class="expand-content expand-hidden"><p>The following code demonstrates how the emlib libraries can be used to implement the same Timer with Interrupt example.&nbsp; For the following code to work, the following emlib source files must be added to the workspace:</p><ul><li>em_cmu.c</li><li>em_gpio.c</li><li>em_timer.c</li><li>em_system.c</li></ul><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<div><div id="highlighter_761907" class="syntaxhighlighter sh-confluence nogutter  cpp"><div class="toolbar"><span><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="cpp preprocessor">#include "em_device.h"</code></div><div class="line number2 index1 alt1"><code class="cpp preprocessor">#include "em_cmu.h"</code></div><div class="line number3 index2 alt2"><code class="cpp preprocessor">#include "em_gpio.h"</code></div><div class="line number4 index3 alt1"><code class="cpp preprocessor">#include "em_system.h"</code></div><div class="line number5 index4 alt2"><code class="cpp preprocessor">#include "em_timer.h"</code></div><div class="line number6 index5 alt1"><code class="cpp preprocessor">#include "em_chip.h"</code></div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number8 index7 alt1"><code class="cpp preprocessor">#define LED_PORT gpioPortE</code></div><div class="line number9 index8 alt2"><code class="cpp preprocessor">#define LED_PIN&nbsp; 2</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number11 index10 alt2"><code class="cpp plain">uint16_t ms_counter = 0;</code></div><div class="line number12 index11 alt1"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number13 index12 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">TIMER0_IRQHandler(</code><code class="cpp keyword bold">void</code><code class="cpp plain">)</code></div><div class="line number14 index13 alt1"><code class="cpp plain">{</code></div><div class="line number15 index14 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER_IntClear(TIMER0, TIMER_IF_OF);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Clear overflow flag</code></div><div class="line number16 index15 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">ms_counter++;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Increment counter</code></div><div class="line number17 index16 alt2"><code class="cpp plain">}</code></div><div class="line number18 index17 alt1"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number19 index18 alt2"><code class="cpp color1 bold">int</code> <code class="cpp plain">main() {</code></div><div class="line number20 index19 alt1"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number21 index20 alt2"><code class="cpp spaces">&nbsp;</code><code class="cpp plain">CHIP_Init();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// This function addresses some chip errata and should be called at the start of every EFM32 application (need em_system.c)</code></div><div class="line number22 index21 alt1"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number23 index22 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU_HFRCOBandSet(cmuHFRCOBand_1MHz);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Set High Freq. RC Osc. to 1 MHz</code></div><div class="line number24 index23 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU_ClockEnable(cmuClock_GPIO, </code><code class="cpp keyword bold">true</code><code class="cpp plain">);&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Enable GPIO peripheral clock</code></div><div class="line number25 index24 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU_ClockEnable(cmuClock_TIMER0, </code><code class="cpp keyword bold">true</code><code class="cpp plain">);&nbsp;&nbsp; </code><code class="cpp comments">// Enable TIMER0 peripheral clock</code></div><div class="line number26 index25 alt1"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number27 index26 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO_PinModeSet(LED_PORT, LED_PIN, gpioModePushPullDrive, 0); </code><code class="cpp comments">// Configure LED0 pin as digital output (push-pull)</code></div><div class="line number28 index27 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number29 index28 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER_TopSet(TIMER0, 1000);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Set timer TOP value</code></div><div class="line number30 index29 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER_Init_TypeDef timerInit =&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Setup Timer initialization</code></div><div class="line number31 index30 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number32 index31 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.enable&nbsp;&nbsp;&nbsp;&nbsp; = </code><code class="cpp keyword bold">true</code><code class="cpp plain">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Start timer upon configuration</code></div><div class="line number33 index32 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.debugRun&nbsp;&nbsp; = </code><code class="cpp keyword bold">true</code><code class="cpp plain">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Keep timer running even on debug halt</code></div><div class="line number34 index33 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.prescale&nbsp;&nbsp; = timerPrescale1,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Use /1 prescaler...timer clock = HF clock = 1 MHz</code></div><div class="line number35 index34 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.clkSel&nbsp;&nbsp;&nbsp;&nbsp; = timerClkSelHFPerClk,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Set HF peripheral clock as clock source</code></div><div class="line number36 index35 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.fallAction = timerInputActionNone,&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// No action on falling edge</code></div><div class="line number37 index36 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.riseAction = timerInputActionNone,&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// No action on rising edge</code></div><div class="line number38 index37 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.mode&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = timerModeUp,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Use up-count mode</code></div><div class="line number39 index38 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.dmaClrAct&nbsp; = </code><code class="cpp keyword bold">false</code><code class="cpp plain">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Not using DMA</code></div><div class="line number40 index39 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.quadModeX4 = </code><code class="cpp keyword bold">false</code><code class="cpp plain">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Not using quad decoder</code></div><div class="line number41 index40 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.oneShot&nbsp;&nbsp;&nbsp; = </code><code class="cpp keyword bold">false</code><code class="cpp plain">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Using continuous, not one-shot</code></div><div class="line number42 index41 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.sync&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = </code><code class="cpp keyword bold">false</code><code class="cpp plain">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Not synchronizing timer operation off of other timers </code></div><div class="line number43 index42 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">};</code></div><div class="line number44 index43 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER_IntEnable(TIMER0, TIMER_IF_OF);&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Enable Timer0 overflow interrupt</code></div><div class="line number45 index44 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">NVIC_EnableIRQ(TIMER0_IRQn);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Enable TIMER0 interrupt vector in NVIC</code></div><div class="line number46 index45 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER_Init(TIMER0, &amp;timerInit);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Configure and start Timer0</code></div><div class="line number47 index46 alt2"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number48 index47 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(1)</code></div><div class="line number49 index48 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number50 index49 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(ms_counter == 500) {</code></div><div class="line number51 index50 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">GPIO_PinOutToggle(LED_PORT, LED_PIN); </code><code class="cpp comments">// Toggle LED</code></div><div class="line number52 index51 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">ms_counter = 0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Reset counter</code></div><div class="line number53 index52 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number54 index53 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number55 index54 alt2"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div></div></div></div></div><div id="expander-589869902" class="expand-container conf-macro output-block" data-hasbody="true" data-macro-name="expand"><div id="expander-control-589869902" class="expand-control"><span class="expand-control-icon icon">&nbsp;</span><span class="expand-control-text">Using the HF XTAL Oscillator</span></div><div id="expander-content-589869902" class="expand-content expand-hidden"><hr><p>The following example is similar to the Timer with Interrupt example shown above.&nbsp; However, this example uses the on-board 48MHz crystal as the High Frequency Clock source.&nbsp; The code uses the HF clock divider to set the HF clock rate to 24MHz.&nbsp; The High Frequency Peripheral clock and the High Frequency Core clock prescalers were left at /1.&nbsp; Therefore, the Timer, GPIO peripherals along with the Core clocks all run at 24MHz in this example.&nbsp; The TOP value of the counter was set to 24000 so that the overflow interrupt occurs every millisecond.&nbsp; Every 500 ms, LED0 toggles.</p><div id="expander-2140692379" class="expand-container conf-macro output-block" data-hasbody="true" data-macro-name="expand"><div id="expander-control-2140692379" class="expand-control"><span class="expand-control-icon icon">&nbsp;</span><span class="expand-control-text">HF XTAL Example Using Direct Register Access</span></div><div id="expander-content-2140692379" class="expand-content expand-hidden"><p>The following code block shows exactly which registers to write to in order to properly configure and use the HF XTAL oscillator.&nbsp; For the following code to work, the 'em_system.c' file needs to be added to the workspace.</p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<div><div id="highlighter_138379" class="syntaxhighlighter sh-confluence nogutter  cpp"><div class="toolbar"><span><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="cpp preprocessor">#include "efm32gg990f1024.h"</code></div><div class="line number2 index1 alt1"><code class="cpp preprocessor">#include "em_chip.h"&nbsp;&nbsp;&nbsp; // required for CHIP_Init() function</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="cpp preprocessor">#define LED_PORT 4 // gpioPortE</code></div><div class="line number5 index4 alt2"><code class="cpp preprocessor">#define LED_PIN1 2</code></div><div class="line number6 index5 alt1"><code class="cpp preprocessor">#define LED_PIN2 3</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="cpp plain">uint16_t ms_counter = 0;</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="cpp keyword bold">void</code> <code class="cpp plain">TIMER0_IRQHandler(</code><code class="cpp keyword bold">void</code><code class="cpp plain">) { </code></div><div class="line number11 index10 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER0-&gt;IFC = 1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Clear overflow flag</code></div><div class="line number12 index11 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">ms_counter++;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Increment counter</code></div><div class="line number13 index12 alt2"><code class="cpp plain">}</code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="cpp color1 bold">int</code> <code class="cpp plain">main() {</code></div><div class="line number16 index15 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CHIP_Init();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// This function addresses some chip errata and should be called at the start of every EFM32 application (need em_system.c)</code></div><div class="line number17 index16 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number18 index17 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU-&gt;CTRL |= (1 &lt;&lt; 14);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Set HF clock divider to /2 to keep core frequency &lt;32MHz</code></div><div class="line number19 index18 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU-&gt;OSCENCMD |= 0x4;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Enable XTAL Oscillator</code></div><div class="line number20 index19 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(! (CMU-&gt;STATUS &amp; 0x8) );&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Wait for XTAL osc to stabilize</code></div><div class="line number21 index20 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU-&gt;CMD = 0x2;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Select HF XTAL osc as system clock source. 48MHz XTAL, but we divided the system clock by 2, therefore our HF clock should be 24MHz</code></div><div class="line number22 index21 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number23 index22 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU-&gt;HFPERCLKEN0 = (1 &lt;&lt; 13) | (1 &lt;&lt; 5);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Enable GPIO and Timer0 peripheral clocks</code></div><div class="line number24 index23 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number25 index24 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO-&gt;P[LED_PORT].MODEL = 4 &lt;&lt; 8;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Configure LED pin as digital output (push-pull)</code></div><div class="line number26 index25 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number27 index26 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER0-&gt;TOP = 24000;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Set TOP value for Timer0</code></div><div class="line number28 index27 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER0-&gt;IEN = 1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Enable Timer0 overflow interrupt</code></div><div class="line number29 index28 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number30 index29 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">NVIC_EnableIRQ(TIMER0_IRQn);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Enable TIMER0 interrupt vector in NVIC</code></div><div class="line number31 index30 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number32 index31 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER0-&gt;CMD = 0x1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Start timer0</code></div><div class="line number33 index32 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number34 index33 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(1) {</code></div><div class="line number35 index34 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(ms_counter == 500) {</code></div><div class="line number36 index35 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">GPIO-&gt;P[LED_PORT].DOUTTGL = 1 &lt;&lt; LED_PIN1;</code><code class="cpp comments">// Toggle LED</code></div><div class="line number37 index36 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">ms_counter = 0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Reset counter</code></div><div class="line number38 index37 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number39 index38 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number40 index39 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div></div></div><div id="expander-510239754" class="expand-container conf-macro output-block" data-hasbody="true" data-macro-name="expand"><div id="expander-control-510239754" class="expand-control"><span class="expand-control-icon icon">&nbsp;</span><span class="expand-control-text">HF XTAL Example Using emlib API</span></div><div id="expander-content-510239754" class="expand-content expand-hidden"><p>&nbsp;The following code block achieves the exact same functionality as the above example using emlib functions.&nbsp; The following files need to be added to the workspace for the code to work:</p><ul><li>em_cmu.c</li><li>em_emu.c</li><li>em_gpio.c</li><li>em_timer.c</li><li>em_system.c</li></ul><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<div><div id="highlighter_332223" class="syntaxhighlighter sh-confluence nogutter  cpp"><div class="toolbar"><span><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="cpp preprocessor">#include "em_device.h"</code></div><div class="line number2 index1 alt1"><code class="cpp preprocessor">#include "em_cmu.h"</code></div><div class="line number3 index2 alt2"><code class="cpp preprocessor">#include "em_gpio.h"</code></div><div class="line number4 index3 alt1"><code class="cpp preprocessor">#include "em_timer.h"</code></div><div class="line number5 index4 alt2"><code class="cpp preprocessor">#include "em_system.h"</code></div><div class="line number6 index5 alt1"><code class="cpp preprocessor">#include "em_chip.h"&nbsp; // required for CHIP_Init() function</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="cpp preprocessor">#define LED_PORT gpioPortE</code></div><div class="line number9 index8 alt2"><code class="cpp preprocessor">#define LED_PIN 2</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="cpp plain">uint16_t ms_counter = 0;</code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">TIMER0_IRQHandler(</code><code class="cpp keyword bold">void</code><code class="cpp plain">)</code></div><div class="line number14 index13 alt1"><code class="cpp plain">{ </code></div><div class="line number15 index14 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER_IntClear(TIMER0, TIMER_IF_OF);&nbsp; </code><code class="cpp comments">// Clear overflow flag</code></div><div class="line number16 index15 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">ms_counter++;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Increment counter</code></div><div class="line number17 index16 alt2"><code class="cpp plain">}</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="cpp color1 bold">int</code> <code class="cpp plain">main() {</code></div><div class="line number20 index19 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CHIP_Init(); </code><code class="cpp comments">// This function addresses some chip errata and should be called at the start of every EFM32 application (need em_system.c)</code></div><div class="line number21 index20 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number22 index21 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU_ClockDivSet(cmuClock_HF, cmuClkDiv_2);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Set HF clock divider to /2 to keep core frequency &lt;32MHz</code></div><div class="line number23 index22 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU_OscillatorEnable(cmuOsc_HFXO, </code><code class="cpp keyword bold">true</code><code class="cpp plain">, </code><code class="cpp keyword bold">true</code><code class="cpp plain">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Enable XTAL Osc and wait to stabilize</code></div><div class="line number24 index23 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU_ClockSelectSet(cmuClock_HF, cmuSelect_HFXO);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Select HF XTAL osc as system clock source. 48MHz XTAL, but we divided the system clock by 2, therefore our HF clock will be 24MHz</code></div><div class="line number25 index24 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number26 index25 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU_ClockEnable(cmuClock_GPIO, </code><code class="cpp keyword bold">true</code><code class="cpp plain">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Enable GPIO peripheral clock</code></div><div class="line number27 index26 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU_ClockEnable(cmuClock_TIMER0, </code><code class="cpp keyword bold">true</code><code class="cpp plain">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Enable TIMER0 peripheral clock</code></div><div class="line number28 index27 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number29 index28 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO_PinModeSet(LED_PORT, LED_PIN, gpioModePushPull, 0); </code><code class="cpp comments">// Configure LED0 pin as digital output (push-pull)</code></div><div class="line number30 index29 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO_PinOutClear(LED_PORT, LED_PIN);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Turn off LED0</code></div><div class="line number31 index30 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number32 index31 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER_TopSet(TIMER0, 24000);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Set timer TOP value </code></div><div class="line number33 index32 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER_Init_TypeDef timerInit =&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Setup Timer initialization</code></div><div class="line number34 index33 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number35 index34 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.enable&nbsp;&nbsp;&nbsp;&nbsp; = </code><code class="cpp keyword bold">true</code><code class="cpp plain">, </code></div><div class="line number36 index35 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.debugRun&nbsp;&nbsp; = </code><code class="cpp keyword bold">true</code><code class="cpp plain">, </code></div><div class="line number37 index36 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.prescale&nbsp;&nbsp; = timerPrescale1, </code></div><div class="line number38 index37 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.clkSel&nbsp;&nbsp;&nbsp;&nbsp; = timerClkSelHFPerClk, </code></div><div class="line number39 index38 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.fallAction = timerInputActionNone, </code></div><div class="line number40 index39 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.riseAction = timerInputActionNone, </code></div><div class="line number41 index40 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.mode&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = timerModeUp, </code></div><div class="line number42 index41 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.dmaClrAct&nbsp; = </code><code class="cpp keyword bold">false</code><code class="cpp plain">,</code></div><div class="line number43 index42 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.quadModeX4 = </code><code class="cpp keyword bold">false</code><code class="cpp plain">, </code></div><div class="line number44 index43 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.oneShot&nbsp;&nbsp;&nbsp; = </code><code class="cpp keyword bold">false</code><code class="cpp plain">, </code></div><div class="line number45 index44 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.sync&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = </code><code class="cpp keyword bold">false</code><code class="cpp plain">, </code></div><div class="line number46 index45 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">};</code></div><div class="line number47 index46 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER_IntEnable(TIMER0, TIMER_IF_OF);&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Enable Timer0 overflow interrupt</code></div><div class="line number48 index47 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">NVIC_EnableIRQ(TIMER0_IRQn);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Enable TIMER0 interrupt vector in NVIC</code></div><div class="line number49 index48 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER_Init(TIMER0, &amp;timerInit);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Configure and start Timer0</code></div><div class="line number50 index49 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number51 index50 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(1) {</code></div><div class="line number52 index51 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(ms_counter == 500) {</code></div><div class="line number53 index52 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">GPIO_PinOutToggle(LED_PORT, LED_PIN); </code><code class="cpp comments">// Toggle LED</code></div><div class="line number54 index53 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">ms_counter = 0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Reset counter</code></div><div class="line number55 index54 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number56 index55 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number57 index56 alt2"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>&nbsp;</p><hr><p>&nbsp;</p><p>&nbsp;</p></div></div></div></div><div id="expander-44438720" class="expand-container conf-macro output-block" data-hasbody="true" data-macro-name="expand"><div id="expander-control-44438720" class="expand-control"><span class="expand-control-icon icon">&nbsp;</span><span class="expand-control-text">PWM Example</span></div><div id="expander-content-44438720" class="expand-content expand-hidden"><hr><p>This example demonstrates how to setup PWM output on the EFM32 Giant Gecko.&nbsp; It uses Capture/Compare Channel 2 of Timer3 which is available on PortE, Pin2 of the microcontroller.&nbsp; You may remember from the "GPIO Example" above, PE2 is connected externally to LED0 on the EFM32 Giant Gecko Starter Kit.&nbsp; Therefore, we can use PWM output to control the intensity of LED0.&nbsp;</p><p>This example uses 2 different timers.&nbsp; Timer3 was used as the PWM generator.&nbsp; The PWM period was set to 1ms (frequency of 1kHz) and the duty cycle was adjusted by updating the output compare register at a defined UPDATE_PERIOD.&nbsp; The second timer&nbsp;– Timer0 – was used to generate the update period of 250ms.&nbsp; This example uses Timer0 with its overflow interrupt just like in the "Timer with Interrupt" example above.</p><p>Whenever the Update Period is reached the intensity of LED0 is updated with the new compare value and LED1 toggles.</p><p>The system clock for this example was the High Frequency RC Oscillator, set to 1MHz.&nbsp; The High Frequency Peripheral clock was used as the source for Timer0 and Timer3 with a prescaler of /1 for each timer.&nbsp; Therefore, Timer0, Timer3, and the System Clock all share the same frequency.&nbsp; The TOP value of each timer was set to 1000, so the overflow interrupt period for Timer0 and the PWM period for Timer3 were both 1ms (1kHz freq).</p><div id="expander-1986678495" class="expand-container conf-macro output-block" data-hasbody="true" data-macro-name="expand"><div id="expander-control-1986678495" class="expand-control"><span class="expand-control-icon icon">&nbsp;</span><span class="expand-control-text">PWM Example Using Direct Register Access</span></div><div id="expander-content-1986678495" class="expand-content expand-hidden"><p>The following code block demonstrates how to achieve LED intensity control using PWM output functionality of Timer3 with direct register access.&nbsp; For the following code to work, the 'em_system.c' file needs to be added to the workspace.</p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<div><div id="highlighter_111490" class="syntaxhighlighter sh-confluence nogutter  cpp"><div class="toolbar"><span><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="cpp preprocessor">#include "efm32gg990f1024.h"</code></div><div class="line number2 index1 alt1"><code class="cpp preprocessor">#include "em_chip.h"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // required for CHIP_Init() function</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="cpp preprocessor">#define LED_PORT 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // gpioPortE</code></div><div class="line number5 index4 alt2"><code class="cpp preprocessor">#define LED_PIN0 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // LED0 is connected to PortE pin2</code></div><div class="line number6 index5 alt1"><code class="cpp preprocessor">#define LED_PIN1 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // LED1 is connected to PortE pin3</code></div><div class="line number7 index6 alt2"><code class="cpp preprocessor">#define TOP_VAL_PWM 1000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // sets PWM frequency to 1kHz (1MHz timer clock)</code></div><div class="line number8 index7 alt1"><code class="cpp preprocessor">#define TOP_VAL_GP_TIMER 1000&nbsp;&nbsp; // sets general purpose timer overflow frequency to 1kHz (1MHz timer clock)</code></div><div class="line number9 index8 alt2"><code class="cpp preprocessor">#define UPDATE_PERIOD 250&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // update compare value and toggle LED1 every 250ms</code></div><div class="line number10 index9 alt1"><code class="cpp preprocessor">#define INC_VAL (TOP_VAL_PWM/4) // adjust compare value amount</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="cpp plain">uint16_t ms_counter = 0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// global variable to count general purpose timer overflow events</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="cpp comments">// TIMER ISR, executes every ms</code></div><div class="line number15 index14 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">TIMER0_IRQHandler(</code><code class="cpp keyword bold">void</code><code class="cpp plain">) {</code></div><div class="line number16 index15 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER0-&gt;IFC = 1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Clear source of interrupt</code></div><div class="line number17 index16 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">ms_counter++;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Increment Counter</code></div><div class="line number18 index17 alt1"><code class="cpp plain">}</code></div><div class="line number19 index18 alt2">&nbsp;</div><div class="line number20 index19 alt1"><code class="cpp color1 bold">int</code> <code class="cpp plain">main() {</code></div><div class="line number21 index20 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number22 index21 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint16_t compare_val = 0; </code><code class="cpp comments">// Initial PWM duty cycle is 0% (LED0 off)</code></div><div class="line number23 index22 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint8_t inc = 1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Increment = true</code></div><div class="line number24 index23 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number25 index24 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CHIP_Init();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// This function addresses some chip errata and should be called at the start of every EFM32 application (need em_system.c)</code></div><div class="line number26 index25 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number27 index26 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU-&gt;HFRCOCTRL = 0x8;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Set High Freq. RC Osc. to 1 MHz and use as system source</code></div><div class="line number28 index27 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU-&gt;HFPERCLKEN0 = (1 &lt;&lt; 13) | (1 &lt;&lt; 8) | (1 &lt;&lt; 5); </code><code class="cpp comments">// Enable GPIO, Timer0, and Timer3 peripheral clocks</code></div><div class="line number29 index28 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO-&gt;P[LED_PORT].MODEL = (4 &lt;&lt; 12) | (4 &lt;&lt; 8);&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Configure LED0 and LED1 pins as digital outputs (push-pull)</code></div><div class="line number30 index29 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO-&gt;P[LED_PORT].DOUTSET = (1 &lt;&lt; LED_PIN1);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Turn on LED1 (PE3)</code></div><div class="line number31 index30 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number32 index31 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER0-&gt;TOP = TOP_VAL_GP_TIMER;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// GP Timer period will be 1ms = 1kHz freq</code></div><div class="line number33 index32 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER3-&gt;TOP = TOP_VAL_PWM;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// PWM period will be 1ms = 1kHz freq</code></div><div class="line number34 index33 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number35 index34 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER0-&gt;CNT = 0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Start counter at 0 (up-count mode)</code></div><div class="line number36 index35 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER3-&gt;CNT = 0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Start counter at 0 (up-count mode)</code></div><div class="line number37 index36 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number38 index37 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER3-&gt;CC[2].CCV = compare_val;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Set CC2 compare value (0% duty)</code></div><div class="line number39 index38 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER3-&gt;CC[2].CCVB = compare_val;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Set CC2 compare buffer value (0% duty)</code></div><div class="line number40 index39 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number41 index40 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER0-&gt;IEN = 1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Enable Timer0 overflow interrupt</code></div><div class="line number42 index41 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">NVIC_EnableIRQ(TIMER0_IRQn);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Enable TIMER0 interrupt vector in NVIC</code></div><div class="line number43 index42 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number44 index43 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER3-&gt;CC[2].CTRL = 0x3;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Put Timer3 CC channel 2 in PWM mode</code></div><div class="line number45 index44 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER3-&gt;ROUTE = (1 &lt;&lt; 16) | (1 &lt;&lt; 2);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Connect PWM output (timer3, channel 2) to PE2 (LED0). See EFM32GG990 datasheet for details.</code></div><div class="line number46 index45 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number47 index46 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER0-&gt;CTRL = (1 &lt;&lt; 6);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Allow timer to run while in debug mode</code></div><div class="line number48 index47 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER3-&gt;CTRL = (1 &lt;&lt; 6);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Allow timer to run while in debug mode</code></div><div class="line number49 index48 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number50 index49 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER0-&gt;CMD = 0x1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Start Timer0</code></div><div class="line number51 index50 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER3-&gt;CMD = 0x1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Start Timer3</code></div><div class="line number52 index51 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number53 index52 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(1) {</code></div><div class="line number54 index53 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(ms_counter == UPDATE_PERIOD) {</code></div><div class="line number55 index54 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(inc) {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// If increment = true</code></div><div class="line number56 index55 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">compare_val += INC_VAL;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Increase the compare value</code></div><div class="line number57 index56 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code><code class="cpp keyword bold">else</code><code class="cpp plain">{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// If increment = false</code></div><div class="line number58 index57 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">compare_val -= INC_VAL;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Decrease the compare value</code></div><div class="line number59 index58 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number60 index59 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">TIMER3-&gt;CC[2].CCVB = compare_val;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Write new value to compare buffer</code></div><div class="line number61 index60 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">GPIO-&gt;P[LED_PORT].DOUTTGL = (1 &lt;&lt; LED_PIN1); </code><code class="cpp comments">// Toggle LED1</code></div><div class="line number62 index61 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">ms_counter = 0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Reset counter</code></div><div class="line number63 index62 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number64 index63 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(compare_val &gt; (TOP_VAL_PWM-1)) { inc = 0; } </code><code class="cpp comments">// If compare value is at max, start decrementing</code></div><div class="line number65 index64 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(compare_val &lt; 1) { inc = 1; }&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// If compare value is at min, start incrementing</code></div><div class="line number66 index65 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number67 index66 alt2"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div></div></div><div id="expander-1751235283" class="expand-container conf-macro output-block" data-hasbody="true" data-macro-name="expand"><div id="expander-control-1751235283" class="expand-control"><span class="expand-control-icon icon">&nbsp;</span><span class="expand-control-text">PWM Example Using emlib API</span></div><div id="expander-content-1751235283" class="expand-content expand-hidden"><p>The following code block demonstrates LED0 intensity control using PWM output capability of Timer3 (channel 2).&nbsp; The following files need to be added to the workspace for the code to work:</p><ul><li>em_cmu.c</li><li>em_gpio.c</li><li>em_timer.c</li><li>em_system.c</li></ul><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<div><div id="highlighter_954862" class="syntaxhighlighter sh-confluence nogutter  cpp"><div class="toolbar"><span><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="cpp preprocessor">#include "em_device.h"</code></div><div class="line number2 index1 alt1"><code class="cpp preprocessor">#include "em_cmu.h"</code></div><div class="line number3 index2 alt2"><code class="cpp preprocessor">#include "em_chip.h"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // required for CHIP_Init() function</code></div><div class="line number4 index3 alt1"><code class="cpp preprocessor">#include "em_gpio.h"</code></div><div class="line number5 index4 alt2"><code class="cpp preprocessor">#include "em_timer.h"</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="cpp preprocessor">#define TOP_VAL_PWM 1000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // sets PWM frequency to 1kHz (1MHz timer clock)</code></div><div class="line number8 index7 alt1"><code class="cpp preprocessor">#define TOP_VAL_GP_TIMER 1000&nbsp;&nbsp; // sets general purpose timer overflow frequency to 1kHz (1MHz timer clock)</code></div><div class="line number9 index8 alt2"><code class="cpp preprocessor">#define UPDATE_PERIOD 250&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // update compare value, toggle LED1 every 1/4 second (250ms)</code></div><div class="line number10 index9 alt1"><code class="cpp preprocessor">#define INC_VAL (TOP_VAL_PWM/4) // adjust compare value amount</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="cpp plain">uint16_t ms_counter = 0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// global variable to count general purpose timer overflow events</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="cpp comments">// TIMER ISR executes every ms</code></div><div class="line number15 index14 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">TIMER0_IRQHandler(</code><code class="cpp keyword bold">void</code><code class="cpp plain">) {</code></div><div class="line number16 index15 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER_IntClear(TIMER0, TIMER_IF_OF); </code><code class="cpp comments">// Clear interrupt source</code></div><div class="line number17 index16 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">ms_counter++;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Increment counter</code></div><div class="line number18 index17 alt1"><code class="cpp plain">}</code></div><div class="line number19 index18 alt2">&nbsp;</div><div class="line number20 index19 alt1"><code class="cpp color1 bold">int</code> <code class="cpp plain">main() {</code></div><div class="line number21 index20 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number22 index21 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint32_t compare_val = 0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Initial PWM duty cycle is 0% (LED0 off)</code></div><div class="line number23 index22 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint8_t inc = 1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Increment = true</code></div><div class="line number24 index23 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number25 index24 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CHIP_Init();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// This function addresses some chip errata and should be called at the start of every EFM32 application (need em_system.c)</code></div><div class="line number26 index25 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU_HFRCOBandSet(cmuHFRCOBand_1MHz);&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Set HF oscillator to 1MHz and use as system source</code></div><div class="line number27 index26 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU_ClockEnable(cmuClock_GPIO, </code><code class="cpp keyword bold">true</code><code class="cpp plain">);&nbsp;&nbsp; </code><code class="cpp comments">// Start GPIO peripheral clock</code></div><div class="line number28 index27 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU_ClockEnable(cmuClock_TIMER0, </code><code class="cpp keyword bold">true</code><code class="cpp plain">); </code><code class="cpp comments">// Start TIMER0 peripheral clock </code></div><div class="line number29 index28 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU_ClockEnable(cmuClock_TIMER3, </code><code class="cpp keyword bold">true</code><code class="cpp plain">); </code><code class="cpp comments">// Start TIMER3 peripheral clock</code></div><div class="line number30 index29 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number31 index30 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO_PinModeSet(gpioPortE, 2, gpioModePushPull, 0); </code><code class="cpp comments">// set LED0 pin as push-pull output</code></div><div class="line number32 index31 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO_PinModeSet(gpioPortE, 3, gpioModePushPull, 1); </code><code class="cpp comments">// set LED0 pin as push-pull output</code></div><div class="line number33 index32 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number34 index33 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Setup Timer Channel Configuration for PWM</code></div><div class="line number35 index34 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER_InitCC_TypeDef timerCCInit = {</code></div><div class="line number36 index35 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.eventCtrl&nbsp; = timerEventEveryEdge,&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// This value will be ignored since we aren't using input capture</code></div><div class="line number37 index36 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.edge&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = timerEdgeNone,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// This value will be ignored since we aren't using input capture</code></div><div class="line number38 index37 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.prsSel&nbsp;&nbsp;&nbsp;&nbsp; = timerPRSSELCh0,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// This value will be ignored since we aren't using PRS</code></div><div class="line number39 index38 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.cufoa&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = timerOutputActionNone,&nbsp; </code><code class="cpp comments">// No action on underflow (up-count mode)</code></div><div class="line number40 index39 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.cofoa&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = timerOutputActionSet,&nbsp;&nbsp; </code><code class="cpp comments">// On overflow, we want the output to go high, but in PWM mode this should happen automatically</code></div><div class="line number41 index40 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.cmoa&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = timerOutputActionClear, </code><code class="cpp comments">// On compare match, we want output to clear, but in PWM mode this should happen automatically</code></div><div class="line number42 index41 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.mode&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = timerCCModePWM,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Set timer channel to run in PWM mode</code></div><div class="line number43 index42 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.filter&nbsp;&nbsp;&nbsp;&nbsp; = </code><code class="cpp keyword bold">false</code><code class="cpp plain">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Not using input, so don't need a filter</code></div><div class="line number44 index43 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.prsInput&nbsp;&nbsp; = </code><code class="cpp keyword bold">false</code><code class="cpp plain">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Not using PRS</code></div><div class="line number45 index44 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.coist&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = </code><code class="cpp keyword bold">false</code><code class="cpp plain">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Initial state for PWM is high when timer is enabled</code></div><div class="line number46 index45 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.outInvert&nbsp; = </code><code class="cpp keyword bold">false</code><code class="cpp plain">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// non-inverted output</code></div><div class="line number47 index46 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">};</code></div><div class="line number48 index47 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number49 index48 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Setup Timer Configuration for PWM</code></div><div class="line number50 index49 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER_Init_TypeDef timerPWMInit =</code></div><div class="line number51 index50 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number52 index51 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.enable&nbsp;&nbsp;&nbsp;&nbsp; = </code><code class="cpp keyword bold">true</code><code class="cpp plain">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// start timer upon configuration</code></div><div class="line number53 index52 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.debugRun&nbsp;&nbsp; = </code><code class="cpp keyword bold">true</code><code class="cpp plain">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// run timer in debug mode</code></div><div class="line number54 index53 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.prescale&nbsp;&nbsp; = timerPrescale1,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// set prescaler to /1</code></div><div class="line number55 index54 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.clkSel&nbsp;&nbsp;&nbsp;&nbsp; = timerClkSelHFPerClk,&nbsp; </code><code class="cpp comments">// set clock source as HFPERCLK</code></div><div class="line number56 index55 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.fallAction = timerInputActionNone, </code><code class="cpp comments">// no action from inputs</code></div><div class="line number57 index56 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.riseAction = timerInputActionNone, </code><code class="cpp comments">// no action from inputs</code></div><div class="line number58 index57 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.mode&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = timerModeUp,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// use up-count mode</code></div><div class="line number59 index58 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.dmaClrAct&nbsp; = </code><code class="cpp keyword bold">false</code><code class="cpp plain">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// not using DMA</code></div><div class="line number60 index59 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.quadModeX4 = </code><code class="cpp keyword bold">false</code><code class="cpp plain">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// not using Quad Dec. mode</code></div><div class="line number61 index60 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.oneShot&nbsp;&nbsp;&nbsp; = </code><code class="cpp keyword bold">false</code><code class="cpp plain">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// not using one shot mode</code></div><div class="line number62 index61 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.sync&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = </code><code class="cpp keyword bold">false</code><code class="cpp plain">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// not syncronizing timer3 with other timers</code></div><div class="line number63 index62 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">};</code></div><div class="line number64 index63 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number65 index64 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">//Setup Timer Configuration for general purpose use</code></div><div class="line number66 index65 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER_Init_TypeDef timerGPInit = </code></div><div class="line number67 index66 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number68 index67 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.enable&nbsp;&nbsp;&nbsp;&nbsp; = </code><code class="cpp keyword bold">true</code><code class="cpp plain">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// start timer upon configuration</code></div><div class="line number69 index68 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.debugRun&nbsp;&nbsp; = </code><code class="cpp keyword bold">true</code><code class="cpp plain">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// run timer in debug mode</code></div><div class="line number70 index69 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.prescale&nbsp;&nbsp; = timerPrescale1,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// set prescaler to /1</code></div><div class="line number71 index70 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.clkSel&nbsp;&nbsp;&nbsp;&nbsp; = timerClkSelHFPerClk,&nbsp; </code><code class="cpp comments">// set clock source as HFPERCLK</code></div><div class="line number72 index71 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.fallAction = timerInputActionNone, </code><code class="cpp comments">// no action from inputs</code></div><div class="line number73 index72 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.riseAction = timerInputActionNone, </code><code class="cpp comments">// no action from inputs</code></div><div class="line number74 index73 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.mode&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = timerModeUp,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// use up-count mode</code></div><div class="line number75 index74 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.dmaClrAct&nbsp; = </code><code class="cpp keyword bold">false</code><code class="cpp plain">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// not using DMA</code></div><div class="line number76 index75 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.quadModeX4 = </code><code class="cpp keyword bold">false</code><code class="cpp plain">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// not using Quad Dec. mode</code></div><div class="line number77 index76 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.oneShot&nbsp;&nbsp;&nbsp; = </code><code class="cpp keyword bold">false</code><code class="cpp plain">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// not using one shot mode</code></div><div class="line number78 index77 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.sync&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = </code><code class="cpp keyword bold">false</code><code class="cpp plain">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// not syncronizing timer3 with other timers</code></div><div class="line number79 index78 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">};</code></div><div class="line number80 index79 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number81 index80 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER_TopSet(TIMER0, TOP_VAL_CU_TIMER);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// GP Timer period will be 1ms = 1kHz freq</code></div><div class="line number82 index81 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER_TopSet(TIMER3, TOP_VAL_PWM);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// PWM period will be 1ms = 1kHz freq</code></div><div class="line number83 index82 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number84 index83 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER_CounterSet(TIMER0, 0);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Start counter at 0 (up-count mode)</code></div><div class="line number85 index84 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER_CounterSet(TIMER3, 0);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Start counter at 0 (up-count mode)</code></div><div class="line number86 index85 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number87 index86 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER_CompareSet(TIMER3, 2, compare_val);&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Set CC2 compare value (0% duty)</code></div><div class="line number88 index87 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER_CompareBufSet(TIMER3, 2, compare_val); </code><code class="cpp comments">// Set CC2 compare buffer value (0% duty)</code></div><div class="line number89 index88 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number90 index89 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER_IntEnable(TIMER0, TIMER_IF_OF);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Enable Timer0 overflow interrupt</code></div><div class="line number91 index90 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">NVIC_EnableIRQ(TIMER0_IRQn);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Enable Timer0 interrupt vector in NVIC</code></div><div class="line number92 index91 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number93 index92 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER_InitCC(TIMER3, 2, &amp;timerCCInit);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// apply channel configuration to Timer3 channel 2</code></div><div class="line number94 index93 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER3-&gt;ROUTE = (1 &lt;&lt; 16) |(1 &lt;&lt; 2);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// connect PWM output (timer3, channel 2) to PE2 (LED0). See EFM32GG990 datasheet for details.</code></div><div class="line number95 index94 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number96 index95 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER_Init(TIMER0, &amp;timerGPInit);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// apply general purpose configuration to timer0</code></div><div class="line number97 index96 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER_Init(TIMER3, &amp;timerPWMInit);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// apply PWM configuration to timer3</code></div><div class="line number98 index97 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number99 index98 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(1) {</code></div><div class="line number100 index99 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(ms_counter == UPDATE_PERIOD) { </code></div><div class="line number101 index100 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(inc) {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// If increment = true</code></div><div class="line number102 index101 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">compare_val += INC_VAL;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Increase the compare value</code></div><div class="line number103 index102 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code><code class="cpp keyword bold">else</code><code class="cpp plain">{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// increment = false</code></div><div class="line number104 index103 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">compare_val -= INC_VAL;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Decrease the compare value</code></div><div class="line number105 index104 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number106 index105 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">TIMER_CompareBufSet(TIMER3, 2, compare_val); </code><code class="cpp comments">// Write new value to compare buffer</code></div><div class="line number107 index106 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">GPIO_PinOutToggle(gpioPortE, 3);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Toggle LED1</code></div><div class="line number108 index107 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">ms_counter = 0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Reset counter</code></div><div class="line number109 index108 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number110 index109 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(compare_val &gt; (TOP_VAL_PWM-1)) { inc = 0; } </code><code class="cpp comments">// If compare value is at max, start decrementing</code></div><div class="line number111 index110 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(compare_val &lt; 1) { inc = 1; }&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// If compare value is at min, start incrementing</code></div><div class="line number112 index111 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number113 index112 alt2"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>&nbsp;</p><hr><p>&nbsp;</p><p>&nbsp;</p></div></div></div></div><div id="expander-1643175" class="expand-container conf-macro output-block" data-hasbody="true" data-macro-name="expand"><div id="expander-control-1643175" class="expand-control"><span class="expand-control-icon icon">&nbsp;</span><span class="expand-control-text">UART Example</span></div><div id="expander-content-1643175" class="expand-content expand-hidden"><hr><p>This example shows how to setup the USART in asynchronous mode (essentially a UART) for basic serial communication.&nbsp; UART communication is very popular in embedded designs due to the low number of required pins (Transmit Data line, Receive Data line, and Ground).&nbsp; There are even some "single-wire" UARTs available (shared TX/RX line), however these still require a common ground to operate properly.&nbsp; UARTs work asynchronously, meaning there is no dedicated clock line between the 2 devices.&nbsp; Therefore, each device needs to have a predefined matching data rate and frame format to actually communicate.&nbsp;</p><p>The data rate is defined by the clock for each individual device.&nbsp; Any error in the clock rate will effect the baud rate of the UART and could cause loss of sync between the devices.&nbsp; Because of this, it's normally recommended to use a high accuracy clock source such as a crystal oscillator.&nbsp; An RC oscillator may work, although it should involve some sort of calibration process to increase accuracy.</p><p>For this demo, the Giant Gecko was setup to use the 48MHz high frequency crystal oscillator.&nbsp; The HF clock devider was set to /2 to achieve a system clock of 24 MHz just like in the "HF XTAL Oscillator" example above.</p><p>For this demo, the Giant Gecko UART port was setup with the following serial communication settings:</p><ul><li>Baud Rate (bps):&nbsp; 38400</li><li>Data Bits:&nbsp; 8</li><li>Parity:&nbsp; none</li><li>Stop Bits:&nbsp; 1</li></ul><p>The code examples found below were tested using a <a href="http://www.eewiki.net/display/projects/EFM32+-+STK3700+Custom+Expansion+Board">custom expansion board</a> which has USART1 available on an external connector.&nbsp; The custom expansion board was connected to a PC using the TTL-232R-3V3 smart cable from FTDI.&nbsp; A terminal emulator program (Tera Term) was used to display characters transmitted to and from the Giant Gecko.&nbsp; The serial port of the terminal program was setup with the following settings:</p><ul><li>Baud Rate (bps):&nbsp; 38400</li><li>Data Bits:&nbsp; 8</li><li>Parity:&nbsp; none</li><li>Stop Bits:&nbsp; 1</li><li>Flow Control:&nbsp; none</li></ul><p>The following figure shows the printed characters in the terminal window while running the applications found below.</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/UART_Screenshot.jpg" data-image-src="/download/attachments/27754907/UART_Screenshot.jpg?version=1&amp;modificationDate=1392414667457&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="30213081" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="UART_Screenshot.jpg" data-base-url="https://eewiki.net" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="27754907" data-linked-resource-container-version="65"></span></p><p>&nbsp;</p><div id="expander-2090860279" class="expand-container conf-macro output-block" data-hasbody="true" data-macro-name="expand"><div id="expander-control-2090860279" class="expand-control"><span class="expand-control-icon icon">&nbsp;</span><span class="expand-control-text">UART Example Using Direct Register Access</span></div><div id="expander-content-2090860279" class="expand-content expand-hidden"><p>The following example code shows how to use direct register access to implement this simple UART application.&nbsp; For the following code to work, the 'em_system.c' file needs to be added to the workspace.</p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<div><div id="highlighter_310560" class="syntaxhighlighter sh-confluence nogutter  cpp"><div class="toolbar"><span><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="cpp preprocessor">#include "efm32gg990f1024.h"</code></div><div class="line number2 index1 alt1"><code class="cpp preprocessor">#include "em_chip.h"&nbsp;&nbsp;&nbsp; // required for CHIP_Init() function</code></div><div class="line number3 index2 alt2"><code class="cpp preprocessor">#include &lt;string.h&gt;</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="cpp preprocessor">#define COM_PORT 3 // gpioPortD (USART location #1: PD0 and PD1)</code></div><div class="line number6 index5 alt1"><code class="cpp preprocessor">#define UART_TX_pin 0</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="cpp color1 bold">int</code> <code class="cpp plain">main() {</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CHIP_Init();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// This function addresses some chip errata and should be called at the start of every EFM32 application (need em_system.c)</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint8_t i;</code></div><div class="line number11 index10 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">char</code> <code class="cpp plain">test_string[] = </code><code class="cpp string">"\n\rHello World!\n\r"</code><code class="cpp plain">;</code></div><div class="line number12 index11 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">char</code> <code class="cpp plain">rx_char = 0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Temp variable for storing received characters</code></div><div class="line number13 index12 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number14 index13 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU-&gt;CTRL |= (1 &lt;&lt; 14);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Set HF clock divider to /2 to keep core frequency &lt;32MHz</code></div><div class="line number15 index14 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU-&gt;OSCENCMD |= 0x4;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Enable XTAL Oscillator</code></div><div class="line number16 index15 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(! (CMU-&gt;STATUS &amp; 0x8) );&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Wait for XTAL osc to stabilize</code></div><div class="line number17 index16 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU-&gt;CMD = 0x2;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Select HF XTAL osc as system clock source. 48MHz XTAL, but we divided the system clock by 2, therefore our HF clock should be 24MHz</code></div><div class="line number18 index17 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number19 index18 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU-&gt;HFPERCLKEN0 = (1 &lt;&lt; 13) | (1 &lt;&lt; 1);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Enable GPIO, and USART1 peripheral clocks</code></div><div class="line number20 index19 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number21 index20 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO-&gt;P[COM_PORT].MODEL = (1 &lt;&lt; 4) | (4 &lt;&lt; 0);&nbsp; </code><code class="cpp comments">// Configure PD0 as digital output and PD1 as input</code></div><div class="line number22 index21 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO-&gt;P[COM_PORT].DOUTSET = (1 &lt;&lt; UART_TX_pin); </code><code class="cpp comments">// Initialize PD0 high since UART TX idles high (otherwise glitches can occur)</code></div><div class="line number23 index22 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number24 index23 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Use default value for USART1-&gt;CTRL: asynch mode, x16 OVS, lsb first, CLK idle low</code></div><div class="line number25 index24 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Default frame options: 8-none-1-none</code></div><div class="line number26 index25 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">USART1-&gt;CLKDIV = (152 &lt;&lt; 6);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// 152 will give 38400 baud rate (using 16-bit oversampling with 24MHz peripheral clock)</code></div><div class="line number27 index26 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">USART1-&gt;CMD = (1 &lt;&lt; 11) | (1 &lt;&lt; 10) | (1 &lt;&lt; 2) | (1 &lt;&lt; 0); </code><code class="cpp comments">// Clear RX/TX buffers and shif regs, Enable Transmitter and Receiver</code></div><div class="line number28 index27 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">USART1-&gt;IFC = 0x1FF9;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// clear all USART interrupt flags</code></div><div class="line number29 index28 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">USART1-&gt;ROUTE = 0x103;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Enable TX and RX pins, use location #1 (UART TX and RX located at PD0 and PD1, see EFM32GG990 datasheet for details)</code></div><div class="line number30 index29 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number31 index30 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Print test string</code></div><div class="line number32 index31 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(i=0; i&lt;</code><code class="cpp functions bold">strlen</code><code class="cpp plain">(test_string); i++) {</code></div><div class="line number33 index32 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">( !(USART1-&gt;STATUS &amp; (1 &lt;&lt; 6)) ); </code><code class="cpp comments">// wait for TX buffer to empty</code></div><div class="line number34 index33 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">USART1-&gt;TXDATA = test_string[i];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// print each character of the test string</code></div><div class="line number35 index34 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number36 index35 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number37 index36 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(1) {</code></div><div class="line number38 index37 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(USART1-&gt;STATUS &amp; (1 &lt;&lt; 7)) {&nbsp;&nbsp; </code><code class="cpp comments">// if RX buffer contains valid data</code></div><div class="line number39 index38 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">rx_char = USART1-&gt;RXDATA;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// store the data</code></div><div class="line number40 index39 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number41 index40 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(rx_char) {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// if we have a valid character</code></div><div class="line number42 index41 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(USART1-&gt;STATUS &amp; (1 &lt;&lt; 6)) { </code><code class="cpp comments">// check if TX buffer is empty</code></div><div class="line number43 index42 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">USART1-&gt;TXDATA = rx_char;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// echo received char</code></div><div class="line number44 index43 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">rx_char = 0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// reset temp variable</code></div><div class="line number45 index44 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number46 index45 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number47 index46 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number48 index47 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div></div></div><div id="expander-333653469" class="expand-container conf-macro output-block" data-hasbody="true" data-macro-name="expand"><div id="expander-control-333653469" class="expand-control"><span class="expand-control-icon icon">&nbsp;</span><span class="expand-control-text">UART Example Using emlib API</span></div><div id="expander-content-333653469" class="expand-content expand-hidden"><p>The following example code shows how to implement the UART example using emlib functions.&nbsp; For the following code to work, the following files need to be added to the workspace:</p><ul><li>em_cmu.c</li><li>em_emu.c</li><li>em_gpio.c</li><li>em_system.c</li><li>em_usart.c</li></ul><p>&nbsp;</p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<div><div id="highlighter_138423" class="syntaxhighlighter sh-confluence nogutter  cpp"><div class="toolbar"><span><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="cpp preprocessor">#include "em_device.h"</code></div><div class="line number2 index1 alt1"><code class="cpp preprocessor">#include "em_cmu.h"</code></div><div class="line number3 index2 alt2"><code class="cpp preprocessor">#include "em_gpio.h"</code></div><div class="line number4 index3 alt1"><code class="cpp preprocessor">#include "em_usart.h"</code></div><div class="line number5 index4 alt2"><code class="cpp preprocessor">#include "em_system.h"</code></div><div class="line number6 index5 alt1"><code class="cpp preprocessor">#include "em_chip.h"&nbsp;&nbsp;&nbsp; // required for CHIP_Init() function</code></div><div class="line number7 index6 alt2"><code class="cpp preprocessor">#include &lt;string.h&gt;&nbsp;&nbsp;&nbsp;&nbsp; // required for strlen() function</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="cpp preprocessor">#define COM_PORT gpioPortD // USART location #1: PD0 and PD1</code></div><div class="line number10 index9 alt1"><code class="cpp preprocessor">#define UART_TX_pin 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // PD0</code></div><div class="line number11 index10 alt2"><code class="cpp preprocessor">#define UART_RX_pin 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // PD1</code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2"><code class="cpp color1 bold">int</code> <code class="cpp plain">main() {</code></div><div class="line number14 index13 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CHIP_Init(); </code><code class="cpp comments">// This function addresses some chip errata and should be called at the start of every EFM32 application (need em_system.c)</code></div><div class="line number15 index14 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number16 index15 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint8_t i;</code></div><div class="line number17 index16 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">char</code> <code class="cpp plain">test_string[] = </code><code class="cpp string">"\n\rHello World!\n\r"</code><code class="cpp plain">;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Test string</code></div><div class="line number18 index17 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">char</code> <code class="cpp plain">rx_char = 0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Temp variable for storing received characters</code></div><div class="line number19 index18 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number20 index19 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU_ClockDivSet(cmuClock_HF, cmuClkDiv_2);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Set HF clock divider to /2 to keep core frequency &lt; 32MHz</code></div><div class="line number21 index20 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU_OscillatorEnable(cmuOsc_HFXO, </code><code class="cpp keyword bold">true</code><code class="cpp plain">, </code><code class="cpp keyword bold">true</code><code class="cpp plain">);&nbsp;&nbsp; </code><code class="cpp comments">// Enable XTAL Osc and wait to stabilize</code></div><div class="line number22 index21 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU_ClockSelectSet(cmuClock_HF, cmuSelect_HFXO); </code><code class="cpp comments">// Select HF XTAL osc as system clock source. 48MHz XTAL, but we divided the system clock by 2, therefore our HF clock will be 24MHz</code></div><div class="line number23 index22 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number24 index23 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU_ClockEnable(cmuClock_GPIO, </code><code class="cpp keyword bold">true</code><code class="cpp plain">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Enable GPIO peripheral clock</code></div><div class="line number25 index24 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU_ClockEnable(cmuClock_USART1, </code><code class="cpp keyword bold">true</code><code class="cpp plain">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Enable USART1 peripheral clock</code></div><div class="line number26 index25 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number27 index26 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO_PinModeSet(COM_PORT, UART_TX_pin, gpioModePushPull, 1); </code><code class="cpp comments">// Configure UART TX pin as digital output, initialize high since UART TX idles high (otherwise glitches can occur)</code></div><div class="line number28 index27 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO_PinModeSet(COM_PORT, UART_RX_pin, gpioModeInput, 0);&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Configure UART RX pin as input (no filter)</code></div><div class="line number29 index28 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number30 index29 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">USART_InitAsync_TypeDef uartInit =</code></div><div class="line number31 index30 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number32 index31 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.enable&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = usartDisable,&nbsp;&nbsp; </code><code class="cpp comments">// Wait to enable the transmitter and receiver</code></div><div class="line number33 index32 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.refFreq&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = 0,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Setting refFreq to 0 will invoke the CMU_ClockFreqGet() function and measure the HFPER clock </code></div><div class="line number34 index33 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.baudrate&nbsp;&nbsp;&nbsp;&nbsp; = 38400,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Desired baud rate</code></div><div class="line number35 index34 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.oversampling = usartOVS16,&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Set oversampling value to x16</code></div><div class="line number36 index35 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.databits&nbsp;&nbsp;&nbsp;&nbsp; = usartDatabits8, </code><code class="cpp comments">// 8 data bits</code></div><div class="line number37 index36 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.parity&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = usartNoParity,&nbsp; </code><code class="cpp comments">// No parity bits</code></div><div class="line number38 index37 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.stopbits&nbsp;&nbsp;&nbsp;&nbsp; = usartStopbits1, </code><code class="cpp comments">// 1 stop bit</code></div><div class="line number39 index38 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.mvdis&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = </code><code class="cpp keyword bold">false</code><code class="cpp plain">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Use majority voting</code></div><div class="line number40 index39 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.prsRxEnable&nbsp; = </code><code class="cpp keyword bold">false</code><code class="cpp plain">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Not using PRS input</code></div><div class="line number41 index40 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">.prsRxCh&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = usartPrsRxCh0,&nbsp; </code><code class="cpp comments">// Doesn't matter which channel we select</code></div><div class="line number42 index41 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">};</code></div><div class="line number43 index42 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number44 index43 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">USART_InitAsync(USART1, &amp;uartInit);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Apply configuration struct to USART1</code></div><div class="line number45 index44 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">USART1-&gt;ROUTE = UART_ROUTE_RXPEN | UART_ROUTE_TXPEN | _UART_ROUTE_LOCATION_LOC1; </code><code class="cpp comments">// Clear RX/TX buffers and shift regs, enable transmitter and receiver pins</code></div><div class="line number46 index45 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number47 index46 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">USART_IntClear(USART1, _UART_IF_MASK); </code><code class="cpp comments">// Clear any USART interrupt flags</code></div><div class="line number48 index47 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">NVIC_ClearPendingIRQ(UART1_RX_IRQn);&nbsp;&nbsp; </code><code class="cpp comments">// Clear pending RX interrupt flag in NVIC</code></div><div class="line number49 index48 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">NVIC_ClearPendingIRQ(UART1_TX_IRQn);&nbsp;&nbsp; </code><code class="cpp comments">// Clear pending TX interrupt flag in NVIC</code></div><div class="line number50 index49 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number51 index50 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">USART_Enable(USART1, usartEnable);&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Enable transmitter and receiver</code></div><div class="line number52 index51 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number53 index52 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Print test string</code></div><div class="line number54 index53 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(i=0; i&lt;</code><code class="cpp functions bold">strlen</code><code class="cpp plain">(test_string); i++) {</code></div><div class="line number55 index54 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">( !(USART1-&gt;STATUS &amp; (1 &lt;&lt; 6)) ); </code><code class="cpp comments">// wait for TX buffer to empty</code></div><div class="line number56 index55 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">USART1-&gt;TXDATA = test_string[i];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// print each character of the test string</code></div><div class="line number57 index56 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number58 index57 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number59 index58 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(1) {</code></div><div class="line number60 index59 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(USART1-&gt;STATUS &amp; (1 &lt;&lt; 7)) {&nbsp;&nbsp; </code><code class="cpp comments">// if RX buffer contains valid data</code></div><div class="line number61 index60 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">rx_char = USART1-&gt;RXDATA;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// store the data</code></div><div class="line number62 index61 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number63 index62 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(rx_char) {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// if we have a valid character</code></div><div class="line number64 index63 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(USART1-&gt;STATUS &amp; (1 &lt;&lt; 6)) { </code><code class="cpp comments">// check if TX buffer is empty</code></div><div class="line number65 index64 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">USART1-&gt;TXDATA = rx_char;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// echo received char</code></div><div class="line number66 index65 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">rx_char = 0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// reset temp variable</code></div><div class="line number67 index66 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number68 index67 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number69 index68 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number70 index69 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div><p>&nbsp;</p><hr><p>&nbsp;</p><p>&nbsp;</p></div></div></div></div><div id="expander-584575612" class="expand-container conf-macro output-block" data-hasbody="true" data-macro-name="expand"><div id="expander-control-584575612" class="expand-control"><span class="expand-control-icon icon">&nbsp;</span><span class="expand-control-text">ADC Example</span></div><div id="expander-content-584575612" class="expand-content expand-hidden"><hr><p>This example shows how to setup the Analog to Digital Converter (ADC) in the Giant Gecko using a <a href="http://www.eewiki.net/display/projects/EFM32+-+STK3700+Custom+Expansion+Board">custom expansion board</a> that interfaces with the STK3700.</p><p>A potentiometer loaded on the expansion board was used as the analog source.&nbsp; The potentiometer provided a controllable analog voltage source varying between 0~3.3V with the center tap connected to PD6 (ADC0 Channel 6) of the Giant Gecko.&nbsp; Therefore, VDD (3.3V) was used as the reference voltage of the ADC.&nbsp; The ADC was setup in single ended mode and provided single conversions at a predefined interval.&nbsp; The results were set to 12-bit, right-justified within the 16-bit result register.&nbsp; The ADC clock was set to 12MHz with x2 oversampling enabled.&nbsp; An input filter was not implemented for this demo.</p><p>After the ADC completed each conversion, USART1 was used to transmit the results to a terminal program on a PC.&nbsp; The USART was setup in asynchronous mode with the same serial communication settings as the "UART Example" shown above.</p><p>To provide a high accuracy clock for UART communication, the 48MHz crystal oscillator was used with a /2 prescaler to generate a 24MHz System Clock, just like the "HF XTAL Oscillator" example above.&nbsp;</p><p>Timer0 was used as a general purpose timer to trigger single ADC conversions every 500ms, similar to the "Timer with Interrupt" example above.&nbsp; The potentiometer value was updated onscreen every half second.</p><p>Below is a screenshot of the terminal window while running this demo application.</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/ADC_Ex_Screenshot.jpg" data-image-src="/download/attachments/27754907/ADC_Ex_Screenshot.jpg?version=1&amp;modificationDate=1392837260950&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="30867614" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="ADC_Ex_Screenshot.jpg" data-base-url="https://eewiki.net" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="27754907" data-linked-resource-container-version="65"></span></p><p>&nbsp;</p><div id="expander-1729999633" class="expand-container conf-macro output-block" data-hasbody="true" data-macro-name="expand"><div id="expander-control-1729999633" class="expand-control"><span class="expand-control-icon icon">&nbsp;</span><span class="expand-control-text">ADC Example Using Direct Register Access</span></div><div id="expander-content-1729999633" class="expand-content expand-hidden"><p>The following example code demonstrate how to setup the ADC in single conversion mode using direct register access.&nbsp; For the following code to work, the 'em_system.c' file needs to be added to the workspace.</p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<div><div id="highlighter_267236" class="syntaxhighlighter sh-confluence nogutter  cpp"><div class="toolbar"><span><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="cpp preprocessor">#include "efm32gg990f1024.h"</code></div><div class="line number2 index1 alt1"><code class="cpp preprocessor">#include "em_chip.h"&nbsp;&nbsp;&nbsp; // required for CHIP_Init() function</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number4 index3 alt1"><code class="cpp preprocessor">#define COM_PORT 3 // gpioPortD (USART location #1: PD0 and PD1)</code></div><div class="line number5 index4 alt2"><code class="cpp preprocessor">#define ADC_PORT 3 // gpioPortD (ADC Channel 6 location #0: PD6)</code></div><div class="line number6 index5 alt1"><code class="cpp preprocessor">#define TX_pin 0</code></div><div class="line number7 index6 alt2"><code class="cpp preprocessor">#define ADC_pin 6 // ADC Channel 6</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">set_decade(uint16_t val);</code></div><div class="line number10 index9 alt1"><code class="cpp plain">uint8_t conv_ascii(uint16_t val);</code></div><div class="line number11 index10 alt2"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number12 index11 alt1"><code class="cpp plain">uint16_t ms_counter = 0;</code></div><div class="line number13 index12 alt2"><code class="cpp color1 bold">char</code> <code class="cpp plain">header[] = </code><code class="cpp string">"\n\rEFM32 Giant Gecko - ADC Example\n\r"</code><code class="cpp plain">;</code></div><div class="line number14 index13 alt1"><code class="cpp plain">uint8_t digit_array[7] = { 0x20, 0x20, 0x20, 0x20, 0x20, </code><code class="cpp string">'m'</code><code class="cpp plain">, </code><code class="cpp string">'V'</code> <code class="cpp plain">}; </code><code class="cpp comments">// Array for displaying ADC result, initialize to "&nbsp;&nbsp;&nbsp;&nbsp; mV"</code></div><div class="line number15 index14 alt2"><code class="cpp spaces">&nbsp;</code>&nbsp;</div><div class="line number16 index15 alt1"><code class="cpp keyword bold">void</code> <code class="cpp plain">TIMER0_IRQHandler(</code><code class="cpp keyword bold">void</code><code class="cpp plain">) {</code></div><div class="line number17 index16 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER0-&gt;IFC = 1; </code><code class="cpp comments">// Clear overflow flag</code></div><div class="line number18 index17 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">ms_counter++;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Increment counter</code></div><div class="line number19 index18 alt2"><code class="cpp plain">}</code></div><div class="line number20 index19 alt1">&nbsp;</div><div class="line number21 index20 alt2"><code class="cpp color1 bold">int</code> <code class="cpp plain">main() {</code></div><div class="line number22 index21 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CHIP_Init();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// This function addresses some chip errata and should be called at the start of every EFM32 application (need em_system.c)</code></div><div class="line number23 index22 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number24 index23 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint8_t i;</code></div><div class="line number25 index24 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint16_t adc_result = 0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Temp variable for storing ADC conversion results</code></div><div class="line number26 index25 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint32_t temp;</code></div><div class="line number27 index26 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number28 index27 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Initialize Clock Tree</code></div><div class="line number29 index28 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU-&gt;CTRL |= (1 &lt;&lt; 14);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Set HF clock divider to /2 to keep core frequency &lt;32MHz</code></div><div class="line number30 index29 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU-&gt;OSCENCMD |= 0x4;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Enable XTAL Oscillator</code></div><div class="line number31 index30 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(! (CMU-&gt;STATUS &amp; 0x8) ); </code><code class="cpp comments">// Wait for XTAL osc to stabilize</code></div><div class="line number32 index31 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU-&gt;CMD = 0x2;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Select HF XTAL osc as system clock source. 48MHz XTAL, but we divided the system clock by 2, therefore our HF clock should be 24MHz</code></div><div class="line number33 index32 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU-&gt;HFPERCLKEN0 = (1 &lt;&lt; 16) | (1 &lt;&lt; 13) | (1 &lt;&lt; 5) | (1 &lt;&lt; 1); </code><code class="cpp comments">// Enable GPIO, TIMER0, USART1, and ADC0 peripheral clocks</code></div><div class="line number34 index33 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number35 index34 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Initialize GPIO&nbsp; </code></div><div class="line number36 index35 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO-&gt;P[COM_PORT].MODEL = (1 &lt;&lt; 24) | (1 &lt;&lt; 4) | (4 &lt;&lt; 0); </code><code class="cpp comments">// Configure PD0 as digital output, PD1 and PD6 as input</code></div><div class="line number37 index36 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO-&gt;P[COM_PORT].DOUTSET = (1 &lt;&lt; TX_pin);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Initialize PD0 high since UART TX idles high (otherwise glitches can occur)</code></div><div class="line number38 index37 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number39 index38 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Setup UART Port for asynch mode, frame format 8-none-1-none</code></div><div class="line number40 index39 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">USART1-&gt;CLKDIV = (152 &lt;&lt; 6);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// 152 will give 38400 baud rate (using 16-bit oversampling with 24MHz peripheral clock)</code></div><div class="line number41 index40 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">USART1-&gt;CMD = (1 &lt;&lt; 11) | (1 &lt;&lt; 10) | (1 &lt;&lt; 2) | (1 &lt;&lt; 0); </code><code class="cpp comments">// Clear RX/TX buffers and shif regs, Enable Transmitter and Receiver</code></div><div class="line number42 index41 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">USART1-&gt;IFC = 0x1FF9;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// clear all USART interrupt flags</code></div><div class="line number43 index42 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">USART1-&gt;ROUTE = 0x103;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Enable TX and RX pins, use location #1 (UART TX and RX located at PD0 and PD1, see EFM32GG990 datasheet for details)</code></div><div class="line number44 index43 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number45 index44 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Setup ADC</code></div><div class="line number46 index45 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Timebase bit field = 24, defines ADC warm up period (must be greater than or equal to number of clock cycles in 1us)</code></div><div class="line number47 index46 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Prescaler setting = 1: ADC clock = HFPERCLK/2 = 12MHz (ADC clock should be between 32kHz and 13MHz)</code></div><div class="line number48 index47 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Oversampling set to 2, no input filter, no need for Conversion Tailgating</code></div><div class="line number49 index48 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Warm-up mode = NORMAL (ADC is not kept warmed up between conversions)</code></div><div class="line number50 index49 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">ADC0-&gt;CTRL = (24 &lt;&lt; 16) | (1 &lt;&lt; 8);</code></div><div class="line number51 index50 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number52 index51 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Don't use PRS as input</code></div><div class="line number53 index52 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Can use single-cycle acquisition time since we are spacing out our conversions using a timer</code></div><div class="line number54 index53 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Use buffered Vdd as reference, use Channel 6 as input to single conversion</code></div><div class="line number55 index54 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// 12-bit resolution, right-justified, single-ended input, single conversion</code></div><div class="line number56 index55 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">ADC0-&gt;SINGLECTRL = (2 &lt;&lt; 16) | (6 &lt;&lt; 8);</code></div><div class="line number57 index56 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">ADC0-&gt;IEN = 0x0; </code><code class="cpp comments">// Disable ADC interrupts</code></div><div class="line number58 index57 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number59 index58 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Setup Timer to trigger conversions</code></div><div class="line number60 index59 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER0-&gt;TOP = 24000;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Set TOP value for Timer0</code></div><div class="line number61 index60 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER0-&gt;IEN = 1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Enable Timer0 overflow interrupt</code></div><div class="line number62 index61 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">NVIC_EnableIRQ(TIMER0_IRQn);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Enable TIMER0 interrupt vector in NVIC</code></div><div class="line number63 index62 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">TIMER0-&gt;CMD = 0x1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Start timer0</code></div><div class="line number64 index63 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number65 index64 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Print Startup Header</code></div><div class="line number66 index65 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">i=0;</code></div><div class="line number67 index66 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(header[i] != 0) {</code></div><div class="line number68 index67 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">( !(USART1-&gt;STATUS &amp; (1 &lt;&lt; 6)) ); </code><code class="cpp comments">// wait for TX buffer to empty</code></div><div class="line number69 index68 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">USART1-&gt;TXDATA = header[i++];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// print each character of the header</code></div><div class="line number70 index69 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number71 index70 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number72 index71 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(1) {</code></div><div class="line number73 index72 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(ms_counter == 500) {</code></div><div class="line number74 index73 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number75 index74 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// Move cursor to start of line</code></div><div class="line number76 index75 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">( !(USART1-&gt;STATUS &amp; (1 &lt;&lt; 6)) ); </code><code class="cpp comments">// wait for TX buffer to empty</code></div><div class="line number77 index76 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">USART1-&gt;TXDATA = 0x0D;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// send carriage return</code></div><div class="line number78 index77 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">ADC0-&gt;CMD = 0x1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Start Single Conversion</code></div><div class="line number79 index78 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!(ADC0-&gt;STATUS &amp; (1 &lt;&lt; 16)));&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Wait for single conversion data to become valid</code></div><div class="line number80 index79 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">adc_result = ADC0-&gt;SINGLEDATA;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Store conversion result</code></div><div class="line number81 index80 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number82 index81 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// Change hex result to decimal result in mV</code></div><div class="line number83 index82 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">temp = adc_result*3300;</code></div><div class="line number84 index83 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">adc_result = temp/4095;</code></div><div class="line number85 index84 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">set_decade(adc_result); </code><code class="cpp comments">// Divide result into individual characters to be transmitted over UART</code></div><div class="line number86 index85 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number87 index86 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// Transmit result characters over UART</code></div><div class="line number88 index87 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(i=0; i&lt;7; i++) {</code></div><div class="line number89 index88 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">( !(USART1-&gt;STATUS &amp; (1 &lt;&lt; 6)) ); </code><code class="cpp comments">// wait for TX buffer to empty</code></div><div class="line number90 index89 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">USART1-&gt;TXDATA = digit_array[i];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// print each character of the test string</code></div><div class="line number91 index90 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number92 index91 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number93 index92 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">ms_counter = 0; </code><code class="cpp comments">// reset counter</code></div><div class="line number94 index93 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number95 index94 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number96 index95 alt1"><code class="cpp plain">}</code></div><div class="line number97 index96 alt2">&nbsp;</div><div class="line number98 index97 alt1"><code class="cpp comments">// This function is used to divide a 16-bit value into 5 individual digits</code></div><div class="line number99 index98 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">set_decade(uint16_t val)</code></div><div class="line number100 index99 alt1"><code class="cpp plain">{</code></div><div class="line number101 index100 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint16_t tmp;</code></div><div class="line number102 index101 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">tmp = val / 10000;</code></div><div class="line number103 index102 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">(tmp) {</code></div><div class="line number104 index103 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">digit_array[0] = conv_ascii(tmp);</code></div><div class="line number105 index104 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">} </code><code class="cpp keyword bold">else</code></div><div class="line number106 index105 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">digit_array[0] = </code><code class="cpp string">' '</code><code class="cpp plain">;</code></div><div class="line number107 index106 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">val = val - tmp*10000;</code></div><div class="line number108 index107 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">tmp = val / 1000;</code></div><div class="line number109 index108 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">(tmp) {</code></div><div class="line number110 index109 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">digit_array[1] = conv_ascii(tmp);</code></div><div class="line number111 index110 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">} </code><code class="cpp keyword bold">else</code></div><div class="line number112 index111 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">digit_array[1] = </code><code class="cpp string">' '</code><code class="cpp plain">;</code></div><div class="line number113 index112 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">val = val - tmp*1000;</code></div><div class="line number114 index113 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">tmp = val / 100;</code></div><div class="line number115 index114 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">(tmp || digit_array[1]!=</code><code class="cpp string">' '</code><code class="cpp plain">) {</code></div><div class="line number116 index115 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">digit_array[2] = conv_ascii(tmp);</code></div><div class="line number117 index116 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">} </code><code class="cpp keyword bold">else</code> <code class="cpp plain">digit_array[2] = </code><code class="cpp string">' '</code><code class="cpp plain">;</code></div><div class="line number118 index117 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">val = val - tmp*100;</code></div><div class="line number119 index118 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">tmp = val / 10;</code></div><div class="line number120 index119 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">(tmp&nbsp; || digit_array[2]!=</code><code class="cpp string">' '</code> <code class="cpp plain">|| digit_array[1]!=</code><code class="cpp string">' '</code><code class="cpp plain">) {</code></div><div class="line number121 index120 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">digit_array[3] = conv_ascii(tmp);</code></div><div class="line number122 index121 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">} </code><code class="cpp keyword bold">else</code> <code class="cpp plain">digit_array[3] = </code><code class="cpp string">' '</code><code class="cpp plain">;</code></div><div class="line number123 index122 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">val = val - tmp*10;</code></div><div class="line number124 index123 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">digit_array[4] = conv_ascii(val);</code></div><div class="line number125 index124 alt2"><code class="cpp plain">}</code></div><div class="line number126 index125 alt1">&nbsp;</div><div class="line number127 index126 alt2"><code class="cpp comments">// This function is used to covert the character to its ASCII value.</code></div><div class="line number128 index127 alt1"><code class="cpp plain">uint8_t conv_ascii(uint16_t val)</code></div><div class="line number129 index128 alt2"><code class="cpp plain">{</code></div><div class="line number130 index129 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">(val&lt;= 0x09) {</code></div><div class="line number131 index130 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">val = val + 0x30;</code></div><div class="line number132 index131 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number133 index132 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">((val &gt;= 0x0A) &amp;&amp; (val&lt;= 0x0F)) {</code></div><div class="line number134 index133 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">val = val + 0x37;</code></div><div class="line number135 index134 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number136 index135 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">val;</code></div><div class="line number137 index136 alt2"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div></div></div></div></div><div id="expander-1664623905" class="expand-container conf-macro output-block" data-hasbody="true" data-macro-name="expand"><div id="expander-control-1664623905" class="expand-control"><span class="expand-control-icon icon">&nbsp;</span><span class="expand-control-text">SPI Example</span></div><div id="expander-content-1664623905" class="expand-content expand-hidden"><hr><p>This example shows how to setup the Serial Peripheral Interface (SPI) in the Giant Gecko using a <a href="http://www.eewiki.net/display/projects/EFM32+-+STK3700+Custom+Expansion+Board">custom expansion board</a> that interfaces with the STK3700.</p><p>A flash memory IC (W25X20CL) loaded on the expansion board was used as the SPI target.&nbsp; The flash IC SPI port (MOSI, MISO, SCLK, CS) was connected to USART1 (Location #1) through PortD - PD[3:0].&nbsp; USART1 was configured in synchronous (SPI) master mode with the SCLK idle low, data setup on trailing edge of SCLK, and data sampled on the rising edge of SCLK.&nbsp; The USART1 clock divider was left at 0 which generated a SCLK frequency of 12MHz.&nbsp; Due to the requirements of the flash IC, USART1 was setup to transmit msb first and the CS pin was handled manually (although the Giant Gecko does offer automatic CS functionality).&nbsp; The flash IC also has active low "Hold" and "Write Protect" pins connected to the Giant Gecko.&nbsp; However, these pins are not used in this example, except to drive the "Hold" pin high and the "Write Protect" pin low.</p><p>For this demo, a simple 'Device ID' command was sent to the flash IC which returns a 2-byte response – the Manufacturer ID and the Device ID.&nbsp; For the W24X20CL, these values were 0xEF and 0x11, respectively.</p><p>After the response was received, USART0 was used to transmit the response to a terminal program on a PC.&nbsp; USART0 was setup in asynchronous mode with the same serial communication settings as the "UART Example" shown above.&nbsp; However, for this example, PC0 (USART0 Location #5) was used as the transmit pin.&nbsp; The receive pin at Location #5 is not available through the expansion port of the STK3700 while in full duplex mode.&nbsp; This isn't a problem since we are simply transmitting results to the PC, not entering values from the PC.&nbsp; USART0 TX pin and GND were connected to the RX and GND pins of TTL-232R-3V3 smart cable from FTDI which was then connected to the USB port of the PC.</p><p>To provide a high accuracy clock for UART communication, the 48MHz crystal oscillator was used with a /2 prescaler to generate a 24MHz System Clock, just like the "HF XTAL Oscillator" example above.&nbsp;</p><p>Below is a screenshot of the terminal window while running this demo application.</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/SPI_Ex_Screenshot.jpg" data-image-src="/download/attachments/27754907/SPI_Ex_Screenshot.jpg?version=1&amp;modificationDate=1392838898107&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="30867784" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="SPI_Ex_Screenshot.jpg" data-base-url="https://eewiki.net" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="27754907" data-linked-resource-container-version="65"></span></p><p>&nbsp;</p><div id="expander-87051154" class="expand-container conf-macro output-block" data-hasbody="true" data-macro-name="expand"><div id="expander-control-87051154" class="expand-control"><span class="expand-control-icon icon">&nbsp;</span><span class="expand-control-text">SPI Example Using Direct Register Access</span></div><div id="expander-content-87051154" class="expand-content expand-hidden"><p>The following example code demonstrate how to setup SPI communication using direct register access.&nbsp; For the following code to work, the 'em_system.c' file needs to be added to the workspace.</p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<div><div id="highlighter_437606" class="syntaxhighlighter sh-confluence nogutter  cpp"><div class="toolbar"><span><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="cpp preprocessor">#include "efm32gg990f1024.h"</code></div><div class="line number2 index1 alt1"><code class="cpp preprocessor">#include "em_chip.h"&nbsp;&nbsp;&nbsp; // required for CHIP_Init() function</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="cpp preprocessor">#define SPI_USART USART1</code></div><div class="line number5 index4 alt2"><code class="cpp preprocessor">#define SPI_COM_PORT 3 // gpioPortD (USART1 location #1)</code></div><div class="line number6 index5 alt1"><code class="cpp preprocessor">#define SPI_TX_pin 0&nbsp;&nbsp; // PD0 - MOSI</code></div><div class="line number7 index6 alt2"><code class="cpp preprocessor">#define SPI_RX_pin 1&nbsp;&nbsp; // PD1 - MISO</code></div><div class="line number8 index7 alt1"><code class="cpp preprocessor">#define SPI_CS_pin 3&nbsp;&nbsp; // PD3 - Chip Select</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="cpp preprocessor">#define COM_USART USART0</code></div><div class="line number11 index10 alt2"><code class="cpp preprocessor">#define EXT_COM_PORT 2 // gpioPortC (USART0 location #5)</code></div><div class="line number12 index11 alt1"><code class="cpp preprocessor">#define EXT_TX_pin 0&nbsp;&nbsp; // PC0 - TX</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="cpp preprocessor">#define RX_BUFFER_SIZE 2</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="cpp comments">// SPI functions</code></div><div class="line number17 index16 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">CS_pin_set(</code><code class="cpp keyword bold">void</code><code class="cpp plain">);</code></div><div class="line number18 index17 alt1"><code class="cpp keyword bold">void</code> <code class="cpp plain">CS_pin_clr(</code><code class="cpp keyword bold">void</code><code class="cpp plain">);</code></div><div class="line number19 index18 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">SPI_WriteByte(uint8_t byte);</code></div><div class="line number20 index19 alt1"><code class="cpp plain">uint8_t SPI_ReadByte(</code><code class="cpp keyword bold">void</code><code class="cpp plain">);</code></div><div class="line number21 index20 alt2">&nbsp;</div><div class="line number22 index21 alt1"><code class="cpp comments">// UART function</code></div><div class="line number23 index22 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">print_byte(uint8_t byte);</code></div><div class="line number24 index23 alt1">&nbsp;</div><div class="line number25 index24 alt2"><code class="cpp comments">// Misc. functions</code></div><div class="line number26 index25 alt1"><code class="cpp keyword bold">void</code> <code class="cpp plain">get_device_id(uint8_t storage_array[], uint8_t start_index); </code><code class="cpp comments">// requires at least a 2-element storage array</code></div><div class="line number27 index26 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">print_byte_setup(uint8_t byte);</code></div><div class="line number28 index27 alt1">&nbsp;</div><div class="line number29 index28 alt2"><code class="cpp comments">// Global variable</code></div><div class="line number30 index29 alt1"><code class="cpp plain">uint8_t print_byte_array[4] = { 0x30, 0x78, 0x20, 0x20 }; </code><code class="cpp comments">// array for displaying bytes one nibble at a time</code></div><div class="line number31 index30 alt2">&nbsp;</div><div class="line number32 index31 alt1"><code class="cpp color1 bold">int</code> <code class="cpp plain">main() {</code></div><div class="line number33 index32 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CHIP_Init(); </code><code class="cpp comments">// This function addresses some chip errata and should be called at the start of every EFM32 application (need em_system.c)</code></div><div class="line number34 index33 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number35 index34 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint8_t i;</code></div><div class="line number36 index35 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">char</code> <code class="cpp plain">test_string[] = </code><code class="cpp string">"\n\rManuf/Device ID\n\r"</code><code class="cpp plain">;</code></div><div class="line number37 index36 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint8_t rx_buffer[RX_BUFFER_SIZE]; </code><code class="cpp comments">// array for storing the 2-byte 'Device ID' response</code></div><div class="line number38 index37 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number39 index38 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Clear rx buffer</code></div><div class="line number40 index39 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(i=0; i&lt;RX_BUFFER_SIZE; i++) {</code></div><div class="line number41 index40 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">rx_buffer[i] = 0;</code></div><div class="line number42 index41 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number43 index42 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number44 index43 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Setup Clock Tree</code></div><div class="line number45 index44 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU-&gt;CTRL |= (1 &lt;&lt; 14);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Set HF clock divider to /2 to keep core frequency &lt;32MHz</code></div><div class="line number46 index45 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU-&gt;OSCENCMD |= 0x4;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Enable XTAL Oscillator</code></div><div class="line number47 index46 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(! (CMU-&gt;STATUS &amp; 0x8) );&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Wait for XTAL osc to stabilize</code></div><div class="line number48 index47 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU-&gt;CMD = 0x2;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Select HF XTAL osc as system clock source. 48MHz XTAL, but we divided the system clock by 2, therefore our HF clock should be 24MHz</code></div><div class="line number49 index48 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU-&gt;HFPERCLKEN0 = (1 &lt;&lt; 13) | (1 &lt;&lt; 1) | (1 &lt;&lt; 0); </code><code class="cpp comments">// Enable GPIO, USART0, and USART1 peripheral clocks</code></div><div class="line number50 index49 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number51 index50 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Configure GPIO</code></div><div class="line number52 index51 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO-&gt;P[SPI_COM_PORT].MODEL = (4 &lt;&lt; 20) | (4 &lt;&lt; 16) | (4 &lt;&lt; 12) | (4 &lt;&lt; 8) | (1 &lt;&lt; 4) | (4 &lt;&lt; 0); </code><code class="cpp comments">// Configure PD0 (MOSI), PD2 (SCK), PD3 (CS), PD4 (nHLD), and PD5 (nWP) as digital outputs and PD1 as input</code></div><div class="line number53 index52 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO-&gt;P[SPI_COM_PORT].DOUTSET = (1 &lt;&lt; 4) | (1 &lt;&lt; 3); </code><code class="cpp comments">// Initialize CS and nHLD high, nWP low</code></div><div class="line number54 index53 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO-&gt;P[EXT_COM_PORT].MODEL = (4 &lt;&lt; 0);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Configure PC0 as digital output</code></div><div class="line number55 index54 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO-&gt;P[EXT_COM_PORT].DOUTSET = (1 &lt;&lt; EXT_TX_pin);&nbsp;&nbsp; </code><code class="cpp comments">// Initialize PC0 high since UART TX idles high (otherwise glitches can occur)</code></div><div class="line number56 index55 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number57 index56 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Configure SPI Port (USART1 in sync mode)</code></div><div class="line number58 index57 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">SPI_USART-&gt;CTRL = (1 &lt;&lt; 30) | (1 &lt;&lt; 10) | (1 &lt;&lt; 0);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Transmit MSB first, use SPI mode 0 (0,0), Disable majority voting, use manual chip-select</code></div><div class="line number59 index58 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">SPI_USART-&gt;CLKDIV = (0 &lt;&lt; 6);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Leave CLKDIV set to 0, leads to a baud rate of 12Mbps</code></div><div class="line number60 index59 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">SPI_USART-&gt;CMD = (1 &lt;&lt; 11) | (1 &lt;&lt; 10) | (1 &lt;&lt; 4) | (1 &lt;&lt; 2) | (1 &lt;&lt; 0); </code><code class="cpp comments">// Clear RX and TX buffers and shift regs, enable master mode, enable transmitter/receiver</code></div><div class="line number61 index60 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">SPI_USART-&gt;IFC = 0x1FF9;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Clear USART1 interrupt flags</code></div><div class="line number62 index61 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">SPI_USART-&gt;ROUTE = (1 &lt;&lt; 8) | (1 &lt;&lt; 3) | (1 &lt;&lt; 1) | (1 &lt;&lt; 0); </code><code class="cpp comments">// Use USART1 location #1, enable CLK, MISO, and MOSI pins</code></div><div class="line number63 index62 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number64 index63 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Configure COM Port (USART0 in async mode)</code></div><div class="line number65 index64 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">COM_USART-&gt;CLKDIV = (152 &lt;&lt; 6);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// 152 will give 38400 baud rate (using 16-bit oversampling with 24MHz peripheral clock)</code></div><div class="line number66 index65 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">COM_USART-&gt;CMD = (1 &lt;&lt; 10) | (1 &lt;&lt; 2);&nbsp; </code><code class="cpp comments">// Clear TX buffer and shif reg, Enable Master mode, Enable Transmitter</code></div><div class="line number67 index66 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">COM_USART-&gt;IFC = 0x1FF9;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// clear all USART interrupt flags</code></div><div class="line number68 index67 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">COM_USART-&gt;ROUTE = (5 &lt;&lt; 8) | (1 &lt;&lt; 1); </code><code class="cpp comments">// Enable TX pin, use location #5 (UART TX located at PC0, see EFM32GG990 datasheet for details)</code></div><div class="line number69 index68 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number70 index69 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Print test string</code></div><div class="line number71 index70 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">i=0;</code></div><div class="line number72 index71 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(test_string[i] != 0){</code></div><div class="line number73 index72 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte(test_string[i++]);</code></div><div class="line number74 index73 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number75 index74 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number76 index75 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Send 'Device ID' command over SPI</code></div><div class="line number77 index76 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">get_device_id(rx_buffer, 0);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// store result in rx_buffer starting at element 0</code></div><div class="line number78 index77 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number79 index78 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Display Manufacturer ID</code></div><div class="line number80 index79 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">print_byte_setup(rx_buffer[0]);&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// break up byte into individual digits (nibbles)</code></div><div class="line number81 index80 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(i=0; i&lt;4; i++) {</code></div><div class="line number82 index81 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte(print_byte_array[i]); </code><code class="cpp comments">// Transmit high and low nibbles over UART</code></div><div class="line number83 index82 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number84 index83 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number85 index84 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">print_byte(0x20); </code><code class="cpp comments">// send whitespace&nbsp; </code></div><div class="line number86 index85 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number87 index86 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Display Device ID</code></div><div class="line number88 index87 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">print_byte_setup(rx_buffer[1]);&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// break up byte into individual digits (nibbles)</code></div><div class="line number89 index88 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(i=0; i&lt;4; i++) {</code></div><div class="line number90 index89 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte(print_byte_array[i]); </code><code class="cpp comments">// Transmit high and low nibbles over UART</code></div><div class="line number91 index90 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number92 index91 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number93 index92 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">print_byte(</code><code class="cpp string">'\r'</code><code class="cpp plain">); </code><code class="cpp comments">// send CR</code></div><div class="line number94 index93 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">print_byte(</code><code class="cpp string">'\n'</code><code class="cpp plain">); </code><code class="cpp comments">// send LF&nbsp;&nbsp;&nbsp;&nbsp; </code></div><div class="line number95 index94 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number96 index95 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(1);</code></div><div class="line number97 index96 alt2"><code class="cpp plain">}</code></div><div class="line number98 index97 alt1">&nbsp;</div><div class="line number99 index98 alt2"><code class="cpp comments">// This function is used to display bytes over UART</code></div><div class="line number100 index99 alt1"><code class="cpp keyword bold">void</code> <code class="cpp plain">print_byte(uint8_t byte) {</code></div><div class="line number101 index100 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">( !(COM_USART-&gt;STATUS &amp; (1 &lt;&lt; 6)) ); </code><code class="cpp comments">// wait for TX buffer to empty</code></div><div class="line number102 index101 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">COM_USART-&gt;TXDATA = byte;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// send byte over UART</code></div><div class="line number103 index102 alt2"><code class="cpp plain">}</code></div><div class="line number104 index103 alt1">&nbsp;</div><div class="line number105 index104 alt2"><code class="cpp comments">// This function drives the CS pin low</code></div><div class="line number106 index105 alt1"><code class="cpp keyword bold">void</code> <code class="cpp plain">CS_pin_clr(</code><code class="cpp keyword bold">void</code><code class="cpp plain">) {</code></div><div class="line number107 index106 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO-&gt;P[SPI_COM_PORT].DOUTCLR = (1 &lt;&lt; SPI_CS_pin);</code></div><div class="line number108 index107 alt1"><code class="cpp plain">}</code></div><div class="line number109 index108 alt2">&nbsp;</div><div class="line number110 index109 alt1"><code class="cpp comments">// This function drives the CS pin high</code></div><div class="line number111 index110 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">CS_pin_set(</code><code class="cpp keyword bold">void</code><code class="cpp plain">) {</code></div><div class="line number112 index111 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO-&gt;P[SPI_COM_PORT].DOUTSET = (1 &lt;&lt; SPI_CS_pin);</code></div><div class="line number113 index112 alt2"><code class="cpp plain">}</code></div><div class="line number114 index113 alt1">&nbsp;</div><div class="line number115 index114 alt2"><code class="cpp comments">// This function writes a byte to the TX buffer (waits for buffer to clear)</code></div><div class="line number116 index115 alt1"><code class="cpp keyword bold">void</code> <code class="cpp plain">SPI_WriteByte(uint8_t byte) {</code></div><div class="line number117 index116 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">( !(SPI_USART-&gt;STATUS &amp; (1 &lt;&lt; 6)) ); </code><code class="cpp comments">// wait for tx buffer to empty</code></div><div class="line number118 index117 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">SPI_USART-&gt;TXDATA = byte;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code></div><div class="line number119 index118 alt2"><code class="cpp plain">}</code></div><div class="line number120 index119 alt1">&nbsp;</div><div class="line number121 index120 alt2"><code class="cpp comments">// This function returns the value of the RX buffer (waits for valid RX data)</code></div><div class="line number122 index121 alt1"><code class="cpp plain">uint8_t SPI_ReadByte(</code><code class="cpp keyword bold">void</code><code class="cpp plain">) {</code></div><div class="line number123 index122 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(! (SPI_USART-&gt;STATUS &amp; (1 &lt;&lt; 7)) ); </code><code class="cpp comments">// wait for valid RX data</code></div><div class="line number124 index123 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code><code class="cpp plain">(SPI_USART-&gt;RXDATA);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// clear RX buffer</code></div><div class="line number125 index124 alt2"><code class="cpp plain">}</code></div><div class="line number126 index125 alt1">&nbsp;</div><div class="line number127 index126 alt2"><code class="cpp comments">// This function gets the manuf/device ID from the flash IC</code></div><div class="line number128 index127 alt1"><code class="cpp keyword bold">void</code> <code class="cpp plain">get_device_id(uint8_t storage_array[], uint8_t start_index) {</code></div><div class="line number129 index128 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint8_t i;</code></div><div class="line number130 index129 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number131 index130 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// drive CS pin low</code></div><div class="line number132 index131 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CS_pin_clr();&nbsp;&nbsp; </code></div><div class="line number133 index132 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number134 index133 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// send 'Device ID' command</code></div><div class="line number135 index134 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">SPI_WriteByte(0x90);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code></div><div class="line number136 index135 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">storage_array[start_index] = SPI_ReadByte(); </code><code class="cpp comments">// clear RX buffer</code></div><div class="line number137 index136 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number138 index137 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// send 3 '00' bytes</code></div><div class="line number139 index138 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(i=0; i&lt;3; i++) {</code></div><div class="line number140 index139 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">SPI_WriteByte(0x00);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code></div><div class="line number141 index140 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">storage_array[start_index] = SPI_ReadByte(); </code><code class="cpp comments">// clear RX buffer each time&nbsp;&nbsp; </code></div><div class="line number142 index141 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number143 index142 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number144 index143 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// read manufacturer id</code></div><div class="line number145 index144 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">SPI_WriteByte(0xFF);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// send dummy byte to receive manuf. id</code></div><div class="line number146 index145 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">storage_array[start_index] = SPI_ReadByte(); </code><code class="cpp comments">// store manuf. id</code></div><div class="line number147 index146 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">SPI_WriteByte(0xFF);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// send dummy byte to receive device id</code></div><div class="line number148 index147 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">storage_array[start_index+1] = SPI_ReadByte(); </code><code class="cpp comments">// store device id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code></div><div class="line number149 index148 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number150 index149 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// drive CS pin high</code></div><div class="line number151 index150 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CS_pin_set(); </code></div><div class="line number152 index151 alt1"><code class="cpp plain">}</code></div><div class="line number153 index152 alt2">&nbsp;</div><div class="line number154 index153 alt1"><code class="cpp comments">// This function breaks up 'byte' into high and low nibbles (ASCII characters) to be transmitted over UART</code></div><div class="line number155 index154 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">print_byte_setup(uint8_t byte) {</code></div><div class="line number156 index155 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number157 index156 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">(((byte &amp; 0xF0) &gt;&gt; 4) &lt;= 0x09) {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// if high nibble is less than 0xA</code></div><div class="line number158 index157 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte_array[2] = ((byte &amp; 0xF0) &gt;&gt; 4) + 0x30;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// store ASCII char</code></div><div class="line number159 index158 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number160 index159 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">((((byte &amp; 0xF0) &gt;&gt; 4) &gt;= 0x0A) &amp;&amp; (((byte &amp; 0xF0) &gt;&gt; 4)&lt;= 0x0F)) { </code><code class="cpp comments">// if high nibble is between 0xA and 0xF</code></div><div class="line number161 index160 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte_array[2] = ((byte &amp; 0xF0) &gt;&gt; 4) + 0x37;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// store ASCII char</code></div><div class="line number162 index161 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number163 index162 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">((byte &amp; 0x0F) &lt;= 0x09) {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// if low nibble is less than 0xA</code></div><div class="line number164 index163 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte_array[3] = (byte &amp; 0x0F) + 0x30;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// store ASCII char</code></div><div class="line number165 index164 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number166 index165 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">(((byte &amp; 0x0F) &gt;= 0x0A) &amp;&amp; ((byte &amp; 0x0F)&lt;= 0x0F)) { </code><code class="cpp comments">// if low nibble is between 0xA and 0xF</code></div><div class="line number167 index166 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte_array[3] = (byte &amp; 0x0F) + 0x37;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// store ASCII char</code></div><div class="line number168 index167 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number169 index168 alt2"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div></div></div></div></div><div id="expander-522799775" class="expand-container conf-macro output-block" data-hasbody="true" data-macro-name="expand"><div id="expander-control-522799775" class="expand-control"><span class="expand-control-icon icon">&nbsp;</span><span class="expand-control-text">I2C Example</span></div><div id="expander-content-522799775" class="expand-content expand-hidden"><hr><p>This example shows how to setup the Inter-Integrated Circuit (I2C) peripheral in the Giant Gecko using a <a href="http://www.eewiki.net/display/projects/EFM32+-+STK3700+Custom+Expansion+Board">custom expansion board</a> that interfaces with the STK3700.</p><p>An EEPROM memory IC loaded on the expansion board was used as the I2C slave device.&nbsp; The EEPROM was connected to I2C1 (Location #0) through PortC - PC[5:4].&nbsp; I2C1 was configured in master mode using standard speed (100kHz).&nbsp; The auto-acknowledge feature of the Giant Gecko I2C was used for this demo to simplify the code.&nbsp; The EEPROM also has an active high "Write Protect" pin connected to PC3 which needs to be driven low to enable memory writes.</p><p>The example code below includes multiple functions involving interaction with the EEPROM:</p><ul><li>read_byte()&nbsp; -&nbsp; reads the contents of the specified address in memory</li><li>write_byte()&nbsp; -&nbsp; writes a byte of data to a specific address in memory</li><li>read_block()&nbsp; -&nbsp; performs a sequential read of an entire block (256 bytes) of memory</li><li>write_page()&nbsp; -&nbsp; writes up to 16 bytes of memory in a single I2C transaction</li><li>chip_is_busy()&nbsp; -&nbsp; checks if the EEPROM is able to communicate</li></ul><p>USART1 was setup to print responses in a terminal program.&nbsp; USART1 was setup in asynchronous mode at Location #1 with the same serial settings as the examples above.&nbsp; USART1 was connected to the PC using TTL-232R-3V3 smart cable from FTDI.</p><p>To provide a high accuracy clock for UART communication, the 48MHz crystal oscillator was used with a /2 prescaler to generate a 24MHz System Clock, just like the "HF XTAL Oscillator" example above.&nbsp;</p><p>Below is a screenshot of the terminal window while running this demo application.&nbsp; The following screenshot shows a portion of Block 1 after the <em>write_byte()</em> function was used to write 0x23 to address 0x02 of Block 1.&nbsp; The <em>page_write()</em> function was used to write 0x00 to each byte of Page 1 as seen in the terminal window below.</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="./Getting Started with EFM32 Giant Gecko ARM Cortex-M3 - Microcontroller - eewiki_files/I2C_Ex_Screenshot.jpg" data-image-src="/download/attachments/27754907/I2C_Ex_Screenshot.jpg?version=1&amp;modificationDate=1393390493923&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="30868508" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="I2C_Ex_Screenshot.jpg" data-base-url="https://eewiki.net" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="27754907" data-linked-resource-container-version="65"></span></p><p>&nbsp;</p><div id="expander-553830978" class="expand-container conf-macro output-block" data-hasbody="true" data-macro-name="expand"><div id="expander-control-553830978" class="expand-control"><span class="expand-control-icon icon">&nbsp;</span><span class="expand-control-text">I2C Example Using Direct Register Access</span></div><div id="expander-content-553830978" class="expand-content expand-hidden"><p>The following code block demonstrates I2C communication using direct register access.&nbsp; For the following code to work, the 'em_system.c' file needs to be added to the workspace.</p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<div><div id="highlighter_268015" class="syntaxhighlighter sh-confluence nogutter  cpp"><div class="toolbar"><span><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="cpp comments">// All of the functions involving direct I2C communication with the EEPROM wait</code></div><div class="line number2 index1 alt1"><code class="cpp comments">// for the I2C bus to become idle and then wait until the EEPROM is ready to </code></div><div class="line number3 index2 alt2"><code class="cpp comments">// communicate. All "write" functions wait until the EEPROM completes the memory</code></div><div class="line number4 index3 alt1"><code class="cpp comments">// write before returning.</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="cpp preprocessor">#include&nbsp; "efm32gg990f1024.h"</code></div><div class="line number7 index6 alt2"><code class="cpp preprocessor">#include&nbsp; "em_chip.h"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // required for CHIP_Init() function</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="cpp preprocessor">#define&nbsp;&nbsp; I2C_PORT&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp; // gpioPortC</code></div><div class="line number10 index9 alt1"><code class="cpp preprocessor">#define&nbsp;&nbsp; I2C_SDA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp;&nbsp;&nbsp; // PC4</code></div><div class="line number11 index10 alt2"><code class="cpp preprocessor">#define&nbsp;&nbsp; I2C_SCLK&nbsp;&nbsp;&nbsp;&nbsp; 5&nbsp;&nbsp;&nbsp;&nbsp; // PC5</code></div><div class="line number12 index11 alt1"><code class="cpp preprocessor">#define&nbsp;&nbsp; I2C_WP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp;&nbsp;&nbsp; // PC3 - Write protect pin for EEPROM IC</code></div><div class="line number13 index12 alt2"><code class="cpp preprocessor">#define&nbsp;&nbsp; UART_PORT&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp;&nbsp;&nbsp; // gpioPortD (USART location #1: PD0 and PD1)</code></div><div class="line number14 index13 alt1"><code class="cpp preprocessor">#define&nbsp;&nbsp; UART_TX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; // UART TX: PD0</code></div><div class="line number15 index14 alt2"><code class="cpp preprocessor">#define&nbsp;&nbsp; LED_PORT&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp; // gpioPortB</code></div><div class="line number16 index15 alt1"><code class="cpp preprocessor">#define&nbsp;&nbsp; LED_PIN0&nbsp;&nbsp;&nbsp;&nbsp; 11&nbsp;&nbsp;&nbsp; // LED0: PB11</code></div><div class="line number17 index16 alt2"><code class="cpp preprocessor">#define&nbsp;&nbsp; LED_PIN1&nbsp;&nbsp;&nbsp;&nbsp; 12&nbsp;&nbsp;&nbsp; // LED1: PB12</code></div><div class="line number18 index17 alt1"><code class="cpp preprocessor">#define&nbsp;&nbsp; BLOCK_SIZE&nbsp;&nbsp; 256&nbsp;&nbsp; // 256 bytes per block</code></div><div class="line number19 index18 alt2"><code class="cpp preprocessor">#define&nbsp;&nbsp; PAGE_SIZE&nbsp;&nbsp;&nbsp; 16&nbsp;&nbsp;&nbsp; // 16 bytes per page</code></div><div class="line number20 index19 alt1">&nbsp;</div><div class="line number21 index20 alt2"><code class="cpp comments">// Functions involving direct I2C communication with EEPROM</code></div><div class="line number22 index21 alt1"><code class="cpp plain">uint8_t read_byte(uint8_t memory_block, uint8_t address, uint8_t* response);</code></div><div class="line number23 index22 alt2"><code class="cpp plain">uint8_t write_byte(uint8_t memory_block, uint8_t address, uint8_t data);</code></div><div class="line number24 index23 alt1"><code class="cpp plain">uint8_t read_block(uint8_t memory_block, uint8_t buffer[], uint16_t buffer_size);</code></div><div class="line number25 index24 alt2"><code class="cpp plain">uint8_t write_page(uint8_t memory_block, uint8_t page_num, uint8_t data[], uint8_t page_size);</code></div><div class="line number26 index25 alt1"><code class="cpp plain">uint8_t chip_is_busy(</code><code class="cpp keyword bold">void</code><code class="cpp plain">);</code></div><div class="line number27 index26 alt2">&nbsp;</div><div class="line number28 index27 alt1"><code class="cpp comments">// Higher level functions that implement the I2C functions above</code></div><div class="line number29 index28 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">display_block(uint8_t memory_block);</code></div><div class="line number30 index29 alt1"><code class="cpp keyword bold">void</code> <code class="cpp plain">block_erase(uint8_t memory_block);</code></div><div class="line number31 index30 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">check_error_status(uint8_t status);</code></div><div class="line number32 index31 alt1">&nbsp;</div><div class="line number33 index32 alt2"><code class="cpp comments">// Functions involving UART communication with terminal (PC) program</code></div><div class="line number34 index33 alt1"><code class="cpp keyword bold">void</code> <code class="cpp plain">print_byte(uint8_t byte);</code></div><div class="line number35 index34 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">print_byte_setup(uint8_t byte);</code></div><div class="line number36 index35 alt1">&nbsp;</div><div class="line number37 index36 alt2"><code class="cpp comments">// Global variable</code></div><div class="line number38 index37 alt1"><code class="cpp plain">uint8_t print_byte_array[4] = { 0x30, 0x78, 0x20, 0x20 }; </code><code class="cpp comments">// array for displaying bytes one nibble at a time</code></div><div class="line number39 index38 alt2">&nbsp;</div><div class="line number40 index39 alt1"><code class="cpp comments">// Error strings</code></div><div class="line number41 index40 alt2"><code class="cpp color1 bold">char</code> <code class="cpp plain">error_message1[] = </code><code class="cpp string">"Error - unsupported block number\n\r"</code><code class="cpp plain">;</code></div><div class="line number42 index41 alt1"><code class="cpp color1 bold">char</code> <code class="cpp plain">error_message2[] = </code><code class="cpp string">"Error - buffer/array size unacceptable\n\r"</code><code class="cpp plain">;</code></div><div class="line number43 index42 alt2"><code class="cpp color1 bold">char</code> <code class="cpp plain">error_message3[] = </code><code class="cpp string">"Error - unsupported page number\n\r"</code><code class="cpp plain">;</code></div><div class="line number44 index43 alt1"><code class="cpp color1 bold">char</code> <code class="cpp plain">error_message4[] = </code><code class="cpp string">"Error - transmitted/received NACK, expected ACK\n\r"</code><code class="cpp plain">;</code></div><div class="line number45 index44 alt2"><code class="cpp color1 bold">char</code> <code class="cpp plain">error_message5[] = </code><code class="cpp string">"Error - unkown cause of error\n\r"</code><code class="cpp plain">;</code></div><div class="line number46 index45 alt1">&nbsp;</div><div class="line number47 index46 alt2"><code class="cpp color1 bold">int</code> <code class="cpp plain">main() {</code></div><div class="line number48 index47 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CHIP_Init(); </code><code class="cpp comments">// This function addresses some chip errata and should be called at the start of every EFM32 application (need em_system.c)</code></div><div class="line number49 index48 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number50 index49 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">char</code> <code class="cpp plain">header[] = </code><code class="cpp string">"\n\rEFM32 Giant Gecko - I2C Example\n\r"</code><code class="cpp plain">;</code></div><div class="line number51 index50 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint8_t response_byte;</code></div><div class="line number52 index51 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint8_t status;</code></div><div class="line number53 index52 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint8_t page_data[PAGE_SIZE];</code></div><div class="line number54 index53 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint8_t i;</code></div><div class="line number55 index54 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number56 index55 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Clear the page_data array</code></div><div class="line number57 index56 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(i=0; i&lt;</code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">(page_data); i++) {</code></div><div class="line number58 index57 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">page_data[i] = 0;</code></div><div class="line number59 index58 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number60 index59 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number61 index60 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Setup Clock Tree</code></div><div class="line number62 index61 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU-&gt;CTRL |= (1 &lt;&lt; 14);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Set HF clock divider to /2 to keep core frequency &lt;32MHz</code></div><div class="line number63 index62 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU-&gt;OSCENCMD |= 0x4;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Enable XTAL Oscillator</code></div><div class="line number64 index63 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(! (CMU-&gt;STATUS &amp; 0x8) );&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Wait for XTAL osc to stabilize</code></div><div class="line number65 index64 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU-&gt;CMD = 0x2;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Select HF XTAL osc as system clock source. 48MHz XTAL, but we divided the system clock by 2, therefore our HF clock should be 24MHz</code></div><div class="line number66 index65 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">CMU-&gt;HFPERCLKEN0 = (1 &lt;&lt; 13) | (1 &lt;&lt; 12) | (1 &lt;&lt; 1); </code><code class="cpp comments">// Enable GPIO, USART1, and I2C1 peripheral clocks</code></div><div class="line number67 index66 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number68 index67 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Configure GPIO</code></div><div class="line number69 index68 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO-&gt;P[I2C_PORT].MODEL = (11 &lt;&lt; 20) | (11 &lt;&lt; 16) | (4 &lt;&lt; 12);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Configure PC4 and PC5 as open drain output, PC3 as push-pull output</code></div><div class="line number70 index69 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO-&gt;P[I2C_PORT].DOUTSET = (1 &lt;&lt; I2C_SCLK) | (1 &lt;&lt; I2C_SDA) | (1 &lt;&lt; I2C_WP); </code><code class="cpp comments">// Initialize PC3, PC4, and PC5 high</code></div><div class="line number71 index70 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO-&gt;P[UART_PORT].MODEL = (1 &lt;&lt; 4) | (4 &lt;&lt; 0);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Configure PD0 as push-pull output, PD1 as input</code></div><div class="line number72 index71 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO-&gt;P[UART_PORT].DOUTSET = (1 &lt;&lt; UART_TX);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Initialize PD0 high since UART TX idles high (otherwise glitches can occur)</code></div><div class="line number73 index72 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO-&gt;P[LED_PORT].MODEH = (4 &lt;&lt; 16) | (4 &lt;&lt; 12);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Configure PB11 and PB12 as push-pull outputs</code></div><div class="line number74 index73 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number75 index74 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Configure UART</code></div><div class="line number76 index75 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Setup UART Port for asynch mode, frame format 8-none-1-none</code></div><div class="line number77 index76 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">USART1-&gt;CLKDIV = (152 &lt;&lt; 6);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// 152 will give 38400 baud rate (using 16-bit oversampling with 24MHz peripheral clock)</code></div><div class="line number78 index77 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">USART1-&gt;CMD = (1 &lt;&lt; 11) | (1 &lt;&lt; 10) | (1 &lt;&lt; 2) | (1 &lt;&lt; 0); </code><code class="cpp comments">// Clear RX/TX buffers and shif regs, Enable Transmitter and Receiver</code></div><div class="line number79 index78 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">USART1-&gt;IFC = 0x1FF9;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// clear all USART interrupt flags</code></div><div class="line number80 index79 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">USART1-&gt;ROUTE = 0x103;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Enable TX and RX pins, use location #1 (UART TX and RX located at PD0 and PD1, see EFM32GG990 datasheet for details)</code></div><div class="line number81 index80 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number82 index81 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Configure I2C</code></div><div class="line number83 index82 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Standard speed, Master mode</code></div><div class="line number84 index83 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">I2C1-&gt;CTRL = (1 &lt;&lt; 2) | (1 &lt;&lt; 0);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// auto acknowledge, enable I2C module</code></div><div class="line number85 index84 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">I2C1-&gt;CMD = (1 &lt;&lt; 7) | (1 &lt;&lt; 6) | (1 &lt;&lt; 5); </code><code class="cpp comments">// Clear pending commands, clear TX buffer and shift reg, issue abort command to clear bus busy bit</code></div><div class="line number86 index85 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">I2C1-&gt;CLKDIV = 29;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// allows for 100kHz I2C clock</code></div><div class="line number87 index86 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">I2C1-&gt;ROUTE = 0x3;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// use location #0, enable SDA and SCK pins</code></div><div class="line number88 index87 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number89 index88 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Print Startup Header</code></div><div class="line number90 index89 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(i=0; i&lt;</code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">(header); i++) {</code></div><div class="line number91 index90 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte(header[i]);</code></div><div class="line number92 index91 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number93 index92 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number94 index93 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">block_erase(1);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Erase entire block of memory</code></div><div class="line number95 index94 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">display_block(1);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Dump contents of block into terminal window</code></div><div class="line number96 index95 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number97 index96 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">status = write_byte(1, 0x02, 0x23);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Write a data byte to a specific address in memory</code></div><div class="line number98 index97 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">check_error_status(status);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Check for errors</code></div><div class="line number99 index98 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number100 index99 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">status = read_byte(1, 0x02, &amp;response_byte); </code><code class="cpp comments">// Read a specific address location, store in 'response_byte'</code></div><div class="line number101 index100 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">print_byte_setup(response_byte);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Print the response in the terminal window</code></div><div class="line number102 index101 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(i=0; i&lt;4; i++) {</code></div><div class="line number103 index102 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte(print_byte_array[i]);</code></div><div class="line number104 index103 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number105 index104 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number106 index105 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">status = write_page(1, 0x1, page_data, </code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">(page_data)); </code><code class="cpp comments">// Write an entire page of memory</code></div><div class="line number107 index106 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">check_error_status(status);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Check for errors</code></div><div class="line number108 index107 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number109 index108 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">display_block(1);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// Dump contents of block into terminal window</code></div><div class="line number110 index109 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number111 index110 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(1);</code></div><div class="line number112 index111 alt1"><code class="cpp plain">}</code></div><div class="line number113 index112 alt2">&nbsp;</div><div class="line number114 index113 alt1"><code class="cpp comments">// This function writes a single byte of 'data' to the specified 'address' of the</code></div><div class="line number115 index114 alt2"><code class="cpp comments">// specified memory block. Returns 0 if successful, 1 if unsupported memory block.</code></div><div class="line number116 index115 alt1"><code class="cpp plain">uint8_t write_byte(uint8_t memory_block, uint8_t address, uint8_t data) {</code></div><div class="line number117 index116 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Initial parameter check</code></div><div class="line number118 index117 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(memory_block &gt; 3) { </code><code class="cpp keyword bold">return</code> <code class="cpp plain">1; } </code><code class="cpp comments">// unsupported block number</code></div><div class="line number119 index118 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number120 index119 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Control variable </code></div><div class="line number121 index120 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint8_t block_mask = 0x03; </code><code class="cpp comments">// 24AA08 only has 4 block to choose from</code></div><div class="line number122 index121 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Build control byte (see 24AA08 datasheet for details)</code></div><div class="line number123 index122 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint8_t control_byte = (0xA0 | ((memory_block &amp; block_mask) &lt;&lt; 1));</code></div><div class="line number124 index123 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number125 index124 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Drive WP pin low to allow memory write</code></div><div class="line number126 index125 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO-&gt;P[I2C_PORT].DOUTCLR = (1 &lt;&lt; I2C_WP);</code></div><div class="line number127 index126 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number128 index127 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(chip_is_busy());&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// wait until EEPROM is ready to communicate</code></div><div class="line number129 index128 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(I2C1-&gt;STATE &amp; 0x1);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// wait for bus to become idle</code></div><div class="line number130 index129 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">I2C1-&gt;CMD |= 0x1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// send START command</code></div><div class="line number131 index130 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!(I2C1-&gt;STATUS &amp; (1 &lt;&lt; 7)));&nbsp;&nbsp; </code><code class="cpp comments">// wait for TX buffer to empty</code></div><div class="line number132 index131 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">I2C1-&gt;TXDATA = control_byte;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// write control byte to TX buffer</code></div><div class="line number133 index132 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!(I2C1-&gt;STATUS &amp; (1 &lt;&lt; 7)));&nbsp;&nbsp; </code><code class="cpp comments">// wait for TX buffer to empty</code></div><div class="line number134 index133 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!((I2C1-&gt;STATE &gt;&gt; 4) == 0x9)); </code><code class="cpp comments">// wait for address ACK/NACK and bushold</code></div><div class="line number135 index134 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(I2C1-&gt;STATE &amp; 0x8) { </code><code class="cpp keyword bold">return</code> <code class="cpp plain">4; }&nbsp; </code><code class="cpp comments">// NACK: lost communication</code></div><div class="line number136 index135 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">I2C1-&gt;TXDATA = address;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// write address to TX buffer</code></div><div class="line number137 index136 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!(I2C1-&gt;STATUS &amp; (1 &lt;&lt; 7)));&nbsp;&nbsp; </code><code class="cpp comments">// wait for TX buffer to empty</code></div><div class="line number138 index137 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!((I2C1-&gt;STATE &gt;&gt; 4) == 0xD)); </code><code class="cpp comments">// wait for data ACK/NACK and bushold</code></div><div class="line number139 index138 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(I2C1-&gt;STATE &amp; 0x8) { </code><code class="cpp keyword bold">return</code> <code class="cpp plain">4; }&nbsp; </code><code class="cpp comments">// NACK: lost communication</code></div><div class="line number140 index139 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">I2C1-&gt;TXDATA = data;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// write data to TX buffer</code></div><div class="line number141 index140 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!(I2C1-&gt;STATUS &amp; (1 &lt;&lt; 7)));&nbsp;&nbsp; </code><code class="cpp comments">// wait for TX buffer to empty</code></div><div class="line number142 index141 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!((I2C1-&gt;STATE &gt;&gt; 4) == 0xD)); </code><code class="cpp comments">// wait for data ACK/NACK and bushold</code></div><div class="line number143 index142 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(I2C1-&gt;STATE &amp; 0x8) { </code><code class="cpp keyword bold">return</code> <code class="cpp plain">4; }&nbsp; </code><code class="cpp comments">// NACK: lost communication</code></div><div class="line number144 index143 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">I2C1-&gt;CMD |= 0x2;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// send STOP command</code></div><div class="line number145 index144 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number146 index145 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(chip_is_busy());&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// wait until EEPROM has completed the memory write</code></div><div class="line number147 index146 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number148 index147 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO-&gt;P[I2C_PORT].DOUTSET = (1 &lt;&lt; I2C_WP); </code><code class="cpp comments">// drive WP pin high to protect memory</code></div><div class="line number149 index148 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number150 index149 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// successful transfer</code></div><div class="line number151 index150 alt2"><code class="cpp plain">}</code></div><div class="line number152 index151 alt1">&nbsp;</div><div class="line number153 index152 alt2"><code class="cpp comments">// This function writes up to 16 bytes of memory with the data contained in the 'data[]' </code></div><div class="line number154 index153 alt1"><code class="cpp comments">// array. Returns 0 if successful, 1 if unsupported memory block, 2 if 'data[]' array is </code></div><div class="line number155 index154 alt2"><code class="cpp comments">// too large, 3 if the number of specified pages exceeds the number available in the block.</code></div><div class="line number156 index155 alt1"><code class="cpp plain">uint8_t write_page(uint8_t memory_block, uint8_t page_num, uint8_t data[], uint8_t page_size) {</code></div><div class="line number157 index156 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Initial parameter check</code></div><div class="line number158 index157 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(memory_block &gt; 3) { </code><code class="cpp keyword bold">return</code> <code class="cpp plain">1; } </code><code class="cpp comments">// unsupported memory block</code></div><div class="line number159 index158 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(page_size &gt; 16) { </code><code class="cpp keyword bold">return</code> <code class="cpp plain">2; }&nbsp;&nbsp; </code><code class="cpp comments">// data[] array is too large</code></div><div class="line number160 index159 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(page_num &gt; 0x0F) { </code><code class="cpp keyword bold">return</code> <code class="cpp plain">3; }&nbsp; </code><code class="cpp comments">// only 16 pages available per block</code></div><div class="line number161 index160 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number162 index161 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Control variables</code></div><div class="line number163 index162 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint8_t block_mask = 0x03;</code></div><div class="line number164 index163 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint8_t i;</code></div><div class="line number165 index164 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number166 index165 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Build control byte</code></div><div class="line number167 index166 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint8_t control_byte = (0xA0 | ((memory_block &amp; block_mask) &lt;&lt; 1));</code></div><div class="line number168 index167 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number169 index168 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Locate page offset</code></div><div class="line number170 index169 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint8_t address = 16*page_num;</code></div><div class="line number171 index170 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number172 index171 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Drive WP pin low to allow memory write</code></div><div class="line number173 index172 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO-&gt;P[I2C_PORT].DOUTCLR = (1 &lt;&lt; I2C_WP);</code></div><div class="line number174 index173 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number175 index174 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(chip_is_busy());&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// wait until EEPROM is ready to communicate</code></div><div class="line number176 index175 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(I2C1-&gt;STATE &amp; 0x1);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// wait for bus to become idle</code></div><div class="line number177 index176 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">I2C1-&gt;CMD |= 0x1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// send START command</code></div><div class="line number178 index177 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!(I2C1-&gt;STATUS &amp; (1 &lt;&lt; 7)));&nbsp;&nbsp; </code><code class="cpp comments">// wait for TX buffer to empty</code></div><div class="line number179 index178 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">I2C1-&gt;TXDATA = control_byte;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// write control byte to TX buffer</code></div><div class="line number180 index179 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!(I2C1-&gt;STATUS &amp; (1 &lt;&lt; 7)));&nbsp;&nbsp; </code><code class="cpp comments">// wait for TX buffer to empty</code></div><div class="line number181 index180 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!((I2C1-&gt;STATE &gt;&gt; 4) == 0x9)); </code><code class="cpp comments">// wait for address ACK/NACK and bushold</code></div><div class="line number182 index181 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(I2C1-&gt;STATE &amp; 0x8) { </code><code class="cpp keyword bold">return</code> <code class="cpp plain">4; }&nbsp; </code><code class="cpp comments">// NACK: lost communication</code></div><div class="line number183 index182 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">I2C1-&gt;TXDATA = address;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// write address to TX buffer</code></div><div class="line number184 index183 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!(I2C1-&gt;STATUS &amp; (1 &lt;&lt; 7)));&nbsp;&nbsp; </code><code class="cpp comments">// wait for TX buffer to empty</code></div><div class="line number185 index184 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!((I2C1-&gt;STATE &gt;&gt; 4) == 0xD)); </code><code class="cpp comments">// wait for data ACK/NACK and bushold</code></div><div class="line number186 index185 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(I2C1-&gt;STATE &amp; 0x8) { </code><code class="cpp keyword bold">return</code> <code class="cpp plain">4; }&nbsp; </code><code class="cpp comments">// NACK: lost communication</code></div><div class="line number187 index186 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number188 index187 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(i=0; i&lt;page_size; i++) {</code></div><div class="line number189 index188 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">I2C1-&gt;TXDATA = data[i];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// write data to TX buffer</code></div><div class="line number190 index189 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!(I2C1-&gt;STATUS &amp; (1 &lt;&lt; 7)));&nbsp;&nbsp; </code><code class="cpp comments">// wait for TX buffer to empty</code></div><div class="line number191 index190 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!((I2C1-&gt;STATE &gt;&gt; 4) == 0xD)); </code><code class="cpp comments">// wait for data ACK/NACK and bushold</code></div><div class="line number192 index191 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(I2C1-&gt;STATE &amp; 0x8) { </code><code class="cpp keyword bold">return</code> <code class="cpp plain">4; }&nbsp; </code><code class="cpp comments">// NACK: lost communication</code></div><div class="line number193 index192 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number194 index193 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">I2C1-&gt;CMD |= 0x2;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// send STOP command</code></div><div class="line number195 index194 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number196 index195 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(chip_is_busy()); </code><code class="cpp comments">// wait until EEPROM has completed the memory write</code></div><div class="line number197 index196 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number198 index197 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">GPIO-&gt;P[I2C_PORT].DOUTSET = (1 &lt;&lt; I2C_WP); </code><code class="cpp comments">// drive WP pin high to protect memory</code></div><div class="line number199 index198 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number200 index199 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// successful transfer</code></div><div class="line number201 index200 alt2"><code class="cpp plain">}</code></div><div class="line number202 index201 alt1">&nbsp;</div><div class="line number203 index202 alt2"><code class="cpp comments">// This function reads the contents of 'address' within the specified memory block.</code></div><div class="line number204 index203 alt1"><code class="cpp comments">// The contents are stored in 'response'. Returns 0 if successful, 1 if unsupported</code></div><div class="line number205 index204 alt2"><code class="cpp comments">// memory block.</code></div><div class="line number206 index205 alt1"><code class="cpp plain">uint8_t read_byte(uint8_t memory_block, uint8_t address, uint8_t* response) {</code></div><div class="line number207 index206 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Initial parameter check</code></div><div class="line number208 index207 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(memory_block &gt; 3) { </code><code class="cpp keyword bold">return</code> <code class="cpp plain">1; } </code><code class="cpp comments">// unsupported block number</code></div><div class="line number209 index208 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number210 index209 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Control variable</code></div><div class="line number211 index210 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint8_t block_mask = 0x03; </code><code class="cpp comments">// 24AA08 only has 4 block to choose from</code></div><div class="line number212 index211 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number213 index212 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Build control bytes (2 for reading a specific address)</code></div><div class="line number214 index213 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint8_t control_byte[2] = { (0xA0 | ((memory_block &amp; block_mask) &lt;&lt; 1)), </code></div><div class="line number215 index214 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">(0xA0 | ((memory_block &amp; block_mask) &lt;&lt; 1) | 0x1) }; </code></div><div class="line number216 index215 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number217 index216 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">I2C1-&gt;CMD &amp;= ~(0x4);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// clear TX buffer</code></div><div class="line number218 index217 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">*response = I2C1-&gt;RXDATA;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// flush receive buffer</code></div><div class="line number219 index218 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number220 index219 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(chip_is_busy());&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// wait until EEPROM is ready to communicate</code></div><div class="line number221 index220 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(I2C1-&gt;STATE &amp; 0x1);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// wait for bus to become idle</code></div><div class="line number222 index221 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">I2C1-&gt;CMD |= 0x1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// send START command</code></div><div class="line number223 index222 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!(I2C1-&gt;STATUS &amp; (1 &lt;&lt; 7)));&nbsp;&nbsp; </code><code class="cpp comments">// wait for TX buffer to empty</code></div><div class="line number224 index223 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">I2C1-&gt;TXDATA = control_byte[0];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// write control byte[0] to TX buffer</code></div><div class="line number225 index224 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!(I2C1-&gt;STATUS &amp; (1 &lt;&lt; 7)));&nbsp;&nbsp; </code><code class="cpp comments">// wait for TX buffer to empty</code></div><div class="line number226 index225 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!((I2C1-&gt;STATE &gt;&gt; 4) == 0x9)); </code><code class="cpp comments">// wait for address ACK/NACK and bushold</code></div><div class="line number227 index226 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(I2C1-&gt;STATE &amp; 0x8) { </code><code class="cpp keyword bold">return</code> <code class="cpp plain">4; }&nbsp; </code><code class="cpp comments">// NACK: lost communication</code></div><div class="line number228 index227 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">I2C1-&gt;TXDATA = address;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// write address to TX buffer</code></div><div class="line number229 index228 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!(I2C1-&gt;STATUS &amp; (1 &lt;&lt; 7)));&nbsp;&nbsp; </code><code class="cpp comments">// wait for TX buffer to empty</code></div><div class="line number230 index229 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!((I2C1-&gt;STATE &gt;&gt; 4) == 0xD)); </code><code class="cpp comments">// wait for data ACK/NACK and bushold</code></div><div class="line number231 index230 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(I2C1-&gt;STATE &amp; 0x8) { </code><code class="cpp keyword bold">return</code> <code class="cpp plain">4; }&nbsp; </code><code class="cpp comments">// NACK: lost communication</code></div><div class="line number232 index231 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">I2C1-&gt;CMD |= 0x1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// send Repeated START command</code></div><div class="line number233 index232 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">I2C1-&gt;TXDATA = control_byte[1];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// write control byte[1] to TX buffer</code></div><div class="line number234 index233 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!(I2C1-&gt;STATUS &amp; (1 &lt;&lt; 7)));&nbsp;&nbsp; </code><code class="cpp comments">// wait for TX buffer to empty</code></div><div class="line number235 index234 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!((I2C1-&gt;STATE &gt;&gt; 4) == 0x8)); </code><code class="cpp comments">// wait for address ACK/NACK (no bushold)</code></div><div class="line number236 index235 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(I2C1-&gt;STATE &amp; 0x8) { </code><code class="cpp keyword bold">return</code> <code class="cpp plain">4; }&nbsp; </code><code class="cpp comments">// NACK: lost communication</code></div><div class="line number237 index236 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!(I2C1-&gt;STATUS &amp; (1 &lt;&lt; 8)));&nbsp;&nbsp; </code><code class="cpp comments">// wait for data to arrive</code></div><div class="line number238 index237 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">*response = I2C1-&gt;RXDATA;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// read rx buffer and store in 'response'</code></div><div class="line number239 index238 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">I2C1-&gt;CMD |= 0x8;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// send NACK</code></div><div class="line number240 index239 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!((I2C1-&gt;STATE &gt;&gt; 4) == 0xD)); </code><code class="cpp comments">// wait for data ACK/NACK and bushold</code></div><div class="line number241 index240 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">I2C1-&gt;CMD |= 0x2;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// send STOP command</code></div><div class="line number242 index241 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number243 index242 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// successful transfer</code></div><div class="line number244 index243 alt1"><code class="cpp plain">}</code></div><div class="line number245 index244 alt2">&nbsp;</div><div class="line number246 index245 alt1"><code class="cpp comments">// This function reads the specified memory block and stores the contents in 'buffer[]'.</code></div><div class="line number247 index246 alt2"><code class="cpp comments">// Returns 0 if successful, 1 if unsupported memory block, 2 if buffer is not large</code></div><div class="line number248 index247 alt1"><code class="cpp comments">// enough to store entire contents of the block.</code></div><div class="line number249 index248 alt2"><code class="cpp plain">uint8_t read_block(uint8_t memory_block, uint8_t buffer[], uint16_t buffer_size) {</code></div><div class="line number250 index249 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// Initial parameter check</code></div><div class="line number251 index250 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(memory_block &gt; 3) { </code><code class="cpp keyword bold">return</code> <code class="cpp plain">1; }&nbsp; </code><code class="cpp comments">// unsupported block number</code></div><div class="line number252 index251 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(buffer_size &lt; 256) { </code><code class="cpp keyword bold">return</code> <code class="cpp plain">2; } </code><code class="cpp comments">// buffer is not large enough to store entire contents</code></div><div class="line number253 index252 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number254 index253 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Control variables</code></div><div class="line number255 index254 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint8_t block_mask = 0x03; </code><code class="cpp comments">// 24AA08 only has 4 block to choose from</code></div><div class="line number256 index255 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint8_t i;</code></div><div class="line number257 index256 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number258 index257 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// build control bytes (2 for reading specific address)</code></div><div class="line number259 index258 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint8_t control_byte[2] = { (0xA0 | ((memory_block &amp; block_mask) &lt;&lt; 1)), </code></div><div class="line number260 index259 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">(0xA0 | ((memory_block &amp; block_mask) &lt;&lt; 1) | 0x1) };</code></div><div class="line number261 index260 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number262 index261 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">I2C1-&gt;CMD &amp;= ~(0x4);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// clear TX buffer</code></div><div class="line number263 index262 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">buffer[0] = I2C1-&gt;RXDATA;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// flush receive buffer</code></div><div class="line number264 index263 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number265 index264 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(chip_is_busy());&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// wait until EEPROM is ready to communicate</code></div><div class="line number266 index265 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(I2C1-&gt;STATE &amp; 0x1);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// wait for bus to become idle</code></div><div class="line number267 index266 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">I2C1-&gt;CMD |= 0x1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// send START command</code></div><div class="line number268 index267 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!(I2C1-&gt;STATUS &amp; (1 &lt;&lt; 7)));&nbsp;&nbsp; </code><code class="cpp comments">// wait for TX buffer to empty</code></div><div class="line number269 index268 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">I2C1-&gt;TXDATA = control_byte[0];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// write control byte[0] to TX buffer</code></div><div class="line number270 index269 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!(I2C1-&gt;STATUS &amp; (1 &lt;&lt; 7)));&nbsp;&nbsp; </code><code class="cpp comments">// wait for TX buffer to empty</code></div><div class="line number271 index270 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!((I2C1-&gt;STATE &gt;&gt; 4) == 0x9)); </code><code class="cpp comments">// wait for address ACK/NACK and bushold</code></div><div class="line number272 index271 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(I2C1-&gt;STATE &amp; 0x8) { </code><code class="cpp keyword bold">return</code> <code class="cpp plain">4; }&nbsp; </code><code class="cpp comments">// NACK: lost communication</code></div><div class="line number273 index272 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">I2C1-&gt;TXDATA = 0x00;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// write address to TX buffer</code></div><div class="line number274 index273 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!(I2C1-&gt;STATUS &amp; (1 &lt;&lt; 7)));&nbsp;&nbsp; </code><code class="cpp comments">// wait for TX buffer to empty</code></div><div class="line number275 index274 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!((I2C1-&gt;STATE &gt;&gt; 4) == 0xD)); </code><code class="cpp comments">// wait for data ACK/NACK and bushold</code></div><div class="line number276 index275 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(I2C1-&gt;STATE &amp; 0x8) { </code><code class="cpp keyword bold">return</code> <code class="cpp plain">4; }&nbsp; </code><code class="cpp comments">// NACK: lost communication</code></div><div class="line number277 index276 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">I2C1-&gt;CMD |= 0x1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// send Repeated START command</code></div><div class="line number278 index277 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">I2C1-&gt;TXDATA = control_byte[1];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// write control byte[1] to TX buffer</code></div><div class="line number279 index278 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!(I2C1-&gt;STATUS &amp; (1 &lt;&lt; 7)));&nbsp;&nbsp; </code><code class="cpp comments">// wait for TX buffer to empty</code></div><div class="line number280 index279 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!((I2C1-&gt;STATE &gt;&gt; 4) == 0x8)); </code><code class="cpp comments">// wait for address ACK/NACK (no bushold)</code></div><div class="line number281 index280 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(i=0; i&lt;(buffer_size-1); i++) {</code></div><div class="line number282 index281 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!(I2C1-&gt;STATUS &amp; (1 &lt;&lt; 8)));&nbsp;&nbsp; </code><code class="cpp comments">// wait for data to arrive</code></div><div class="line number283 index282 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">buffer[i] = I2C1-&gt;RXDATA;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// read rx data and store in 'buffer'</code></div><div class="line number284 index283 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">I2C1-&gt;CMD |= (1 &lt;&lt; 2);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// send ACK</code></div><div class="line number285 index284 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!((I2C1-&gt;STATE &gt;&gt; 4) == 0xC)); </code><code class="cpp comments">// wait for data ACK/NACK (no bushold)</code></div><div class="line number286 index285 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number287 index286 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number288 index287 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!(I2C1-&gt;STATUS &amp; (1 &lt;&lt; 8)));&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// wait for final byte to arrive</code></div><div class="line number289 index288 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">buffer[buffer_size-1] = I2C1-&gt;RXDATA; </code><code class="cpp comments">// read rx data and store in 'buffer'</code></div><div class="line number290 index289 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">I2C1-&gt;CMD |= 0x8;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// send NACK</code></div><div class="line number291 index290 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!((I2C1-&gt;STATE &gt;&gt; 4) == 0xD));&nbsp; </code><code class="cpp comments">// wait for data ACK/NACK and bushold</code></div><div class="line number292 index291 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">I2C1-&gt;CMD |= 0x2;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// send STOP command</code></div><div class="line number293 index292 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// successful transfer</code></div><div class="line number294 index293 alt1"><code class="cpp plain">}</code></div><div class="line number295 index294 alt2">&nbsp;</div><div class="line number296 index295 alt1"><code class="cpp comments">// This function is used to check if the EEPROM is currently performing an </code></div><div class="line number297 index296 alt2"><code class="cpp comments">// internal write process. Returns 1 for busy, 0 for ready</code></div><div class="line number298 index297 alt1"><code class="cpp plain">uint8_t chip_is_busy(</code><code class="cpp keyword bold">void</code><code class="cpp plain">) {</code></div><div class="line number299 index298 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number300 index299 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(I2C1-&gt;STATE &amp; 0x1);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// wait for bus to become idle</code></div><div class="line number301 index300 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">I2C1-&gt;CMD |= 0x1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// send START command</code></div><div class="line number302 index301 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!(I2C1-&gt;STATUS &amp; (1 &lt;&lt; 7)));&nbsp;&nbsp; </code><code class="cpp comments">// wait for TX buffer to empty</code></div><div class="line number303 index302 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">I2C1-&gt;TXDATA = 0xA0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// write control byte to TX buffer</code></div><div class="line number304 index303 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!(I2C1-&gt;STATUS &amp; (1 &lt;&lt; 7)));&nbsp;&nbsp; </code><code class="cpp comments">// wait for TX buffer to empty</code></div><div class="line number305 index304 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(!((I2C1-&gt;STATE &gt;&gt; 4) == 0x9)); </code><code class="cpp comments">// wait for address ACK/NACK and bushold</code></div><div class="line number306 index305 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(I2C1-&gt;STATE &amp; 0x8){ </code><code class="cpp comments">// check for ACK/NACK (only valid if BUSHOLD is set)</code></div><div class="line number307 index306 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">I2C1-&gt;CMD |= 0x2;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// send STOP command</code></div><div class="line number308 index307 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// NACK received</code></div><div class="line number309 index308 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code><code class="cpp keyword bold">else</code><code class="cpp plain">{</code></div><div class="line number310 index309 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">I2C1-&gt;CMD |= 0x2;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// send STOP command</code></div><div class="line number311 index310 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// ACK received</code></div><div class="line number312 index311 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number313 index312 alt2"><code class="cpp plain">}</code></div><div class="line number314 index313 alt1">&nbsp;</div><div class="line number315 index314 alt2"><code class="cpp comments">// This function erases a page (16 bytes) of memory at a time by writing each byte '0xFF'. </code></div><div class="line number316 index315 alt1"><code class="cpp keyword bold">void</code> <code class="cpp plain">block_erase(uint8_t memory_block) {</code></div><div class="line number317 index316 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint8_t j;</code></div><div class="line number318 index317 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint8_t page_data[16];</code></div><div class="line number319 index318 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number320 index319 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// load array with 0xFF</code></div><div class="line number321 index320 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(j=0; j&lt;</code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">(page_data); j++) { </code></div><div class="line number322 index321 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">page_data[j] = 0xFF;</code></div><div class="line number323 index322 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number324 index323 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number325 index324 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// write the array to all 16 pages of the block</code></div><div class="line number326 index325 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(j=0; j&lt;16; j++) {</code></div><div class="line number327 index326 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">write_page(memory_block, j, page_data, </code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">(page_data));</code></div><div class="line number328 index327 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number329 index328 alt2"><code class="cpp plain">}</code></div><div class="line number330 index329 alt1">&nbsp;</div><div class="line number331 index330 alt2"><code class="cpp comments">// This function reads the specified memory block and displays the contents in the terminal window</code></div><div class="line number332 index331 alt1"><code class="cpp keyword bold">void</code> <code class="cpp plain">display_block(uint8_t memory_block) {</code></div><div class="line number333 index332 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number334 index333 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Header Strings</code></div><div class="line number335 index334 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">char</code> <code class="cpp plain">block_header[]&nbsp;&nbsp; = </code><code class="cpp string">"\n\rBlock "</code><code class="cpp plain">;</code></div><div class="line number336 index335 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">char</code> <code class="cpp plain">mem_data_header[] = </code><code class="cpp string">"| Page | Address | Data |\n\r"</code><code class="cpp plain">;</code></div><div class="line number337 index336 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">char</code> <code class="cpp plain">dash_line[]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = </code><code class="cpp string">" ------ --------- ------\n\r"</code><code class="cpp plain">;</code></div><div class="line number338 index337 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number339 index338 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Control variables</code></div><div class="line number340 index339 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint8_t rx_buffer[BLOCK_SIZE];</code></div><div class="line number341 index340 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint16_t i;</code></div><div class="line number342 index341 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint8_t j;</code></div><div class="line number343 index342 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint8_t k=16;</code></div><div class="line number344 index343 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number345 index344 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint8_t status = read_block(memory_block, rx_buffer, </code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">(rx_buffer));</code></div><div class="line number346 index345 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">check_error_status(status);</code></div><div class="line number347 index346 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number348 index347 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Display contents of Block</code></div><div class="line number349 index348 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// Print Headers ///////////////////////////////////////////</code></div><div class="line number350 index349 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(i=0; i&lt;</code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">(block_header); i++) {</code></div><div class="line number351 index350 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte(block_header[i]);</code></div><div class="line number352 index351 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number353 index352 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">print_byte(memory_block + 0x30); </code><code class="cpp comments">// specify which block is being dumped</code></div><div class="line number354 index353 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">print_byte(</code><code class="cpp string">'\n'</code><code class="cpp plain">);</code></div><div class="line number355 index354 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">print_byte(</code><code class="cpp string">'\r'</code><code class="cpp plain">);</code></div><div class="line number356 index355 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(i=0; i&lt;</code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">(dash_line); i++) {</code></div><div class="line number357 index356 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte(dash_line[i]);</code></div><div class="line number358 index357 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number359 index358 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(i=0; i&lt;</code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">(mem_data_header); i++) {</code></div><div class="line number360 index359 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte(mem_data_header[i]);</code></div><div class="line number361 index360 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number362 index361 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(i=0; i&lt;</code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">(dash_line); i++) {</code></div><div class="line number363 index362 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte(dash_line[i]);</code></div><div class="line number364 index363 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number365 index364 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">////////////////////////////////////////////////////////////</code></div><div class="line number366 index365 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number367 index366 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(i=0; i&lt;(</code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">(rx_buffer)); i++) { </code><code class="cpp comments">// display block data</code></div><div class="line number368 index367 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number369 index368 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte(</code><code class="cpp string">'|'</code><code class="cpp plain">);</code></div><div class="line number370 index369 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">(k == 16) {</code></div><div class="line number371 index370 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(j=0; j&lt;3; j++) {&nbsp;&nbsp; </code><code class="cpp comments">// print 3 whitespaces</code></div><div class="line number372 index371 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte(</code><code class="cpp string">' '</code><code class="cpp plain">);</code></div><div class="line number373 index372 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number374 index373 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte_setup(i/16); </code><code class="cpp comments">// Print page number</code></div><div class="line number375 index374 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(j=2; j&lt;4; j++) {</code></div><div class="line number376 index375 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte(print_byte_array[j]);</code></div><div class="line number377 index376 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number378 index377 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte(</code><code class="cpp string">' '</code><code class="cpp plain">);</code></div><div class="line number379 index378 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">k = 0; </code><code class="cpp comments">// reset k</code></div><div class="line number380 index379 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code><code class="cpp keyword bold">else</code><code class="cpp plain">{</code></div><div class="line number381 index380 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(j=0; j&lt;6; j++) {&nbsp;&nbsp; </code><code class="cpp comments">// print 6 whitespaces</code></div><div class="line number382 index381 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte(</code><code class="cpp string">' '</code><code class="cpp plain">);</code></div><div class="line number383 index382 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number384 index383 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number385 index384 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number386 index385 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte(</code><code class="cpp string">'|'</code><code class="cpp plain">);</code></div><div class="line number387 index386 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(j=0; j&lt;6; j++) {&nbsp;&nbsp; </code><code class="cpp comments">// print 6 whitespaces</code></div><div class="line number388 index387 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte(</code><code class="cpp string">' '</code><code class="cpp plain">);</code></div><div class="line number389 index388 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number390 index389 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte_setup(i); </code><code class="cpp comments">// print address of memory</code></div><div class="line number391 index390 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(j=2; j&lt;4; j++) {</code></div><div class="line number392 index391 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte(print_byte_array[j]);</code></div><div class="line number393 index392 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number394 index393 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte(</code><code class="cpp string">' '</code><code class="cpp plain">);</code></div><div class="line number395 index394 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte(</code><code class="cpp string">'|'</code><code class="cpp plain">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// separate address and data</code></div><div class="line number396 index395 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(j=0; j&lt;3; j++) {&nbsp;&nbsp; </code><code class="cpp comments">// print 3 whitespaces</code></div><div class="line number397 index396 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte(</code><code class="cpp string">' '</code><code class="cpp plain">);</code></div><div class="line number398 index397 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number399 index398 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte_setup(rx_buffer[i]); </code><code class="cpp comments">// print data located at given address</code></div><div class="line number400 index399 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(j=2; j&lt;4; j++) {</code></div><div class="line number401 index400 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte(print_byte_array[j]);</code></div><div class="line number402 index401 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number403 index402 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte(</code><code class="cpp string">' '</code><code class="cpp plain">);</code></div><div class="line number404 index403 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte(</code><code class="cpp string">'|'</code><code class="cpp plain">);</code></div><div class="line number405 index404 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte(</code><code class="cpp string">'\n'</code><code class="cpp plain">); </code><code class="cpp comments">// print newline</code></div><div class="line number406 index405 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte(</code><code class="cpp string">'\r'</code><code class="cpp plain">);</code></div><div class="line number407 index406 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number408 index407 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">k++;</code></div><div class="line number409 index408 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number410 index409 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp comments">// close the table</code></div><div class="line number411 index410 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(i=0; i&lt;</code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">(dash_line); i++) {</code></div><div class="line number412 index411 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte(dash_line[i]);</code></div><div class="line number413 index412 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number414 index413 alt1"><code class="cpp plain">}</code></div><div class="line number415 index414 alt2">&nbsp;</div><div class="line number416 index415 alt1"><code class="cpp comments">// This function is used to display bytes over UART</code></div><div class="line number417 index416 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">print_byte(uint8_t byte) {</code></div><div class="line number418 index417 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">( !(USART1-&gt;STATUS &amp; (1 &lt;&lt; 6)) ); </code><code class="cpp comments">// wait for TX buffer to empty</code></div><div class="line number419 index418 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">USART1-&gt;TXDATA = byte;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// send byte over UART</code></div><div class="line number420 index419 alt1"><code class="cpp plain">}</code></div><div class="line number421 index420 alt2">&nbsp;</div><div class="line number422 index421 alt1"><code class="cpp comments">// This function breaks up 'byte' into high and low nibbles (ASCII characters) to be transmitted over UART</code></div><div class="line number423 index422 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">print_byte_setup(uint8_t byte) {</code></div><div class="line number424 index423 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number425 index424 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">(((byte &amp; 0xF0) &gt;&gt; 4) &lt;= 0x09) {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// if high nibble is less than 0xA</code></div><div class="line number426 index425 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte_array[2] = ((byte &amp; 0xF0) &gt;&gt; 4) + 0x30;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// store ASCII char</code></div><div class="line number427 index426 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number428 index427 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">((((byte &amp; 0xF0) &gt;&gt; 4) &gt;= 0x0A) &amp;&amp; (((byte &amp; 0xF0) &gt;&gt; 4)&lt;= 0x0F)) { </code><code class="cpp comments">// if high nibble is between 0xA and 0xF</code></div><div class="line number429 index428 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte_array[2] = ((byte &amp; 0xF0) &gt;&gt; 4) + 0x37;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// store ASCII char</code></div><div class="line number430 index429 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number431 index430 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">((byte &amp; 0x0F) &lt;= 0x09) {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// if low nibble is less than 0xA</code></div><div class="line number432 index431 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte_array[3] = (byte &amp; 0x0F) + 0x30;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// store ASCII char</code></div><div class="line number433 index432 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number434 index433 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">(((byte &amp; 0x0F) &gt;= 0x0A) &amp;&amp; ((byte &amp; 0x0F)&lt;= 0x0F)) { </code><code class="cpp comments">// if low nibble is between 0xA and 0xF</code></div><div class="line number435 index434 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte_array[3] = (byte &amp; 0x0F) + 0x37;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp comments">// store ASCII char</code></div><div class="line number436 index435 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number437 index436 alt2"><code class="cpp plain">}</code></div><div class="line number438 index437 alt1">&nbsp;</div><div class="line number439 index438 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">check_error_status(uint8_t status) {</code></div><div class="line number440 index439 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">uint8_t i;</code></div><div class="line number441 index440 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number442 index441 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">switch</code><code class="cpp plain">(status) {</code></div><div class="line number443 index442 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">case</code> <code class="cpp plain">0:</code></div><div class="line number444 index443 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// successful operation</code></div><div class="line number445 index444 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">break</code><code class="cpp plain">;</code></div><div class="line number446 index445 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">case</code> <code class="cpp plain">1:</code></div><div class="line number447 index446 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// unsupported block number</code></div><div class="line number448 index447 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(i=0; i&lt;</code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">(error_message1); i++) {</code></div><div class="line number449 index448 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte(error_message1[i]);</code></div><div class="line number450 index449 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number451 index450 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">break</code><code class="cpp plain">;</code></div><div class="line number452 index451 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">case</code> <code class="cpp plain">2:</code></div><div class="line number453 index452 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// array size error</code></div><div class="line number454 index453 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(i=0; i&lt;</code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">(error_message2); i++) {</code></div><div class="line number455 index454 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte(error_message2[i]);</code></div><div class="line number456 index455 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number457 index456 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">break</code><code class="cpp plain">;</code></div><div class="line number458 index457 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">case</code> <code class="cpp plain">3:</code></div><div class="line number459 index458 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// unsupported page number</code></div><div class="line number460 index459 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(i=0; i&lt;</code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">(error_message3); i++) {</code></div><div class="line number461 index460 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte(error_message3[i]);</code></div><div class="line number462 index461 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number463 index462 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">break</code><code class="cpp plain">;</code></div><div class="line number464 index463 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">case</code> <code class="cpp plain">4:</code></div><div class="line number465 index464 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// NACK transmitted/received when expected ACK</code></div><div class="line number466 index465 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(i=0; i&lt;</code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">(error_message4); i++) {</code></div><div class="line number467 index466 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte(error_message4[i]);</code></div><div class="line number468 index467 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number469 index468 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">break</code><code class="cpp plain">;</code></div><div class="line number470 index469 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">default</code><code class="cpp plain">:</code></div><div class="line number471 index470 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// unknown error</code></div><div class="line number472 index471 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">for</code><code class="cpp plain">(i=0; i&lt;</code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">(error_message5); i++) {</code></div><div class="line number473 index472 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">print_byte(error_message5[i]);</code></div><div class="line number474 index473 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number475 index474 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">break</code><code class="cpp plain">;</code></div><div class="line number476 index475 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number477 index476 alt2"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div></div></div></div></div></div><h2 id="GettingStartedwithEFM32GiantGeckoARMCortex-M3-ContacttheAuthor">Contact the Author</h2><p>The code found in the examples above can be used freely.&nbsp; I encourage you to build on the examples presented on this page and add functionality to the applications.&nbsp; Take the Timer example code and try cascading multiple timers together.&nbsp; See if you can combine the GPIO example and the Timer example to create a debounce function for the user buttons.&nbsp; Try configuring different baud rates or setting up a software buffer for the UART example.&nbsp; The goal of this page is to familiarize you with basic functions of EFM32 Giant Gecko microcontrollers so that you can apply each peripheral in more complex applications.&nbsp; I hope you find it useful.&nbsp; For questions, feedback, or if you would like to see a topic added to the eewiki, you can email me at <a href="mailto:eewiki@digikey.com." class="external-link">eewiki@digikey.com.</a>&nbsp; I hope you are successful with Giant Gecko microcontrollers.</p><p>&nbsp; &nbsp; -&nbsp;&nbsp;&nbsp; Scott</p><p>&nbsp;</p>

                
        
    
        </div>

        <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="https://eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3"
    dc:identifier="https://eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3"
    dc:title="Getting Started with EFM32 Giant Gecko ARM Cortex-M3"
    trackback:ping="https://eewiki.net/rpc/trackback/27754907"/>
</rdf:RDF>
-->

            
    



<div id="likes-and-labels-container"><div id="likes-section" style="display: none;"><span class="like-summary"></span></div><div id="labels-section" class="pageSection group">
    <div class="labels-section-content content-column" entityid="27754907" entitytype="page">
	<div class="labels-content">
		
    <ul class="label-list label-list-right ">
            <li class="no-labels-message">
            No labels
        </li>
            </ul>

    </div>
</div>
</div></div>

            
            




            
        








                        
    
<div id="comments-section" class="pageSection group">
        
    



</div>
        


            
</div>
    


    




    
    

    
    
    



        




</div>
    
  
    </div>
</div>


        
            
            

<div id="footer" role="contentinfo">
    <section class="footer-body">

                                                    
        

        <ul id="poweredby">
            <li class="noprint">Powered by <a href="http://www.atlassian.com/software/confluence" class="hover-footer-link" rel="nofollow">Atlassian Confluence</a> <span id="footer-build-information">5.10.8</span></li>
            <li class="print-only">Printed by Atlassian Confluence 5.10.8</li>
            <li class="noprint"><a href="https://support.atlassian.com/help/confluence" class="hover-footer-link" rel="nofollow">Report a bug</a></li>
            <li class="noprint"><a href="http://www.atlassian.com/about/connected.jsp?s_kwcid=Confluence-stayintouch" class="hover-footer-link" rel="nofollow">Atlassian News</a></li>
        </ul>

        

        <div id="footer-logo"><a href="http://www.atlassian.com/" rel="nofollow">Atlassian</a></div>

                    
        
    </section>
</div>

    </div>

        <span style="display:none;" id="confluence-server-performance">{"serverDuration": 435, "requestCorrelationId": "cf6ceac4e8a67e33"}</span>


    
<div id="editor-preload-container" style="display: none;">
 

<div class="hidden">
        


<content tag="breadcrumbs">
    
    
    <ol id="quickedit-breadcrumbs">
                                        
                        
        <li class="first">
                        
                            <span class=""><a href="http://www.eewiki.net/display/microcontroller" target="_blank">Microcontroller</a></span>
                                                                                    
                        
        </li><li>
                        
                            <span class=""><a href="http://www.eewiki.net/display/microcontroller/Home" target="_blank">Home</a></span>
                                                                                    
                        
        </li><li>
                        
                            <span class="edited-page-title"><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3" target="_blank">Getting Started with EFM32 Giant Gecko ARM Cortex-M3</a></span>
                                                                    </li></ol>

</content>
</div>


        
    <div id="anonymous-warning" class="aui-message warning closeable">You are not logged in. Any changes you make will be marked as <span class="smalltext">anonymous</span>. You may want to <a href="http://www.eewiki.net/login.action?os_destination=%2Fdisplay%2Fmicrocontroller%2FGetting%2BStarted%2Bwith%2BEFM32%2BGiant%2BGecko%2BARM%2BCortex-M3">Log In</a> if you already have an account.</div>

                                                                                        

<script type="text/x-template" title="editor-css" id="editor-css-resources">
    <link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6441/82994790ee2f720a5ec8daf4850ac5b7b34d2194/1.1.11/_/download/batch/com.atlassian.confluence.plugins.confluence-collaborative-editor-plugin:confluence-collaborative-editor-plugin-editor-content-resources/com.atlassian.confluence.plugins.confluence-collaborative-editor-plugin:confluence-collaborative-editor-plugin-editor-content-resources.css" data-wrm-key="com.atlassian.confluence.plugins.confluence-collaborative-editor-plugin:confluence-collaborative-editor-plugin-editor-content-resources" data-wrm-batch-type="resource" media="all">
<link type="text/css" rel="stylesheet" href="/s/a191f6d5283eab057f5eb0b18f7e7453-CDN/en_GB/6441/82994790ee2f720a5ec8daf4850ac5b7b34d2194/5.9.24/_/download/batch/com.atlassian.auiplugin:aui-page-typography/com.atlassian.auiplugin:aui-page-typography.css" data-wrm-key="com.atlassian.auiplugin:aui-page-typography" data-wrm-batch-type="resource" media="all">
<link type="text/css" rel="stylesheet" href="/s/a191f6d5283eab057f5eb0b18f7e7453-CDN/en_GB/6441/82994790ee2f720a5ec8daf4850ac5b7b34d2194/5.9.24/_/download/batch/com.atlassian.auiplugin:aui-avatars/com.atlassian.auiplugin:aui-avatars.css" data-wrm-key="com.atlassian.auiplugin:aui-avatars" data-wrm-batch-type="resource" media="all">
<link type="text/css" rel="stylesheet" href="/s/202a2990a81c67383e0548a13060e251-CDN/en_GB/6441/82994790ee2f720a5ec8daf4850ac5b7b34d2194/5.9.24/_/download/batch/com.atlassian.auiplugin:aui-page-layout/com.atlassian.auiplugin:aui-page-layout.css" data-wrm-key="com.atlassian.auiplugin:aui-page-layout" data-wrm-batch-type="resource" media="all">
<link type="text/css" rel="stylesheet" href="/s/264d836501ccc8de76a7966105fa5c6e-CDN/en_GB/6441/82994790ee2f720a5ec8daf4850ac5b7b34d2194/5.10.8/_/download/batch/com.atlassian.confluence.editor:editor-content-styles/com.atlassian.confluence.editor:editor-content-styles.css" data-wrm-key="com.atlassian.confluence.editor:editor-content-styles" data-wrm-batch-type="resource" media="all">
<link type="text/css" rel="stylesheet" href="/s/264d836501ccc8de76a7966105fa5c6e-CDN/en_GB/6441/82994790ee2f720a5ec8daf4850ac5b7b34d2194/5.10.8/_/download/batch/com.atlassian.confluence.editor:table-resizable-editor-content-styles/com.atlassian.confluence.editor:table-resizable-editor-content-styles.css?confluence.table.resizable=true" data-wrm-key="com.atlassian.confluence.editor:table-resizable-editor-content-styles" data-wrm-batch-type="resource" media="all">
<link type="text/css" rel="stylesheet" href="/s/264d836501ccc8de76a7966105fa5c6e-CDN/en_GB/6441/82994790ee2f720a5ec8daf4850ac5b7b34d2194/5.10.8/_/download/batch/com.atlassian.confluence.editor:table-resizable-styles/com.atlassian.confluence.editor:table-resizable-styles.css?confluence.table.resizable=true" data-wrm-key="com.atlassian.confluence.editor:table-resizable-styles" data-wrm-batch-type="resource" media="all">
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6441/82994790ee2f720a5ec8daf4850ac5b7b34d2194/5.10.8/_/download/batch/com.atlassian.confluence.plugins.confluence-templates:variable-editor-content-styles/com.atlassian.confluence.plugins.confluence-templates:variable-editor-content-styles.css" data-wrm-key="com.atlassian.confluence.plugins.confluence-templates:variable-editor-content-styles" data-wrm-batch-type="resource" media="all">
<link type="text/css" rel="stylesheet" href="/s/a191f6d5283eab057f5eb0b18f7e7453-CDN/en_GB/6441/82994790ee2f720a5ec8daf4850ac5b7b34d2194/5.9.24/_/download/batch/com.atlassian.auiplugin:aui-lozenge/com.atlassian.auiplugin:aui-lozenge.css" data-wrm-key="com.atlassian.auiplugin:aui-lozenge" data-wrm-batch-type="resource" media="all">
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6441/82994790ee2f720a5ec8daf4850ac5b7b34d2194/2.17/_/download/batch/com.atlassian.confluence.plugins.status-macro:view_content_status/com.atlassian.confluence.plugins.status-macro:view_content_status.css" data-wrm-key="com.atlassian.confluence.plugins.status-macro:view_content_status" data-wrm-batch-type="resource" media="all">
<link type="text/css" rel="stylesheet" href="/s/489901e715cade6fe0efc7e21e194576-CDN/en_GB/6441/82994790ee2f720a5ec8daf4850ac5b7b34d2194/2.17/_/download/batch/com.atlassian.confluence.plugins.status-macro:editor_content_status/com.atlassian.confluence.plugins.status-macro:editor_content_status.css" data-wrm-key="com.atlassian.confluence.plugins.status-macro:editor_content_status" data-wrm-batch-type="resource" media="all">
<link type="text/css" rel="stylesheet" href="/s/d0638b94054c44b2ca8199723136b528-CDN/en_GB/6441/82994790ee2f720a5ec8daf4850ac5b7b34d2194/1.2.8/_/download/batch/com.atlassian.confluence.plugins.confluence-fixed-headers:confluence-fixed-headers-editor-content-resources/com.atlassian.confluence.plugins.confluence-fixed-headers:confluence-fixed-headers-editor-content-resources.css?confluence.view.edit.transition=true" data-wrm-key="com.atlassian.confluence.plugins.confluence-fixed-headers:confluence-fixed-headers-editor-content-resources" data-wrm-batch-type="resource" media="all">
<link type="text/css" rel="stylesheet" href="/s/5baeb58a5608e28c5f241eee74f064b2-CDN/en_GB/6441/82994790ee2f720a5ec8daf4850ac5b7b34d2194/4.0.2/_/download/batch/confluence.extra.attachments:attachments-css/confluence.extra.attachments:attachments-css.css" data-wrm-key="confluence.extra.attachments:attachments-css" data-wrm-batch-type="resource" media="all">
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6441/82994790ee2f720a5ec8daf4850ac5b7b34d2194/1.0/_/download/batch/confluence.web.resources:panel-styles/confluence.web.resources:panel-styles.css" data-wrm-key="confluence.web.resources:panel-styles" data-wrm-batch-type="resource" media="all">
<link type="text/css" rel="stylesheet" href="/s/6b52533f1393ef49a849bb93607e884d-CDN/en_GB/6441/82994790ee2f720a5ec8daf4850ac5b7b34d2194/1.0/_/download/batch/confluence.web.resources:content-styles/confluence.web.resources:content-styles.css" data-wrm-key="confluence.web.resources:content-styles" data-wrm-batch-type="resource" media="all">
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6441/82994790ee2f720a5ec8daf4850ac5b7b34d2194/5.10.8/_/download/batch/com.atlassian.confluence.plugins.confluence-page-layout:editor-pagelayout-content-styles/com.atlassian.confluence.plugins.confluence-page-layout:editor-pagelayout-content-styles.css" data-wrm-key="com.atlassian.confluence.plugins.confluence-page-layout:editor-pagelayout-content-styles" data-wrm-batch-type="resource" media="all">
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6441/82994790ee2f720a5ec8daf4850ac5b7b34d2194/4.1.4/_/download/batch/com.atlassian.confluence.plugins.confluence-business-blueprints:sharelinks-urlmacro-editor-resources/com.atlassian.confluence.plugins.confluence-business-blueprints:sharelinks-urlmacro-editor-resources.css" data-wrm-key="com.atlassian.confluence.plugins.confluence-business-blueprints:sharelinks-urlmacro-editor-resources" data-wrm-batch-type="resource" media="all">
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6441/82994790ee2f720a5ec8daf4850ac5b7b34d2194/7.0.2/_/download/batch/com.atlassian.confluence.plugins.confluence-inline-tasks:inline-tasks-styles/com.atlassian.confluence.plugins.confluence-inline-tasks:inline-tasks-styles.css" data-wrm-key="com.atlassian.confluence.plugins.confluence-inline-tasks:inline-tasks-styles" data-wrm-batch-type="resource" media="all">
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6441/82994790ee2f720a5ec8daf4850ac5b7b34d2194/7.0.2/_/download/batch/com.atlassian.confluence.plugins.confluence-inline-tasks:editor-autocomplete-date-css/com.atlassian.confluence.plugins.confluence-inline-tasks:editor-autocomplete-date-css.css" data-wrm-key="com.atlassian.confluence.plugins.confluence-inline-tasks:editor-autocomplete-date-css" data-wrm-batch-type="resource" media="all">
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6441/82994790ee2f720a5ec8daf4850ac5b7b34d2194/7.0.2/_/download/batch/com.atlassian.confluence.plugins.confluence-inline-tasks:editor-autocomplete-date-css/com.atlassian.confluence.plugins.confluence-inline-tasks:editor-autocomplete-date-css.css?conditionalComment=lte+IE+9" data-wrm-key="com.atlassian.confluence.plugins.confluence-inline-tasks:editor-autocomplete-date-css" data-wrm-batch-type="resource" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="/s/51a3950c50505d7f5d8217ed8913f870-CDN/en_GB/6441/82994790ee2f720a5ec8daf4850ac5b7b34d2194/1.5.5/_/download/batch/com.atlassian.confluence.plugins.confluence-view-file-macro:view-file-macro-editor-content-resources/com.atlassian.confluence.plugins.confluence-view-file-macro:view-file-macro-editor-content-resources.css" data-wrm-key="com.atlassian.confluence.plugins.confluence-view-file-macro:view-file-macro-editor-content-resources" data-wrm-batch-type="resource" media="all">
<link type="text/css" rel="stylesheet" href="/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6441/82994790ee2f720a5ec8daf4850ac5b7b34d2194/3.1.4/_/download/batch/com.atlassian.confluence.plugins.confluence-software-blueprints:common-resources/com.atlassian.confluence.plugins.confluence-software-blueprints:common-resources.css" data-wrm-key="com.atlassian.confluence.plugins.confluence-software-blueprints:common-resources" data-wrm-batch-type="resource" media="all">
<link type="text/css" rel="stylesheet" href="/s/en_GB/6441/82994790ee2f720a5ec8daf4850ac5b7b34d2194/123/_/styles/colors.css" media="all">

</script>













        

<div class="editor-container">

        
            

<div id="link-browser-tab-items" class="hidden">
                <div title="Search" data-weight="10">search</div>
            <div title="Files" data-weight="30">attachments</div>
            <div title="Web link" data-weight="40">weblink</div>
            <div title="Advanced" data-weight="50">advanced</div>
    </div>
            <div id="image-properties-tab-items" class="hidden">
                <div title="Effects" data-weight="10">image-effects</div>
            <div title="Title" data-weight="20">image-attributes</div>
    </div>
            

 









        <div id="toolbar">
        <div id="rte-toolbar" class="aui-toolbar aui-toolbar2">

            <div class="aui-toolbar2-primary toolbar-primary">
                <ul class="aui-buttons rte-toolbar-group-formatting">
                                        <li id="format-dropdown" class="toolbar-item toolbar-dropdown">
                        <div class="aui-dd-parent">
                            <a id="format-dropdown-display" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" class="toolbar-trigger aui-dd-trigger aui-button" data-control-id="formatselect">
                                <span class="dropdown-text">Paragraph</span>
                                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-dropdown "></span>
                            </a>
                            <ul id="format-dropdown-display-menu" class="aui-dropdown hidden">
                                    <li class="dropdown-item format-p" data-format="p" data-tooltip="Paragraph (Ctrl+0)">
        <a class="item-link" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#">Paragraph</a>
    </li>
                                    <li class="dropdown-item format-h1" data-format="h1" data-tooltip="Heading 1 (Ctrl+1)">
        <a class="item-link" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#">Heading 1</a>
    </li>
                                    <li class="dropdown-item format-h2" data-format="h2" data-tooltip="Heading 2 (Ctrl+2)">
        <a class="item-link" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#">Heading 2</a>
    </li>
                                    <li class="dropdown-item format-h3" data-format="h3" data-tooltip="Heading 3 (Ctrl+3)">
        <a class="item-link" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#">Heading 3</a>
    </li>
                                    <li class="dropdown-item format-h4" data-format="h4" data-tooltip="Heading 4 (Ctrl+4)">
        <a class="item-link" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#">Heading 4</a>
    </li>
                                    <li class="dropdown-item format-h5" data-format="h5" data-tooltip="Heading 5 (Ctrl+5)">
        <a class="item-link" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#">Heading 5</a>
    </li>
                                    <li class="dropdown-item format-h6" data-format="h6" data-tooltip="Heading 6 (Ctrl+6)">
        <a class="item-link" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#">Heading 6</a>
    </li>
                                    <li class="dropdown-item format-pre" data-format="pre" data-tooltip="Preformatted (Ctrl+7)">
        <a class="item-link" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#">Preformatted</a>
    </li>
                                    <li class="dropdown-item format-blockquote" data-format="blockquote" data-tooltip="Quote (Ctrl+8)">
        <a class="item-link" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#">Quote</a>
    </li>
                            </ul>
                        </div>
                    </li>
                </ul>

                <ul class="aui-buttons rte-toolbar-group-style">
                    
                <li class="toolbar-item aui-button" id="rte-button-bold" data-tooltip="Bold (Ctrl+B)">
        <a class="toolbar-trigger" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" data-control-id="bold">
                
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-editor-bold ">Bold</span>
        </a>
    </li>
                    
                <li class="toolbar-item aui-button" id="rte-button-italic" data-tooltip="Italic (Ctrl+I)">
        <a class="toolbar-trigger" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" data-control-id="italic">
                
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-editor-italic ">Italic</span>
        </a>
    </li>
                    
                <li class="toolbar-item aui-button" id="rte-button-underline" data-tooltip="Underline (Ctrl+U)">
        <a class="toolbar-trigger" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" data-control-id="underline">
                
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-editor-underline ">Underline</span>
        </a>
    </li>
                                        <li id="color-picker-control" class="toolbar-item toolbar-splitbutton">
                        <a class="toolbar-trigger aui-button" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" id="rte-button-color" data-color="003366" data-tooltip="Colour"><span class="icon aui-icon aui-icon-small aui-iconfont-editor-color ">Colour picker</span><span class="selected-color"></span></a><div class="aui-dd-parent"><a class="toolbar-trigger aui-dd-trigger aui-button" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" id="rte-button-color-selector" data-control-id="colorSelector" data-tooltip="More colours"><span class="icon aui-icon aui-icon-small aui-iconfont-dropdown ">More colours</span></a><div class="color-picker-container"><div class="color-picker aui-dropdown hidden"><ul><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #000000" data-color="000000">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #993300" data-color="993300">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #333300" data-color="333300">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #003300" data-color="003300">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #003366" data-color="003366">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #000080" data-color="000080">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #333399" data-color="333399">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #333333" data-color="333333">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #800000" data-color="800000">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #FF6600" data-color="FF6600">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #808000" data-color="808000">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #008000" data-color="008000">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #008080" data-color="008080">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #0000FF" data-color="0000FF">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #666699" data-color="666699">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #808080" data-color="808080">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #FF0000" data-color="FF0000">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #FF9900" data-color="FF9900">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #99CC00" data-color="99CC00">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #339966" data-color="339966">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #33CCCC" data-color="33CCCC">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #3366FF" data-color="3366FF">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #800080" data-color="800080">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #999999" data-color="999999">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #FF00FF" data-color="FF00FF">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #FFCC00" data-color="FFCC00">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #FFFF00" data-color="FFFF00">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #00FF00" data-color="00FF00">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #00FFFF" data-color="00FFFF">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #00CCFF" data-color="00CCFF">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #993366" data-color="993366">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #C0C0C0" data-color="C0C0C0">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #FF99CC" data-color="FF99CC">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #FFCC99" data-color="FFCC99">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #FFFF99" data-color="FFFF99">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #CCFFCC" data-color="CCFFCC">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #CCFFFF" data-color="CCFFFF">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #99CCFF" data-color="99CCFF">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #CC99FF" data-color="CC99FF">&nbsp;</a></li><li><a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" style="background-color: #FFFFFF" data-color="FFFFFF">&nbsp;</a></li></ul></div></div></div>
                    </li>
                    <li id="more-menu" class="toolbar-item toolbar-dropdown">
                        <div class="aui-dd-parent">
                            <a id="rte-button-more" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" class="toolbar-trigger aui-dd-trigger aui-button" data-tooltip="More">
                                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-editor-styles ">Formatting</span>
                                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-dropdown "></span>
                            </a>
                            <div id="rte-button-more-menu" class="aui-dropdown grouped hidden">
                                <div class="grouped-dropdown-item">
                                    <ul>
                                                                <li class="dropdown-item more-menu-trigger" data-control-id="strikethrough" data-tooltip="Strikethrough (Ctrl+Shift+S)">
        <a id="rte-strikethrough" class="item-link" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#">
                
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-check hidden"></span>
Strikethrough
        </a>
    </li>
                                                                 <li class="dropdown-item more-menu-trigger" data-control-id="sub" data-tooltip="">
        <a id="rte-sub" class="item-link" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#">
                
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-check hidden"></span>
Subscript
        </a>
    </li>
                                                                 <li class="dropdown-item more-menu-trigger" data-control-id="sup" data-tooltip="">
        <a id="rte-sup" class="item-link" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#">
                
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-check hidden"></span>
Superscript
        </a>
    </li>
                                                        <li class="dropdown-item more-menu-trigger" data-control-id="monospace" data-tooltip="Format text with monospaced font">
        <a id="rte-monospace" class="item-link" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#">
                
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-check hidden"></span>
Monospace
        </a>
    </li>

                                                                                                                    </ul>
                                </div>
                                <div class="grouped-dropdown-item">
                                    <ul>
                                            <li class="dropdown-item more-menu-trigger no-icon" data-format="removeformat" data-tooltip="Clears formatting on currently selected text">
        <a id="rte-removeformat" class="item-link" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#">
            Clear formatting
        </a>
    </li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                    </li>
                </ul>

                <ul class="aui-buttons rte-toolbar-group-lists">
                    
                <li class="toolbar-item aui-button" id="rte-button-bullist" data-tooltip="Bullet list (Ctrl+Shift+B)">
        <a class="toolbar-trigger" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" data-control-id="bullist">
                
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-editor-list-bullet ">Bullet list</span>
        </a>
    </li>
                    
                <li class="toolbar-item aui-button" id="rte-button-numlist" data-tooltip="Numbered list (Ctrl+Shift+N)">
        <a class="toolbar-trigger" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" data-control-id="numlist">
                
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-editor-list-number ">Numbered list</span>
        </a>
    </li>
                </ul>
                                <ul class="aui-buttons rte-toolbar-group-task-lists">
                    
                <li class="toolbar-item aui-button" id="rte-button-tasklist" data-tooltip="Task list ([ then ])">
        <a class="toolbar-trigger" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" data-control-id="tasklist">
                
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-editor-task ">Task list</span>
        </a>
    </li>
                </ul>
                
                <ul class="aui-buttons rte-toolbar-group-indentation">
                    
                <li class="toolbar-item aui-button" id="rte-button-outdent" data-tooltip="Outdent">
        <a class="toolbar-trigger" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" data-control-id="outdent">
                
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-editor-outdent ">Outdent</span>
        </a>
    </li>
                    
                <li class="toolbar-item aui-button" id="rte-button-indent" data-tooltip="Indent">
        <a class="toolbar-trigger" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" data-control-id="indent">
                
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-editor-indent ">Indent</span>
        </a>
    </li>
                </ul>

                <ul class="aui-buttons rte-toolbar-group-justification">
                    
                <li class="toolbar-item aui-button" id="rte-button-justifyleft" data-tooltip="Align left">
        <a class="toolbar-trigger" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" data-control-id="justifyleft">
                
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-editor-align-left ">Align left</span>
        </a>
    </li>
                    
                <li class="toolbar-item aui-button" id="rte-button-justifycenter" data-tooltip="Align center">
        <a class="toolbar-trigger" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" data-control-id="justifycenter">
                
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-editor-align-center ">Align center</span>
        </a>
    </li>
                    
                <li class="toolbar-item aui-button" id="rte-button-justifyright" data-tooltip="Align right">
        <a class="toolbar-trigger" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" data-control-id="justifyright">
                
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-editor-align-right ">Align right</span>
        </a>
    </li>
                </ul>

                                <ul class="aui-buttons hidden" id="page-layout-2-group">
                    <li id="page-layout-2" class="toolbar-item" data-tooltip="Page layout">
                        <a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" class="aui-button toolbar-trigger" id="rte-button-pagelayout-2">
                                
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-editor-layout ">Page layout</span>
                        </a>
                    </li>
                </ul>
                

                <ul class="aui-buttons rte-toolbar-group-files hidden"></ul>

                <ul class="aui-buttons rte-toolbar-group-link no-separator">
                    <li class="toolbar-item" data-tooltip="Insert link (Ctrl+K)">
                        <a id="rte-button-link" class="toolbar-trigger aui-button" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" data-control-id="linkbrowserButton">
                                
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-link "></span>
                            <span class="trigger-text">Link</span>
                        </a>
                    </li>
                </ul>

                <ul class="aui-buttons rte-toolbar-group-table no-separator">
                    <li class="toolbar-item toolbar-dropdown" id="insert-table-dropdown">
                        <div class="aui-dd-parent">
                            <a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" class="toolbar-trigger aui-dd-trigger aui-button" id="rte-button-insert-table" data-tooltip="Insert table">
                                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-editor-table "></span>
                                <span class="dropdown-text">Table</span>
                                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-dropdown "></span>
                            </a>

                            <div id="table-picker-container" class="hidden aui-box-shadow">
                                <div class="table-picker-box" data-tooltip="Hold SHIFT for a table without a heading.">
                                    <div class="table-picker-background">
                                        <div class="picker picker-cell"></div>
                                        <div class="picker picker-heading heading"></div>
                                        <div class="picker picker-selected-cell"></div>
                                        <div class="picker picker-selected-heading heading"></div>
                                    </div>
                                    <p class="desc"></p>
                                </div>
                            </div>
                        </div>
                    </li>
                </ul>

                                                                
                
                <ul class="aui-buttons rte-toolbar-group-insert no-separator">
                    <li class="toolbar-item toolbar-dropdown" id="insert-menu">
                        <div class="aui-dd-parent">
                            <a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" class="toolbar-trigger aui-dd-trigger aui-button" id="rte-button-insert" data-tooltip="Insert more content">
                                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-add "></span>
                                <span class="dropdown-text">Insert</span>
                                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-dropdown "></span>
                            </a>

                            <div id="insert-menu-options" class="aui-dropdown grouped hidden">
                                <div class="grouped-dropdown-item">
                                    <span class="assistive">Insert content</span>
                                    <ul id="content-insert-list">
                                        
        
        <li class="dropdown-item content-image" data-command="mceConfimage" data-tooltip="Insert files and images (Ctrl+M)">
        <a id="rte-insert-image" class="item-link" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#">
                
    
    <span class="icon "></span>
 Files and images
        </a>
    </li>
                                        
        
        <li class="dropdown-item content-link" data-control-id="linkbrowserButton" data-tooltip="Insert link (Ctrl+K)">
        <a id="rte-insert-link" class="item-link" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#">
                
    
    <span class="icon "></span>
 Link
        </a>
    </li>
                                        
    
        <li class="dropdown-item content-symbol" data-command="confCharmap" data-tooltip="Insert symbol">
        <a id="rte-insert-symbol" class="item-link" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#">
                
    
    <span class="icon "></span>
 Symbol
        </a>
    </li>
                                        
    
        <li class="dropdown-item content-emoticon" data-command="mceEmotion" data-tooltip="Insert emoticon">
        <a id="rte-insert-emoticon" class="item-link" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#">
                
    
    <span class="icon "></span>
 Emoticon
        </a>
    </li>
                                        
        
        <li class="dropdown-item content-wikimarkup" data-command="InsertWikiMarkup" data-tooltip="Insert markup (Ctrl+Shift+D)">
        <a id="rte-insert-wikimarkup" class="item-link" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#">
                
    
    <span class="icon "></span>
 Markup
        </a>
    </li>
                                        
    
        <li class="dropdown-item content-hr" data-command="InsertHorizontalRule" data-tooltip="Insert horizontal rule (----)">
        <a id="rte-insert-hr" class="item-link" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#">
                
    
    <span class="icon "></span>
 Horizontal rule
        </a>
    </li>
                                                                                    
        
        <li class="dropdown-item content-tasklist" data-command="InsertInlineTaskListNoToggle" data-tooltip="Insert task list ([ then ])">
        <a id="rte-insert-tasklist" class="item-link" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#">
                
    
    <span class="icon "></span>
 Task list
        </a>
    </li>
                                                                            </ul>
                                </div>
                                <div class="grouped-dropdown-item">
                                    <span class="assistive">Insert macro</span>
                                    <ul id="macro-insert-list">
                                                                                                                                                                                <li class="dropdown-item macro-insertmention-button" data-macro-name="insertmention-button" data-tooltip="Insert &#39;User mention&#39; macro">
        <a id="insertmention-button" class="item-link" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#">
                
    
    <span class="icon "></span>
 User mention
        </a>
    </li>
                                                                                                <li class="dropdown-item macro-jiralink" data-macro-name="jiralink" data-tooltip="Insert &#39;JIRA Issue/Filter&#39; macro">
        <a id="jiralink" class="item-link" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#">
                
    
    <span class="icon "></span>
 JIRA Issue/Filter
        </a>
    </li>
                                                                                                <li class="dropdown-item macro-info" data-macro-name="info" data-tooltip="Insert &#39;Info&#39; macro">
        <a id="info" class="item-link" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#">
                
    
    <span class="icon "></span>
 Info
        </a>
    </li>
                                                                                                <li class="dropdown-item macro-status" data-macro-name="status" data-tooltip="Insert &#39;Status&#39; macro">
        <a id="status" class="item-link" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#">
                
    
    <span class="icon "></span>
 Status
        </a>
    </li>
                                                                                                <li class="dropdown-item macro-gallery" data-macro-name="gallery" data-tooltip="Insert &#39;Gallery&#39; macro">
        <a id="gallery" class="item-link" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#">
                
    
    <span class="icon "></span>
 Gallery
        </a>
    </li>
                                                                                                <li class="dropdown-item macro-toc" data-macro-name="toc" data-tooltip="Insert &#39;Table of Contents&#39; macro">
        <a id="toc" class="item-link" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#">
                
    
    <span class="icon "></span>
 Table of Contents
        </a>
    </li>
                                                                                                                            
        
        <li class="dropdown-item content-macro" data-command="mceConfMacroBrowser" data-tooltip="Open the macro browser (Ctrl+Shift+A)">
        <a id="rte-insert-macro" class="item-link" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#">
                
    
    <span class="icon "></span>
 Other macros
        </a>
    </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </li>
                </ul>

                                <ul class="aui-buttons rte-toolbar-group-page-layouts-section-types">
                    <li id="pagelayout-menu" class="toolbar-item toolbar-dropdown">
                        <div class="aui-dd-parent">
                            <a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" class="toolbar-trigger aui-dd-trigger aui-button" id="rte-button-pagelayout" data-tooltip="Page layout">
                                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-layout pagelayout-default">Page layout</span>
                                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-dropdown "></span>
                            </a>

                            <ul id="pagelayout-menu-options" class="aui-dropdown hidden">
                                <li class="dropdown-item" data-tooltip="No layout">
    <a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" class="item-link" data-atlassian-layout="{&quot;name&quot;: &quot;pagelayout-none&quot;, &quot;columns&quot;: 0   }">
            
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-check hidden"></span>
            
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-layout pagelayout-none">No layout</span>
    </a>
</li>
                                <li class="dropdown-item" data-tooltip="Two column (simple)">
    <a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" class="item-link" data-atlassian-layout="{&quot;name&quot;: &quot;pagelayout-two-simple&quot;, &quot;columns&quot;: [&quot;&quot;, &quot;&quot;]   }">
            
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-check hidden"></span>
            
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-layout pagelayout-two-simple">Two column (simple)</span>
    </a>
</li>
                                <li class="dropdown-item" data-tooltip="Two column (simple, left sidebar)">
    <a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" class="item-link" data-atlassian-layout="{&quot;name&quot;: &quot;pagelayout-two-simple-left&quot;, &quot;columns&quot;: [&quot;aside&quot;, &quot;large&quot;]   }">
            
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-check hidden"></span>
            
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-layout pagelayout-two-simple-left">Two column (simple, left sidebar)</span>
    </a>
</li>
                                <li class="dropdown-item" data-tooltip="Two column (simple, right sidebar)">
    <a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" class="item-link" data-atlassian-layout="{&quot;name&quot;: &quot;pagelayout-two-simple-right&quot;, &quot;columns&quot;: [&quot;large&quot;, &quot;aside&quot;]   }">
            
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-check hidden"></span>
            
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-layout pagelayout-two-simple-right">Two column (simple, right sidebar)</span>
    </a>
</li>
                                <li class="dropdown-item" data-tooltip="Three column (simple)">
    <a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" class="item-link" data-atlassian-layout="{&quot;name&quot;: &quot;pagelayout-three-simple&quot;, &quot;columns&quot;: [&quot;&quot;, &quot;&quot;, &quot;&quot;]   }">
            
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-check hidden"></span>
            
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-layout pagelayout-three-simple">Three column (simple)</span>
    </a>
</li>
                                <li class="dropdown-item" data-tooltip="Two column">
    <a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" class="item-link" data-atlassian-layout="{&quot;name&quot;: &quot;pagelayout-two&quot;, &quot;columns&quot;: [&quot;&quot;, &quot;&quot;] , &quot;header&quot;: true  , &quot;footer&quot;:true  }">
            
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-check hidden"></span>
            
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-layout pagelayout-two">Two column</span>
    </a>
</li>
                                <li class="dropdown-item" data-tooltip="Two column (left sidebar)">
    <a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" class="item-link" data-atlassian-layout="{&quot;name&quot;: &quot;pagelayout-two-left&quot;, &quot;columns&quot;: [&quot;aside&quot;, &quot;large&quot;] , &quot;header&quot;: true  , &quot;footer&quot;:true  }">
            
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-check hidden"></span>
            
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-layout pagelayout-two-left">Two column (left sidebar)</span>
    </a>
</li>
                                <li class="dropdown-item" data-tooltip="Two column (right sidebar)">
    <a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" class="item-link" data-atlassian-layout="{&quot;name&quot;: &quot;pagelayout-two-right&quot;, &quot;columns&quot;: [&quot;large&quot;, &quot;aside&quot;] , &quot;header&quot;: true  , &quot;footer&quot;:true  }">
            
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-check hidden"></span>
            
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-layout pagelayout-two-right">Two column (right sidebar)</span>
    </a>
</li>
                                <li class="dropdown-item" data-tooltip="Three column">
    <a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" class="item-link" data-atlassian-layout="{&quot;name&quot;: &quot;pagelayout-three&quot;, &quot;columns&quot;: [&quot;&quot;, &quot;&quot;, &quot;&quot;] , &quot;header&quot;: true  , &quot;footer&quot;:true  }">
            
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-check hidden"></span>
            
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-layout pagelayout-three">Three column</span>
    </a>
</li>
                                <li class="dropdown-item" data-tooltip="Three column (left and right sidebars)">
    <a href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" class="item-link" data-atlassian-layout="{&quot;name&quot;: &quot;pagelayout-three-sidebars&quot;, &quot;columns&quot;: [&quot;sidebars&quot;, &quot;large&quot;, &quot;sidebars&quot;] , &quot;header&quot;: true  , &quot;footer&quot;:true  }">
            
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-check hidden"></span>
            
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-layout pagelayout-three-sidebars">Three column (left and right sidebars)</span>
    </a>
</li>
                            </ul>
                        </div>
                    </li>
                </ul>
                
                                                
                <ul class="aui-buttons rte-toolbar-group-undo">
                    
                <li class="toolbar-item aui-button" id="rte-button-undo" data-tooltip="Undo (Ctrl+Z)">
        <a class="toolbar-trigger" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" data-control-id="undo">
                
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-undo ">Undo</span>
        </a>
    </li>
                    
                <li class="toolbar-item aui-button" id="rte-button-redo" data-tooltip="Redo (Ctrl+Y)">
        <a class="toolbar-trigger" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" data-control-id="redo">
                
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-redo ">Redo</span>
        </a>
    </li>
                </ul>
                                <ul id="pluggable-status-container" class="aui-buttons rte-toolbar-pluggable-status no-separator">
                    <div id="pluggable-status"></div>
                </ul>
                            </div>                                                                                                <div id="draft-status" style="display:none"></div>
                            <div class="aui-toolbar2-secondary">
                <ul class="aui-buttons rte-toolbar-group-searchreplace">
                        <li class="toolbar-item aui-button" id="rte-button-searchreplace" data-tooltip="Find/Replace">
        <a class="toolbar-trigger" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" data-control-id="searchreplace">
                
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-search ">Find/Replace</span>
        </a>
    </li>
                </ul>
                <ul class="aui-buttons rte-toolbar-group-help">
                        <li class="toolbar-item aui-button" id="rte-button-help" data-tooltip="Help">
        <a class="toolbar-trigger" href="http://www.eewiki.net/display/microcontroller/Getting+Started+with+EFM32+Giant+Gecko+ARM+Cortex-M3#" data-control-id="help">
                
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-editor-help ">Keyboard shortcuts help</span>
        </a>
    </li>
                </ul>
            </div>        </div>    </div>
        
        
                                        <div id="editor-notifications-container"><div id="editor-messages"><div id="anonymous-warning" class="aui-message warning closeable">You are not logged in. Any changes you make will be marked as <span class="smalltext">anonymous</span>. You may want to <a href="http://www.eewiki.net/login.action?os_destination=%2Fdisplay%2Fmicrocontroller%2FGetting%2BStarted%2Bwith%2BEFM32%2BGiant%2BGecko%2BARM%2BCortex-M3">Log In</a> if you already have an account.</div><div id="heartbeat-div" class="hidden"><div class="aui-message info closeable"><span class="aui-icon icon-info"></span>This page is also being edited by <span id="other-users-span"></span>. Your changes will be merged with theirs when you save.</div></div></div><div id="all-messages"><div id="action-messages"></div></div></div><div id="editor-precursor"><div class="cell"><div class="aui-buttons aui-toolbar2"><button class="aui-button aui-button-subtle" type="button" data-tooltip="Labels" id="rte-button-labels" data-explicit-restrictions="" data-inherited-restrictions=""><span class="icon aui-icon aui-icon-small aui-iconfont-devtools-tag"></span></button></div><div id="content-title-div"><input type="text" name="title" id="content-title" tabindex="1" class="text pagetitle" autocomplete="off" value="Getting Started with EFM32 Giant Gecko ARM Cortex-M3" placeholder="Page title"></div></div></div>
            
    <div id="wysiwyg">
        <div id="rte" class="cell editor-default">
            <textarea id="wysiwygTextarea" name="wysiwygContent" class="hidden tinymce-editor"></textarea>
        </div>
    </div>
    <div id="editor-html-source-container" class="hidden">
        <textarea id="editor-html-source" class="monospaceInput"></textarea>
    </div>

    <div id="preview">
                        <div id="previewArea" class="cell">
        </div>
    </div>

            <div id="savebar-container"><div id="rte-savebar" class="aui-toolbar aui-toolbar2"><div class="toolbar-split toolbar-split-row"><div class="toolbar-split toolbar-split-left"><div class="aui-buttons"></div></div><div class="toolbar-split toolbar-split-right"><div class="aui-buttons" id="rte-savebar-tinymce-plugin-point"></div><div class="aui-buttons"><span id="rte-spinner" class="toolbar-item ">&nbsp;</span></div><div class="aui-buttons toolbar-group-edit assistive"><button id="rte-button-edit" class="aui-button" title="Return To edit Mode" type="button"><span class="trigger-text">Edit</span></button></div><div class="aui-buttons toolbar-group-preview"><button class="aui-button toolbar-item" id="rte-button-preview" title="Preview" type="button"><span class="trigger-text">Preview</span></button></div><div class="save-button-container"><button class="aui-button aui-button-primary" type="submit" id="rte-button-publish" name="confirm" value="Save" title="Save"><span class="trigger-text">Save</span></button></div><button class="toolbar-item-link aui-button aui-button-link" type="submit" id="rte-button-cancel" name="cancel" value="cancel"><span class="trigger-text">Cancel</span></button></div></div></div></div>
    
<section role="dialog" id="discard-changes-dialog" class="aui-layer aui-dialog2 aui-dialog2-medium" aria-hidden="true">
    <!-- Dialog header -->
    <header class="aui-dialog2-header">
        <h2 class="aui-dialog2-header-main">Discard unpublished changes</h2>
    </header>
    <div class="aui-dialog2-content">
        <div>
            <p>This will restore the editor to the last published version of this page. If anyone else has unpublished changes on the page, you'll be discarding those changes too.</p>
        </div>
        <div id="show-diff-body" style="display:none">
            <div id="show-diff-dialog-content">
                <div class="legend">
                    <span class="legend-title">Key: </span>
                    <span class="diff-html-added">This line was added.</span>
                    <span class="diff-html-removed">This line was removed.</span>
                    <span class="diff-html-changed">Formatting was changed.</span>
                </div>
                <hr>
                <div id="show-diff-dialog-content-body"></div>
            </div>
        </div>
    </div>
    <footer id="discard-warning-footer" class="aui-dialog2-footer">
        <div class="aui-dialog2-footer-actions">
            <button id="discard-changes-dialog-submit-button" class="aui-button aui-button-primary">Discard</button>
            <button id="discard-changes-dialog-show-diff-button" class="aui-button">See changes</button>
            <button id="discard-changes-dialog-close-button" class="aui-button aui-button-link">Close</button>
        </div>
    </footer>

    <footer id="show-diff-footer" class="aui-dialog2-footer" style="display:none">
        <div class="aui-dialog2-footer-actions">
            <button id="show-diff-dialog-submit-button" class="aui-button aui-button-primary">Discard</button>
            <button id="show-diff-dialog-close-button" class="aui-button aui-button-link">Close</button>
        </div>
    </footer>
</section>

    
</div>



<script type="text/x-template" title="dynamic-editor-metadata" id="dynamic-editor-metadata-template">
            <meta name="ajs-use-watch" content="false">
            <meta name="ajs-attachment-source-content-id" content="27754907">
            <meta name="ajs-fallback-mode" content="false">
            <meta name="ajs-use-inline-tasks" content="true">
            <meta name="ajs-heartbeat" content="true">
            <meta name="ajs-action-locale" content="en_GB">
            <meta name="ajs-editor-plugin-resource-prefix" content="/s/en_GB/6441/82994790ee2f720a5ec8daf4850ac5b7b34d2194/5.10.8/_">
            <meta name="ajs-existing-draft-id" content="0">
            <meta name="ajs-user-watching-own-content" content="false">
            <meta name="ajs-new-page" content="false">
            <meta name="ajs-content-id" content="27754907">
            <meta name="ajs-editor-mode" content="richtext">
            <meta name="ajs-form-name" content="inlinecommentform">
            <meta name="ajs-auto-start" content="false">
            <meta name="ajs-can-attach-files" content="false">
            <meta name="ajs-show-draft-message" content="false">
            <meta name="ajs-conf-revision" content="confluence$content$27754907.0">
            <meta name="ajs-draft-id" content="0">
            <meta name="ajs-shared-drafts" content="false">
            <meta name="ajs-min-editor-height" content="150">
            <meta name="ajs-draft-share-id" content="">
            <meta name="ajs-content-type" content="page">
            <meta name="ajs-version-comment" content="">
            <meta name="ajs-draft-type" content="page">
                
                <meta name="ajs-synchrony-token" content="">
    <meta name="ajs-synchrony-service-uri" content="">
    <meta name="ajs-synchrony-resources-uri" content="">
    <meta name="ajs-synchrony-app-id" content="">
    <meta name="ajs-synchrony-dark-enabled" content="false">
    <meta name="ajs-synchrony-expiry" content="">

            		    <meta name="ajs-max-thumb-width" content="300">
		    <meta name="ajs-max-thumb-height" content="300">
		    <meta name="ajs-can-send-email" content="true">
		    <meta name="ajs-is-dev-mode" content="false">
		    <meta name="ajs-draft-save-interval" content="30000">
		    <meta name="ajs-show-hidden-user-macros" content="false">
		    <meta name="ajs-is-admin" content="false">
		    <meta name="ajs-heartbeat-interval" content="30000">
	
    </script>

<script type="text/x-template" title="tableForm" id="table-form-template">
    <form id="tinymce-table-form" class="aui">
        <div class="field-group">
            <label for="rows">Rows</label>
            <input id="rows" name="rows" type="text" size="3" autocomplete="off" value="{0}">
        </div>
        <div class="field-group">
            <label for="cols">Columns</label>
            <input id="cols" name="cols" type="text" size="3" autocomplete="off" value="{1}">
        </div>
        <div class="field-group hidden">
            <input id="width" type="hidden" name="width" value="">
            <label for="width">Width</label>
        </div>
        <div class="group">
            <div class="checkbox">
                <input id="table-heading-checkbox" class="checkbox" type="checkbox" name="heading" checked="checked" value="true">
                <label for="table-heading-checkbox">First row is heading</label>
            </div>
        </div>
        <div class="group hidden">
            <div class="checkbox">
                <input id="table-equal-width-columns-checkbox" class="checkbox" type="checkbox" name="equal-width-columns" value="false">
                <label for="table-equal-width-columns-checkbox">Equal width columns</label>
            </div>
        </div>
    </form>
</script>
<input type="hidden" name="draftId" value="0" id="draftId"><input type="hidden" name="originalVersion" value="65" id="originalVersion">
<input type="hidden" name="syncRev" value="dummy-sync-rev" id="syncRev">    <input type="hidden" name="atl_token" value="93b3587b722ff7374bc054562d0c364c97068f05">
</div></body></html>